
define("layouts/visual-single-sound",["require","exports","module","views/sound/visual-sound-container","lib/views/single-sound"],function(a,b,c){var d=a("views/sound/visual-sound-container"),e=a("lib/views/single-sound"),f=c.exports=e.extend({SoundView:d})}),
define("views/sound/visual-sound-container",["require","exports","module","lib/audiomanager","config","vendor/experiments/experiments","lib/views/mixins/has-teaser","lib/views/mixins/has-ad-state","views/sound/offer-related-sounds","lib/play-manager","views/sound/related-sounds-title","views/sound/related-visual-sounds","lib/views/mixins/responsive","models/sound","lib/view","views/sound/visual-audible","views/sound/visual-sound-container.css","views/sound/visual-sound-container.tmpl"],function(a,b,c){function r(a){a=a?"on":"off",j[a]("play",s,this)[a]("pause",t,this)[a]("finish",u,this)[a]("change:current",v,this)}function s(){if(!F.call(this)){G.call(this,!1);return}this.model.areRelatedSoundsEnabled().done(y.bind(this)),this.toggleTeaser(!1),this.toggleState("related",!1).toggleState("offerRelated",!1)}function t(a){if(!F.call(this)){G.call(this,!0);return}var b=a.audio&&a.audio.controller;if(b&&b.getState()===d.States.ENDED)return;this.model.areRelatedSoundsEnabled().done(function(){this.teaserCanBeDisplayed()?this.toggleTeaser(!0):this.toggleState("related",!0)}.bind(this))}function u(a){if(!F.call(this)){G.call(this,!0);return}var b=this.subviews.relatedSounds&&this.subviews.relatedSounds.collection,c=f.get("widget_listening","after_first_track")==="play-more-like-this-button"?"offerRelated":"related";a===this.model?this.model.areRelatedSoundsEnabled().done(function(){this.teaserCanBeDisplayed()?(this.relatedToShowAfterTeaser=c,this.toggleTeaser(!0)):this.toggleState(c,!0)}.bind(this)):a===b&&this.toggleState(c,!0)}function v(a){var b=a.current,c=a.prev;b&&w.call(this,b),c&&c.seek(0)}function w(a){var b=this.subviews.visualAudible,c;if(b&&b.model.id===a.id)return;c=x(a),this.removeSubview(b),this.addSubview(c.render(),"visualAudible"),c.whenInserted().done(function(){c.$el.removeClass("animate"),this.addDeferred(setTimeout(b._dispose.bind(b),1e3))}.bind(this)),c.$el.addClass("animate g-transition-transform").appendTo(this.$$("sound")),this.toggleState("related",!1)}function x(a){return new p({resource_id:a.resource_id,resource_type:a.resource_type})}function y(){var a=this.subviews.relatedSounds,b;a||(a=new l({resource_id:this.model.id}),a.on(l.Events.ITEM_CLICKED,A,this),a.render(),this.addSubview(a,"relatedSounds"),b=a.collection,b.fetch().done(z.bind(this,b))),this.$$("related").append(a.el)}function z(a){var b=new k({resource_id:this.model.resource_id,own_sounds:a.hasOwnSounds});this.$$("related").prepend(b.render().el)}function A(a,b){j.setSource(b,{continuousPlay:e.get("widgetParams").continuous_play}),j.play(a,{userAction:!0})}function B(a){var b,c,d,e;a&&(y.call(this),this.toggleTeaser(!1)),b=this.subviews.relatedSounds,d=b&&b.collection,G.call(this,a),a&&(c=j.getCurrentSound(),d&&c&&(e=d.models.slice(0,d.indexOf(c)+1),e.forEach(b.removeListItem.bind(b))),b.getListItemWrappers().length||b.rerender()),this.toggleState("relatedVisible",a)}function C(){var a=this.subviews.offerRelated;a||(a=new i({resource_id:this.model.id}),a.on(i.Events.CLICKED,A,this),a.render(),this.addSubview(a,"offerRelated")),this.$el.append(a.el)}function D(a){G.call(this,a),a&&(this.toggleTeaser(!1),C.call(this)),this.toggleState("offerRelatedVisible",a)}function E(a){var b=this.subviews.visualAudible;G.call(this,a),b&&b.toggleState("adBackground",a)}function F(){return this.getWindowHeight()>130}function G(a){var b=this.subviews.visualAudible;b&&b.toggleBackgroundState(a)}var d=a("lib/audiomanager"),e=a("config"),f=a("vendor/experiments/experiments"),g=a("lib/views/mixins/has-teaser"),h=a("lib/views/mixins/has-ad-state"),i=a("views/sound/offer-related-sounds"),j=a("lib/play-manager"),k=a("views/sound/related-sounds-title"),l=a("views/sound/related-visual-sounds"),m=a("lib/views/mixins/responsive"),n=a("models/sound"),o=a("lib/view"),p=a("views/sound/visual-audible"),q=c.exports=o.extend(g,m,h,{className:"visualSoundContainer g-box-full",css:a("views/sound/visual-sound-container.css"),template:a("views/sound/visual-sound-container.tmpl"),ModelClass:n,relatedToShowAfterTeaser:null,states:{related:B,offerRelated:D},setup:function(){r.call(this,!0)},dispose:function(){r.call(this,!1)},onWindowSizeChange:function(a,b){e.set("adsDisabled",b.width<325||b.height<360)},onAdStart:function(){E.call(this,!0)},onAdFinish:function(){E.call(this,!1)},toggleTeaser:function(a){a&&(this.toggleState("offerRelated",!1),this.toggleState("related",!1)),this.toggleTeaserView(a)},onTeaserDismiss:function(){this.relatedToShowAfterTeaser&&this.addDeferred(setTimeout(function(){this.toggleState(this.relatedToShowAfterTeaser,!0),this.relatedToShowAfterTeaser=null}.bind(this),this.TEASER_TRANSITION_DURATION*1.5))}})}),
define("lib/views/single-sound",["require","exports","module","config/error-messages","lib/views/mixins/audio-ad-prefetch","lib/mixins/performance-measuring","models/sound","lib/view","lib/views/mixins/widget-container","lib/views/single-sound.css"],function(a,b,c){var d=a("config/error-messages"),e=a("lib/views/mixins/audio-ad-prefetch"),f=a("lib/mixins/performance-measuring"),g=a("models/sound"),h=a("lib/view"),i=a("lib/views/mixins/widget-container"),j=c.exports=h.extend(i,e,f,{ModelClass:g,performanceSelector:".playButton",SoundView:null,css:a("lib/views/single-sound.css"),className:"singleSound g-box-full",template:function(){return""},defaults:{resource_id:null,resource_type:null},renderDecorate:function(){var a=this.subviews.sound;a||(a=this.addSubview(new this.SoundView(this.options),"sound")),this.$el.empty().append(a.render().el)},getFetchErrorMessage:function(){return d.SOUND_NOT_FOUND}})}),
define("lib/views/mixins/has-teaser",["require","exports","module","lib/mixin","lib/play-manager","views/sound/teaser"],function(a,b,c){function j(){var a=this.subviews.teaser,b=e.getCurrentSound();a||(a=new f({resource_id:b.resource_id,resource_type:b.resource_type,hasCountDown:this.teaserHasCountDown}),a.on(f.Events.DISMISS,k,this),a.render(),this.addSubview(a,"teaser"),this.$$("teaser").append(a.el))}function k(){this.toggleTeaserView(!1),this.onTeaserDismiss()}function l(){var a=this.subviews.visualAudible;this._hideTeaserTimeoutId&&clearTimeout(this._hideTeaserTimeoutId),j.call(this),a&&(a.toggleBackgroundState(!0),a.toggleState("onlyArtwork",!0)),this.$el.toggleClass("teaserVisible",!0)}function m(){var a=this.subviews.visualAudible,b=this.subviews.teaser;if(!b)return;a.toggleBackgroundState(!1),b.scaleUpArtwork(Math.max(this.$el.height()-a.$el.height(),0)),this._hideTeaserTimeoutId=this.addDeferred(setTimeout(function(){a.toggleState("onlyArtwork",!1),b._dispose(),this.removeSubview(b),this.$el.toggleClass("teaserVisible",!1)}.bind(this),this.TEASER_TRANSITION_DURATION))}var d=a("lib/mixin"),e=a("lib/play-manager"),f=a("views/sound/teaser"),g=!1,h=["soundcloud:tracks:193018623"],i=c.exports=new d({TEASER_TRANSITION_DURATION:200,defaults:{onTeaserDismiss:$.noop,teaserHasCountDown:!1},toggleTeaserView:function(a,b,c){a?this.teaserCanBeDisplayed(b,c&&c.args?c.args:{})&&(l.call(this),g=!0):m.call(this)},teaserCanBeDisplayed:function(a,b){var c=!g;return a==="pause"&&!b.userAction&&(c=!1),this.model&&h.indexOf(this.model.getUrn())!==-1&&(c=!1),c}})}),
define("lib/views/mixins/has-ad-state",["require","exports","module","lib/ad-manager","lib/mixin"],function(a,b,c){function h(a){a=a?"one":"off",d[a]("ad:play",i,this)[a]("ad:skip ad:finish",j,this)}function i(){if(this.disposed)return;this.$el.toggleClass(f,!0),this.toggleState(f,!0),this.onAdStart(d.getCurrentSound())}function j(){if(this.disposed)return;this.$el.toggleClass(f,!1),this.toggleState(f,!1),this.onAdFinish()}var d=a("lib/ad-manager"),e=a("lib/mixin"),f="adState",g=c.exports=new e({defaults:{onAdStart:$.noop,onAdFinish:$.noop},after:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}}})}),
define("views/sound/offer-related-sounds",["require","exports","module","collections/own-related-sounds","lib/views/mixins/responsive","lib/view","views/sound/offer-related-sounds.tmpl","views/sound/offer-related-sounds.css"],function(a,b,c){function i(a){a.preventDefault(),this.trigger(g.CLICKED,this.collection.first(),this.collection)}var d=a("collections/own-related-sounds"),e=a("lib/views/mixins/responsive"),f=a("lib/view"),g={CLICKED:"offerRelatedSounds:clicked"},h=c.exports=f.extend(e,{template:a("views/sound/offer-related-sounds.tmpl"),css:a("views/sound/offer-related-sounds.css"),className:"offerRelatedSounds g-transition-opacity",events:{click:i},setup:function(){this.collection=new d(null,{resource_id:this.options.resource_id})},getTemplateData:function(a){var b=this.collection.first();a.nextSound=b.toJSON(),a.nextArtwork=b.get("artwork_url")}},{Events:g})}),
define("views/sound/related-sounds-title",["require","exports","module","config","models/sound","lib/view","views/sound/related-sounds-title.tmpl"],function(a,b,c){var d=a("config"),e=a("models/sound"),f=a("lib/view"),g=c.exports=f.extend({template:a("views/sound/related-sounds-title.tmpl"),className:"relatedSoundsTitle sc-truncate sc-text-verylight",ModelClass:e,requiredAttributes:["user","title","permalink_url"],defaults:{own_sounds:!1},getTemplateData:function(a){var b={isOwnSounds:this.options.own_sounds,isContinuousPlayEnabled:d.get("widgetParams").continuous_play};return this.options.own_sounds?(b.link=a.user.permalink_url,b.text=a.user.username):(b.link=a.permalink_url,b.text=a.title),b}})}),
define("views/sound/related-visual-sounds",["require","exports","module","lib/views/list","collections/own-related-sounds","views/sound/visual-sound-badge","lib/window-events","views/sound/related-visual-sounds.css"],function(a,b,c){function n(a){a.preventDefault();var b=this.getListItemViewByEvent(a);b&&this.trigger(l.ITEM_CLICKED,b.model,this.collection)}function o(){var a=p.call(this);this.$el.css({"max-height":a.height}),this.$(this.getListItemSelector()).each(function(b,c){c.style.width=a.width,c.style.height=a.height})}function p(){var a=this.$el.width(),b=Math.ceil(a/i),c=Math.floor((a-(b-1)*h)/b);return{width:c+"px",height:Math.min($(window).height()-(this.$el.position().top+j+k),c)+"px"}}var d=a("lib/views/list"),e=a("collections/own-related-sounds"),f=a("views/sound/visual-sound-badge"),g=a("lib/window-events"),h=10,i=200,j=60,k=40,l={ITEM_CLICKED:"relatedVisualSounds:clicked"},m=c.exports=d.extend({className:"relatedVisualSounds sc-clearfix",itemClassName:"relatedVisualSounds__item sc-pointer",css:a("views/sound/related-visual-sounds.css"),Subview:f,defaults:{maxDisplay:0},events:{click:n},setup:function(){this.collection=new e(null,{resource_id:this.options.resource_id}),this.collection.setLimit(20),g.on("resize:debounced",o,this)},dispose:function(){g.off("resize:debounced",o,this)},renderDecorate:function(){d.prototype.renderDecorate.apply(this,arguments),this.whenInserted().done(o.bind(this))},getListItemAttributes:function(){return{style:p.call(this)}}},{Events:l})}),
define("lib/views/mixins/responsive",["require","exports","module","_","config/sizes","config","lib/event-bus","lib/mixin","lib/backbone"],function(a,b,c){function o(a){var b=a?"on":"off";j[b]("change",r,this),g[b]("layout:change",p,this)}function p(){q(),r.call(this)}function q(){j.set({width:m.width(),height:m.height()})}function r(){s.call(this),this.onWindowSizeChange(t(),{width:this.getWindowWidth(),height:this.getWindowHeight()})}function s(){var a=t(),b;Object.keys(e).forEach(function(c){b=e[c],b!==e.DEFAULT&&this.toggleState("state-"+b,b===a)},this)}function t(){if(!u())return e.DEFAULT;var a=j.get("width"),b;return a<=k?b=e.SMALL:a<l?b=e.MEDIUM:b=e.DEFAULT,b}function u(){return!!f.get("router").layoutName}var d=a("_"),e=a("config/sizes"),f=a("config"),g=a("lib/event-bus"),h=a("lib/mixin"),i=a("lib/backbone"),j=new i.Model,k=250,l=400,m=$(window),n=c.exports=new h({before:{setup:function(){o.call(this,!0)},renderDecorate:function(){this.whenInserted().done(p.bind(this))},dispose:function(){o.call(this,!1)}},defaults:{onWindowSizeChange:function(){},getWindowHeight:function(){return j.has("height")?j.get("height"):m.height()},getWindowWidth:function(){return j.has("width")?j.get("width"):m.width()},getWindowSize:t}});m.on("resize",d.debounce(q,50))}),
define("views/sound/visual-audible",["require","exports","module","_","lib/animation","views/sound/artwork-waveform","lib/browser","lib/canvas","vendor/color/color","config","lib/views/mixins/has-ad-state","lib/helpers/image-helper","lib/views/mixins/multi-resource-type","lib/play-manager","lib/promoted","lib/support","lib/view","views/waveform/waveform","views/waveform/waveform-style","views/sound/visual-audible.css","views/sound/visual-audible.tmpl"],function(a,b,c){function v(a){var b=a?"on":"off";n[b]("play",x,this)[b]("pause",y,this)[b]("finish",z,this)[b]("change:current",A,this)}function w(){var a=n.getCurrentSound(),b=a&&a.isPlaying();Q.call(this,!b),this.toggleState("playing",b)}function x(){w.call(this),B.call(this)}function y(){J.call(this,!1)}function z(){J.call(this,!1)}function A(){B.call(this)}function B(){var a=n.getCurrentSound();a&&(this.isSound||a.isPlaying())&&C.call(this,a)}function C(a){var b=this.subviews.waveform;if(this._isInsertingWaveform||b&&b.model===a)return;this._isInsertingWaveform=!0,R.call(this).done(function(c){var d=E.call(this,a,c),f=!1;d.$el.addClass("hidden g-all-transitions-200"),this.$$("waveform").append(d.render().el),e.fadeOut(b?b.$el:this.$$("total")).progress(function(a){!f&&a>=.4&&(f=!0,d.$el.removeClass("hidden"))}).done(function(){D.call(this,d),this._isInsertingWaveform=!1}.bind(this))}.bind(this))}function D(a){var b=this.subviews.waveform;b&&(this.removeSubview(b),b._dispose()),this.addSubview(a,"waveform")}function E(a,b){var c=this.isSound?r:f;return new c({resource_id:a.resource_id,resource_type:a.resource_type,waveformStyle:b,darkText:b!=="inverted",show_comments:j.get("widgetParams").show_comments})}function F(a){if(this.getState("ad"))return;if($(a.target).closest(".artworkWaveform, .waveform").length)return;var b=n.getCurrentSound();b&&n.toggle(b,{userAction:!0,view:"visual-audible"}),I.call(this,!0)}function G(){J.call(this,!0),I.call(this,!0)}function H(){J.call(this,!1),I.call(this,!1)}function I(a){var b=K.call(this);this.toggleState("highlight",a),b&&b.toggleState("hover",a)}function J(a){var b=n.getCurrentSound(),c=b&&b.isPlaying(),d=this.getState("background"),e=this.model.hasVisuals&&this.model.hasVisuals();!c||d||!e?this.toggleState("minimal",!1):this.toggleState("minimal",!a)}function K(){var a=this.subviews.waveform;return a&&a instanceof f&&(a=a.subviews.waveform),a}function L(){var a=$.Deferred();return this.whenReady().pipe(function(a){return a.subviews.header.whenReady()}).pipe(function(a){return a.subviews.logo.whenReady()}).pipe(a.resolve),a}function M(a,b){var c=$.Deferred(),d=this.$$("artwork")[0],e=new h({width:d.offsetWidth,height:d.offsetHeight}),f=l.urlFrom(this.model.attributes,500);return N(e,f).done(function(){if(this.disposed)return;var f=a instanceof q?a.el:a[0],g=f.getBoundingClientRect(),h=d.getBoundingClientRect(),i,j,k;i=e.getImageData({x:Math.round(g.left-h.left),y:g.top},{x:Math.round(g.right-h.left),y:g.bottom}),j=l.getMainColor(i,b),k="rgb("+j.join(",")+")",c.resolve(k,a)}.bind(this)),c}function N(a,b){function d(b){var c=Math.max(a.width,a.height)/b.width,d=0,e=0,f=b.width,g=b.height,h=f*c,i=g*c,j=(a.width-h)/2,k=(a.height-i)/2;a.drawImage(b,d,e,f,g,j,k,h,i)}var c=$.Deferred();return p.corsImg?(l.load(b,!0).pipe(d).pipe(c.resolve),c):c.reject()}function O(){Q.call(this,!1)}function P(){Q.call(this,!0)}function Q(a){this.$$("artwork").toggleClass("sc-pointer",a)}function R(){var a=$.Deferred();return this.model.hasVisuals&&this.model.hasVisuals()&&(this.waveformStyle="default"),this.waveformStyle?a.resolve(this.waveformStyle):this.whenReady().done(function(){M.call(this,this.$$("waveform")).done(function(b){var c="rgb("+s.getColor("backgroundGradient","default")[0][1]+")",d=i(b).diff(c).brightness,e=d>t;this.waveformStyle=e?"default":"inverted",a.resolve(this.waveformStyle)}.bind(this))}.bind(this)),a}var d=a("_"),e=a("lib/animation"),f=a("views/sound/artwork-waveform"),g=a("lib/browser"),h=a("lib/canvas"),i=a("vendor/color/color"),j=a("config"),k=a("lib/views/mixins/has-ad-state"),l=a("lib/helpers/image-helper"),m=a("lib/views/mixins/multi-resource-type"),n=a("lib/play-manager"),o=a("lib/promoted"),p=a("lib/support"),q=a("lib/view"),r=a("views/waveform/waveform"),s=a("views/waveform/waveform-style"),t=190,u=c.exports=q.extend(m,k,{className:"visualAudible",css:a("views/sound/visual-audible.css"),template:a("views/sound/visual-audible.tmpl"),states:{background:"background",minimal:"minimal",onlyArtwork:"onlyArtwork"},_isInsertingWaveform:null,events:{mouseenter:G,mouseleave:H,"click .visualAudible__artwork, .visualAudible__footer":F},requiredAttributes:{sound:["visuals"]},setup:function(a){var b=this.requiredAttributes[a.resource_type]=this.requiredAttributes[a.resource_type]||[];b.push(this.model.imageAttribute),v.call(this,!0),this.toggleState("mobile",g.isMobile)},dispose:function(){v.call(this,!1)},renderDecorate:function(){var a=this.model.hasVisuals&&this.model.hasVisuals();B.call(this),w.call(this),a||this.correctLogoColor(),o.trackEvent("impression",this.model.toJSON())},correctLogoColor:function(){L.call(this).pipe(M.bind(this)).pipe(function(a,b){var c=i(a).diff(b.getColor()).brightness>t;c||b.toggleAltColor()})},toggleBackgroundState:function(a){this.toggleState("background",a),this.subviews.visuals&&this.subviews.visuals.toggleState("background",a)},getTemplateData:function(a){return d.extend(a,{is_sound:this.isSound,has_visuals:this.model.hasVisuals&&this.model.hasVisuals()})},onAdStart:O,onAdStop:P})}),
define("views/sound/visual-sound-container.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualSoundContainer{position:fixed;top:0;left:0}.visualSoundContainer__sound>.visualAudible{position:absolute;top:0;left:0;-webkit-transform:translate3d(0,0,0)}.visualSoundContainer__sound>.visualAudible.animate{-webkit-transform:translate3d(100%,0,0)}.visualSoundContainer__teaser{position:absolute;right:0;bottom:0;left:0;top:0;opacity:0;pointer-events:none}.visualSoundContainer.teaserVisible .visualSoundContainer__teaser{opacity:1;pointer-events:auto}.visualSoundContainer__related{position:absolute;right:0;bottom:0;left:0;padding:30px 12px;-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.visualSoundContainer .visualAudible__waveform{bottom:30px}.visualSoundContainer__related>.relatedSoundsTitle{margin-bottom:5px}.visualSoundContainer.relatedVisible .visualSoundContainer__related{-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.visualSoundContainer .offerRelatedSounds{opacity:0}.visualSoundContainer.offerRelatedVisible .offerRelatedSounds{opacity:1}.visualSoundContainer .adContainer{position:absolute;right:0;left:0;top:0;bottom:0;-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:hidden}.visualSoundContainer .adContainer>*{visibility:visible}.visualSoundContainer.adState .adContainer{-webkit-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visual-sound-container.tmpl",["vendor/handlebars-runtime","views/sound/visual-audible","views/ads/ad-container"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="visualSoundContainer__sound"> ',g="views/sound/visual-audible",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="visualAudible",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n</div>\n<div class="visualSoundContainer__related g-transition-transform"></div>\n<div class="visualSoundContainer__teaser g-transition-opacity"></div>\n',g="views/ads/ad-container",h=c.$view,g=h.call(b,g,{hash:{}}),f+=m(g)+" ",f})}),
define("lib/views/mixins/audio-ad-prefetch",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/mixin"],function(a,b,c){function i(){var a=$.Deferred();return d.get("widgetReady")?a.resolve():f.one("widget:ready",a.resolve),f.on("exception",a.resolve),a}function j(){e.prefetchCurrentSoundAudioAd()}var d=a("config"),e=a("lib/play-manager"),f=a("lib/event-bus"),g=a("lib/mixin"),h=c.exports=new g({after:{setup:function(){this.addDeferred(i().then(function(){this.$el.one("mouseenter",j)}.bind(this)))}}})}),
define("lib/mixins/performance-measuring",["require","exports","module","lib/event-bus","lib/mixin","tracking-events"],function(a,b,c){function m(a,b,c){function f(){clearTimeout(e),clearTimeout(d)}function h(){a()&&(f(),c())}var d=this.addDeferred(setTimeout(f,b)),e=this.addDeferred(setInterval(h,g));h()}var d=a("lib/event-bus"),e=a("lib/mixin"),f=a("tracking-events"),g=50,h=1e4,i=window.performance&&window.performance.timing,j="fetchStart",k=!0,l=c.exports=i?new e({defaults:{performanceSelector:null},after:{render:function(){var a,b,c;if(!k)return;k=!1;if(a=this.performanceSelector)b=function(){return this.$(a).length}.bind(this),c=function(){var a=Date.now()-i[j];d.trigger(f.APP.LOAD,{latency:a})},m.call(this,b,h,c)}}}):new e({})}),
define("lib/views/mixins/widget-container",["require","exports","module","config","lib/play-manager","lib/event-bus","lib/browser","lib/views/mixins/responsive","lib/mixin","models/audible-interface","models/exception"],function(a,b,c){function m(){var a=q.call(this),b=d.get("widgetParams");if(a instanceof j&&!a.isEmbeddable()){o(a);return}e.setSource(q.call(this)).setCursor(b.start_track),b.auto_play&&!g.isMobileSafari&&!g.isAndroid&&e.play(e.getCurrentSound()),f.trigger("widget:ready")}function n(a){var b=this.getFetchErrorMessage(a);b&&p(b)}function o(a){var b,c=a.get("permalink_url");b="This "+a.resource_type+" canâ€™t be played outside of SoundCloud",!a.isPrivate()&&c&&(b+='<br/><a href="'+c+'">Play on SoundCloud</a>'),p(b)}function p(a){k.raise({fatal:!0,message:a})}function q(){return this.collection||this.model}var d=a("config"),e=a("lib/play-manager"),f=a("lib/event-bus"),g=a("lib/browser"),h=a("lib/views/mixins/responsive"),i=a("lib/mixin"),j=a("models/audible-interface"),k=a("models/exception"),l=c.exports=new i({applyTo:function(a){h.applyTo(a)},defaults:{getFetchErrorMessage:$.noop},after:{setup:function(){var a=q.call(this);e.setSource(a),a.fetch().done(m.bind(this)).fail(n.bind(this))}}})}),
define("lib/views/single-sound.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".singleSound{border-radius:3px;overflow:hidden}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/teaser",["require","exports","module","models/audible","lib/browser","lib/views/mixins/responsive","lib/lingua","config/sizes","lib/view","views/sound/teaser.tmpl","views/sound/teaser.css"],function(a,b,c){function p(){return e.isMobile&&(e.isiOS||e.isAndroid)}function q(){this.options.hasCountDown&&(this._leftSecondsToClose=n,r.call(this)),this.toggleState("visible",!0)}function r(){if(this.disposed)return;this._leftSecondsToClose-=1,this.$$("countdown").text(this._leftSecondsToClose),this._leftSecondsToClose>0?setTimeout(r.bind(this),1e3):t.call(this)}function s(){this.trigger(m.DOWNLOAD_CLICK,this,{ios:this.getState("ios"),android:this.getState("android")})}function t(){this.trigger(m.DISMISS,this)}function u(a){var b=a&&a===h.SMALL,c=b?15:35,d=b?10:30,e=b?10:40,f=b?15:20,g=100,i=this.$$("text").height(),j=this.$$("button").height(),k=this.$el.width(),l=this.$el.height(),m=k-e*2,n=Math.min(m,l-c-d-j-i-f*3),o=(l-n)/2,p=o,q=n>=g,r=Math.max(c,o-f-i),s=p-f-j-l/20;q?this.$$("artwork").removeClass("g-all-transitions-200").css({top:o,left:e,right:e,bottom:p}):(r+=n/2+f,s+=n/2),this.toggleState("artworkHidden",!q),this.$$("text").css({top:r,left:e,right:e}),this.$$("button").css({left:e,right:e,bottom:s}),this.$$("timer").css({right:5,bottom:3})}function v(a){this.$$("artwork").addClass("g-all-transitions-200").css({top:0,left:0,right:0,bottom:a||0})}var d=a("models/audible"),e=a("lib/browser"),f=a("lib/views/mixins/responsive"),g=a("lib/lingua"),h=a("config/sizes"),i=a("lib/view"),j="https://app.adjust.com/4mv2c5?campaign=player&adgroup=__browser_locale__&creative=var_a",k="market://details?id=com.soundcloud.android&referrer=utm_source%3Dsoundcloud%26Dutm_medium%3Dwidget",l=k+"%26utm_campaign%3Dwidget_upsell",m={DISMISS:"teaser:dismiss",DOWNLOAD_CLICK:"teaser:download-click"},n=15,o=c.exports=i.extend(f,{template:a("views/sound/teaser.tmpl"),css:a("views/sound/teaser.css"),ModelClass:d,className:"teaser",defaults:{hasCountDown:!1},_leftSecondsToClose:0,events:{"click .teaser__dismiss":t,"click .teaser__button":s},requiredAttributes:["title"],setup:function(){var a=p();this.toggleState("mobile",a).toggleState(e.isiOS?"ios":"android",a)},renderDecorate:function(){this.whenInserted().done(q.bind(this))},onWindowSizeChange:u,scaleUpArtwork:v,getTemplateData:function(a){var b=p()?e.isiOS?j:l:a.user.permalink_url;return a.isiOS=e.isiOS,a.link=b.replace("__browser_locale__",g.getBrowserPrimaryLocale()),a.hasCountDown=this.options.hasCountDown,a.locale=g.getLocale(),a}},{Events:m})}),
define("collections/own-related-sounds",["require","exports","module","_","models/user","models/sound","collections/user-sounds","collections/related-sounds","collections/spotlight-sounds"],function(a,b,c){function m(a){function i(){return h.prototype.fetch.call(c,a).fail(b.reject).done(b.resolve)}var b=$.Deferred(),c=this,g=c.options.resource_id;return a=a?d.clone(a):{},f.getUserBySoundId(g).done(function(d){d.getPlan()===e.Plans.PRO_UNLIMITED?c.isFullyPopulated()?b.resolve():n(d.id,g).done(function(d){d.length>=k?(c.hasOwnSounds=!0,c.next_href=!1,c.lastFetchTime=Date.now(),c[a.add?"add":"reset"](d,a),b.resolve()):i()}).fail(b.reject):i()}),b}function n(a,b){var c=$.Deferred();return $.whenAll(j.map(o.bind(null,a))).done(function(){var a=d.chain(arguments).flatten().uniq().value(),e=a.filter(function(a){return a.id!==b});c.resolve(e)}),c}function o(a,b){var c,d=$.Deferred();return c=new b(null,{resource_id:a}),c.setLimit(20),c.fetch({add:!!c.length}).always(function(){d.resolve.apply(d,c.models),c.release()}),d}var d=a("_"),e=a("models/user"),f=a("models/sound"),g=a("collections/user-sounds"),h=a("collections/related-sounds"),i=a("collections/spotlight-sounds"),j=[i,g],k=2,l=c.exports=h.extend({fetch:function(a){return m.call(this,a)},hasOwnSounds:!1,getInfo:function(){return{type:this.hasOwnSounds?"own-related-sounds":"recommender",version:this.audioSourceVersion}}})}),
define("views/sound/offer-related-sounds.tmpl",["vendor/handlebars-runtime","views/sound/offer-related-play-button"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;return f+='<div class="offerRelatedSounds__button" style="background-image:url(',g=b.nextArtwork,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"nextArtwork",{hash:{}})),f+=n(g)+');"> ',g="views/sound/offer-related-play-button",h=c.$view,g=h.call(b,g,{hash:{}}),f+=n(g)+'\n</div>\n<h1 class="offerRelatedSounds__title">',g="Hear more tracks like this",h=c.$t,g=h.call(b,g,{hash:{}}),f+=n(g)+"</h1>\n",f})}),
define("views/sound/offer-related-sounds.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".offerRelatedSounds{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:60%;max-width:250px;margin:0 auto;color:#fff;line-height:1.8;display:table}.offerRelatedSounds.state-medium,.offerRelatedSounds.state-small{width:100%}.offerRelatedSounds__title{margin:0;display:table-cell;vertical-align:middle;font-weight:100;font-size:22px}.offerRelatedSounds.state-medium .offerRelatedSounds__title,.offerRelatedSounds.state-small .offerRelatedSounds__title{display:block;font-size:14px;position:absolute;top:100%;width:100%;text-align:center;margin-top:1em}.offerRelatedSounds__button{width:80px;height:80px;line-height:80px;float:left;margin-right:10px;text-align:center}.offerRelatedSounds.state-medium .offerRelatedSounds__button,.offerRelatedSounds.state-small .offerRelatedSounds__button{float:none;margin:0 auto}.offerRelatedSounds__button>.offerPlayButton{display:inline-block;vertical-align:middle;width:46px;height:46px;outline:0;padding:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/related-sounds-title.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function l(a,b){var d="",e,f;d+=" ",e=a.isContinuousPlayEnabled,f=c["if"],j=k.program(2,m,b),j.hash={},j.fn=j,j.inverse=k.program(5,o,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" ",d}function m(a,b){var d="",e,f;d+=" ",e={},f=a.link,e.link=f,f=a.text,e.text=f,f=c.$t,j=k.program(3,n,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+=" ",d}function n(a,b){return' Play more tracks by <a class="sc-link-white" href="[[link]]">[[text]]</a> '}function o(a,b){var d="",e,f;d+=" ",e={},f=a.link,e.link=f,f=a.text,e.text=f,f=c.$t,j=k.program(6,p,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+=" ",d}function p(a,b){return' Play another track by <a class="sc-link-white" href="[[link]]">[[text]]</a> '}function q(a,b){var d="",e,f;d+=" ",e=a.isContinuousPlayEnabled,f=c["if"],j=k.program(9,r,b),j.hash={},j.fn=j,j.inverse=k.program(12,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" ",d}function r(a,b){var d="",e,f;d+=" ",e={},f=a.link,e.link=f,f=a.text,e.text=f,f=c.$t,j=k.program(10,s,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+=" ",d}function s(a,b){return' Play more tracks like <a class="sc-link-white" href="[[link]]">[[text]]</a> '}function t(a,b){var d="",e,f;d+=" ",e={},f=a.link,e.link=f,f=a.text,e.text=f,f=c.$t,j=k.program(13,u,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+=" ",d}function u(a,b){return' Play another track like <a class="sc-link-white" href="[[link]]">[[text]]</a> '}c=c||a.helpers;var f="",g,h,i,j,k=this;g=b.isOwnSounds,h=c["if"],j=k.program(1,l,e),j.hash={},j.fn=j,j.inverse=k.program(8,q,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/list",["require","exports","module","_","lib/view","vendor/handlebars-runtime"],function(a,b,c){function h(){var a=d.pluck(this.subviews,"model");return this.collection.find(function(b){return a.indexOf(b)===-1})}var d=a("_"),e=a("lib/view"),f=a("vendor/handlebars-runtime"),g=c.exports=e.extend({emptyTemplate:null,defaults:{bulkFetch:0,maxDisplay:3,inverted:!1},Subview:null,subviewArgs:{},listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",animations:{},template:function(){return""},_listElement:null,fetchData:function(){return this.options.bulkFetch?this.collection.bulkFetch(this.options.bulkFetch):this.collection.fetch()},renderDecorate:function(){this.createListElement()&&this.addInitialItems()},createListElement:function(){var a=this.getListContainer(),b;return a.length&&!this._listElement&&(b=document.createElement(this.listTagName),this.listClassName&&(b.className=this.listClassName),a.append(b),this._listElement=$(b)),this._listElement},addInitialItems:function(){var a,b=this.getModelsToRender(),c=Math.min(this.options.maxDisplay||Infinity,b.length);for(a=0;a<c;++a)this.createAndInsertListItemView(b[a],-1)},_teardown:function(){this._listElement&&(this._listElement.remove(),this._listElement=null),e.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(a,b){var c,e=this.options.maxDisplay;c=this.addListItemSubview(a),c.render(),this.addListItemToDOM(c,d.isNumber(b)?b:-1),e&&this.getListItemViews().length>e&&(c=this.getListItemView(this.collection.at(e)),c&&(this.removeListItemFromDOM(c),this.removeSubview(c)))},getTemplate:function(a){return!this.emptyTemplate||!a||this.collection.length||!this.collection.isFullyPopulated()?e.prototype.getTemplate.apply(this,arguments):this.emptyTemplate},getListContainer:function(){return this.$el},getListElement:function(){return this._listElement||$()},getListItemView:function(a){return d.find(this.subviews,function(b){return b.model===a})},getListItemWrappers:function(){return this.getListElement().children()},getListItemViews:function(){var a=this.Subview;return this.subviews.filter(function(b){return b instanceof a})},getListItemViewByScrollOffset:function(a){var b,c;return d.find(this.subviews,function(d){return d.$el.is(":visible")?(b=d.$el.outerHeight(),c=d.$el.position().top+a-b/2,c<=a&&a<c+b):!1})},getSubviewArgs:function(a){return d.defaults({resource_id:a.resource_id,resource_type:a.resource_type},this.subviewArgs)},getListItemAttributesData:function(a){return a.model?a.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(a){var b=this.getListItemAttributes(a);return new f.SafeString(d.toAttributesString(b))},onAdd:function(a,b,c){if(this.disposed)return;if(!this.getListElement().length&&b.length===1&&a===b.at(0)){this.rerender();return}var d=c&&typeof c.index=="number"?c.index:-1,e=this.options.maxDisplay,f=!e||d>=0&&d<e||d<0&&this.collection.length<=e;f&&this.createAndInsertListItemView(a,d)},onRemove:function(a){var b=this.getListItemView(a);b&&(this.removeListItemFromDOM(b),this.removeSubview(b))},addListItemSubview:function(a){var b=this.getSubviewArgs(a);return this.addSubview(new this.Subview(b))},getListItemViewByEvent:function(a){var b=$(a.target).closest(this.getListItemSelector()),c;return b.length&&(c=d.find(this.subviews,function(a){return a.el===b.children()[0]})),c},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},createSubviewWrapper:function(a){var b=this.getListItemAttributesString(this.getListItemAttributesData(a)),c;return b=b.toString().length?" "+b:"",c=$("<"+this.itemTagName+' class="'+this.itemClassName+'"'+b+">"),c},getSubviewWrapper:function(a){return a.$el.parent()},getSubviewInWrapper:function(a){return d.find(this.subviews,function(b){return b.$el.parent().is(a)})},addListItemToDOM:function(a,b){var c=this.getListElement(),d=this.getSubviewWrapper(a),e=this.options.inverted,f,g;d.length||(d=this.createSubviewWrapper(a),d.append(a.el)),b===-1||b>=this.collection.length-1||b===undefined?c[e?"prepend":"append"](d):b===0?c[e?"append":"prepend"](d):(g=this.getListItemView(this.collection.at(b-1)),g&&(f=this.getSubviewWrapper(g),d[e?"insertBefore":"insertAfter"](f)))},removeListItem:function(a){var b=this.getListItemView(a);b&&this.removeListItemFromDOM(b)},removeListItemFromDOM:function(a){var b,c=this.getSubviewWrapper(a),d=this.options.maxDisplay;b=function(){var b,e,f,g=c.index();c.detach(),a._dispose(),f=!this._disposed&&d&&d<=this.collection.length&&this.getListItemWrappers().length<d,f&&(e=h.call(this),b=this.addListItemSubview(e),b.render(),this.addListItemToDOM(b,g))}.bind(this),this.animations.remove?this.addDeferred(setTimeout(c.fadeOut.bind(c,"slow",b),this.animations.remove.delay)):b()},detachSubviewFromDOM:function(a){this.getSubviewWrapper(a).detach()},appendDOMElement:function(a){var b=this.getListContainer();b&&b[this.options.inverted?"prepend":"append"](a)},getCollectionData:function(){return[]}})}),
define("views/sound/visual-sound-badge",["require","exports","module","models/sound","lib/view","views/sound/visual-sound-badge.tmpl","views/sound/visual-sound-badge.css"],function(a,b,c){var d=a("models/sound"),e=a("lib/view"),f=c.exports=e.extend({template:a("views/sound/visual-sound-badge.tmpl"),css:a("views/sound/visual-sound-badge.css"),ModelClass:d,className:"visualSoundBadge g-box-full",requiredAttributes:["permalink"]})}),
define("lib/window-events",["require","exports","module","_","lib/backbone"],function(a,b,c){function h(a,b){var c=b+"d",e=a==="resize"?i(c):g.trigger.bind(g,a+":"+c);return d[b](e,f)}function i(a){var b=window.innerWidth,c=window.innerHeight,d=g.trigger.bind(g,"resize:x:"+a),e=g.trigger.bind(g,"resize:y:"+a),f=g.trigger.bind(g,"resize:"+a);return function(a){var g=window.innerWidth,h=window.innerHeight;g!==b&&d(a),h!==c&&e(a),f(a),c=h,b=g}}var d=a("_"),e=a("lib/backbone"),f=200,g=c.exports=d.extend({},e.Events);$(window).on("resize",h("resize","debounce")).on("resize",h("resize","throttle")).on("scroll",h("scroll","debounce")).on("scroll",h("scroll","throttle"))}),
define("views/sound/related-visual-sounds.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".relatedVisualSounds{position:relative;overflow:hidden;width:100%;height:100%}.relatedVisualSounds__item{float:left;margin-left:10px}.relatedVisualSounds__item:first-child{margin-left:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("config/sizes",["require","exports","module"],function(a,b,c){c.exports={SMALL:"small",MEDIUM:"medium",DEFAULT:"default"}}),
define("lib/animation",["require","exports","module"],function(a,b,c){function g(a,b){var c=$.Deferred();return a.removeClass("g-opacity-transition").css({opacity:b?0:1}).addClass("g-opacity-transition").css({opacity:b?1:0}),h(e).progress(c.notify).done(function(){a.removeClass("g-opacity-transition"),c.resolve()}),c}function h(a){var b=$.Deferred(),c=Date.now(),d,e,f;return f=setInterval(function(){e=Date.now()-c,d=Math.min(1,e/a),b.notify(d),d===1&&(b.resolve(),clearInterval(f))},16),b.fail(function(){clearInterval(f)}),b}function i(a,b,c,d){return c*a/d+b}function j(a,b,c,d){return c*(a/=d)*a+b}function k(a,b,c,d){return-c*(a/=d)*(a-2)+b}function l(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function m(a,b,c,d){return c*(a/=d)*a*a+b}function n(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}var d={linear:i,"ease-in":j,"ease-out":k,"ease-in-out":l,"ease-in-cubic":m,"ease-out-cubic":n},e=200,f=c.exports={fadeOut:function(a,b){return g(a,!1,b)},fadeIn:function(a,b){return g(a,!0,b)},animateValue:function(a,b,c,e){var f=$.Deferred(),g=c-b,i=h(a),j=d[e]||d.linear;return g?(i.progress(function(c){var d=a*c,e=j(d,b,g,a);f.notify(e)}).done(f.resolve),f.fail(i.reject),f):f.resolve()}}}),
define("views/sound/artwork-waveform",["require","exports","module","models/sound","lib/views/mixins/responsive","lib/view","views/sound/artwork-waveform.css","views/sound/artwork-waveform.tmpl"],function(a,b,c){function h(a){this.options.show_artwork=!a,this.toggleState("noArtwork",a),this.rerender()}var d=a("models/sound"),e=a("lib/views/mixins/responsive"),f=a("lib/view"),g=c.exports=f.extend(e,{css:a("views/sound/artwork-waveform.css"),template:a("views/sound/artwork-waveform.tmpl"),className:"artworkWaveform g-box-full",ModelClass:d,defaults:{show_artwork:!0,waveformStyle:"inverted",show_comments:!0},states:{"state-small":h}})}),
define("lib/canvas",["require","exports","module","_","lib/browser"],function(a,b,c){function f(a){a=d.defaults(a||{},{width:0,height:0,canvas:document.createElement("canvas")}),this.canvas=a.canvas,this.context=a.canvas.getContext("2d"),this.width=a.width||a.canvas.offsetWidth,this.height=a.height||a.canvas.offsetHeight,this.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,this.backingStoreRatio=e.backingStoreRatio,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,this.canvas.setAttribute("width",this.width*this.canvasPixelRatio),this.canvas.setAttribute("height",this.height*this.canvasPixelRatio),this.devicePixelRatio!==this.backingStoreRatio&&this.context.scale(this.canvasPixelRatio,this.canvasPixelRatio)}function g(a,b){return{x:a.x*b,y:a.y*b}}var d=a("_"),e=a("lib/browser");c.exports=f,d.extend(f.prototype,{drawImage:function(){this.context.drawImage.apply(this.context,arguments)},putImageData:function(a,b){this.context.putImageData(a,g(b,this.canvasPixelRatio))},getImageData:function(a,b){return a=g(a,this.canvasPixelRatio),b=g(b,this.canvasPixelRatio),this.context.getImageData(a.x,a.y,b.x-a.x,b.y-a.y)}})}),
define("lib/views/mixins/multi-resource-type",["require","exports","module","models/sound","models/group","models/user","models/playlist","lib/mixin","config/resources"],function(a,b,c){var d=a("models/sound"),e=a("models/group"),f=a("models/user"),g=a("models/playlist"),h=a("lib/mixin"),i=a("config/resources"),j=c.exports=new h({defaults:{isAudible:!1,isUser:!1,isGroup:!1,isSound:!1,isPlaylist:!1,isPrivate:function(){return this.isAudible&&this.model.isPrivate()},isShareable:function(){return this.isAudible&&this.model.isShareable()},isLikeable:function(){return this.isAudible&&!this.model.isPrivate()},isBuyable:function(){return!!this.isAudible&&!!this.model.get("purchase_url")},isDownloadable:function(){return!!this.isAudible&&!!this.model.get("download_url")},getShareURL:function(){var a=this.model.get("permalink_url");switch(this.options.resource_type){case i.USER_SOUNDS:a+="/tracks";break;case i.USER_FAVORITES:a+="/likes"}return this.isAudible&&this.isPrivate()&&(a+="/"+this.model.get("secret_token")),a}},before:{setup:function(){if(!this.model){var a=this.options;switch(a.resource_type){case i.USER:case i.USER_SOUNDS:case i.USER_FAVORITES:case i.USER_SPOTLIGHT:this.ModelClass=f,this.isUser=!0;break;case i.SOUND:this.ModelClass=d,this.isAudible=!0,this.isSound=!0;break;case i.PLAYLIST:this.ModelClass=g,this.isAudible=!0,this.isPlaylist=!0;break;case i.GROUP:case i.GROUP_SOUNDS:this.ModelClass=e,this.isGroup=!0}this.model=this.getModel(a.resource_id,a.resource_type)}}}})}),
define("views/waveform/waveform",["require","exports","module","_","lib/futures","models/sound","lib/scene/scene","lib/scene/scene-layer","lib/support","lib/view","lib/helpers/waveform-helper","views/comments/comment-popover","views/waveform/nodes/background","views/waveform/nodes/comments","views/waveform/nodes/interaction","views/waveform/nodes/progress","views/waveform/nodes/scrubber","views/waveform/nodes/time-indicator","views/waveform/waveform.tmpl","views/waveform/waveform.css"],function(a,b,c){function t(a){this.model[a]("play pause",u,this)}function u(){this.toggleState("playing",this.model.isPlaying())}function v(){return this.options.show_comments&&this.model.resource_type==="sound"}function w(){if(this.disposed||this.layersAreInserted)return;var a=this.options,b=this.model,c=a.interactive,e=this.getElement("sceneElement"),f={resource_type:b.resource_type,resource_id:b.resource_id,waveformStyle:a.waveformStyle,upperPartHeight:a.upperPartHeight,$eventEl:e};this.addLayer([[m,d.defaults({waveformData:this.waveformData},f)],[p,d.clone(f)],c&&!i.touch?[q,f]:null]),c&&this.addLayer([[r,d.clone(f)],[o,d.clone(f)]]),x.call(this),this.toggleState("loaded",!0),this.layersAreInserted=!0}function x(){var a,b;if(this._commentsShowing||!v.call(this))return;a=this.model,b=this.addLayer([[n,{sound_id:a.id,resource_id:a.resource_id,waveformData:this.waveformData,$eventEl:this.getElement("sceneElement")}]],{at:1}),b.setDirty(!0),this._commentsShowing=!0}function y(){if(this.subviews.commentPopover)return;var a,b=this.model,c=this.el.offsetHeight*(1-this.options.upperPartHeight);a=new l({sound_id:b.id,resource_id:b.resource_id,darkText:this.options.darkText,avatarSize:c<20?10:20}),a.render(),this.el.appendChild(a.el),this.addSubview(a,"commentPopover")}var d=a("_"),e=a("lib/futures"),f=a("models/sound"),g=a("lib/scene/scene"),h=a("lib/scene/scene-layer"),i=a("lib/support"),j=a("lib/view"),k=a("lib/helpers/waveform-helper"),l=a("views/comments/comment-popover"),m=a("views/waveform/nodes/background"),n=a("views/waveform/nodes/comments"),o=a("views/waveform/nodes/interaction"),p=a("views/waveform/nodes/progress"),q=a("views/waveform/nodes/scrubber"),r=a("views/waveform/nodes/time-indicator"),s=c.exports=j.extend({template:a("views/waveform/waveform.tmpl"),css:a("views/waveform/waveform.css"),className:"waveform",ModelClass:f,requiredAttributes:["waveform_url","state"],defaults:{single:!0,upperPartHeight:.7,waveformStyle:"default",show_comments:!0,interactive:!0,darkText:!0},_commentsShowing:!1,states:{playing:"playing",emptyWaveform:function(a){this.$el.toggleClass("waveform__empty",a),a&&this.toggleState("loaded",!0)},loaded:"loaded"},element2selector:{sceneElement:".waveform__scene"},waveformData:null,_wisDeferred:null,setup:function(){t.call(this,"on"),this.scene=new g,this.whenReadyForLayers=e.defer(),this.layersAreInserted=!1,e.all([this.whenInserted(),k.loadWaveformDataForView(this)]).done(this.whenReadyForLayers.resolve)},dispose:function(){t.call(this,"off")},renderDecorate:function(){var a=!this.model.getNumSounds()||this.model.isProcessing();a?this.toggleState("emptyWaveform",!0):v.call(this)&&this.whenInserted().done(y.bind(this)),this.whenReadyForLayers.done(w.bind(this))},teardown:function(){this.scene.teardown(),this._commentsShowing=!1,this.layersAreInserted=!1},addLayer:function(a,b){var c=new h,e=c.el,f=this.scene,g=this.getElement("sceneElement"),i;return b=b||{},this.addSubview(c),f.addLayer(c),b.at===undefined?g.append(e):(i=f.getLayers()[b.at],i?i.$el.before(e):g.append(e)),c.initCanvasDimensions(),a.filter(d.identity).forEach(c.addNode,c),c},getModelData:function(){return{}},getTemplateData:function(a){var b=this.model,c=b.resource_type==="sound",e=!b.getNumSounds(),f=b.isProcessing(),g=e||f;return d.extend(a,{id:b.id,_resource_id:b.resource_id,type:c?"track":"playlist",emptySet:e,isProcessing:f,emptyWaveform:g,showComments:v.call(this),upperPartHeightPercent:this.options.upperPartHeight*100+"%"})}})}),
define("views/waveform/waveform-style",["require","exports","module","_","config/waveform-styles"],function(a,b,c){function g(a,b){var c=b[0],d=b[1],e=b.length===3?b[2]:1,f="rgba("+d+","+e+")";return a.addColorStop(c,f),a}function h(a){var b=d.result(e,a);return b}var d=a("_"),e=a("config/waveform-styles"),f=c.exports={getConfig:function(a){return e._config[a]},gradient:function(a,b,c,d,e){d=d||1,e==null&&(e=1);var f=h(c),i=a.canvas.height/d,j=f[b];return e!==1&&(j=j.map(function(a){var b=a.length===3?a[2]:1;return[a[0],a[1],b*e]})),j.reduce(g,a.createLinearGradient(0,0,0,i))},getColor:function(a,b){return h(b)[a]}}}),
define("views/sound/visual-audible.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualAudible{width:100%;height:100%;position:relative}.visualAudible.mobile,.visualAudible.mobile *{-webkit-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden}.visualAudible__artwork,.visualAudible__artworkOverlay,.visualAudible__artworkOverlay:after,.visualAudible__artworkOverlayBottom,.visualAudible__artworkOverlayTop,.visualAudible__artworkOverlay{position:absolute;top:0;left:0;width:100%;height:100%}.visualAudible__artworkOverlay:after{display:block;content:'';background:#000;opacity:.6}.visualAudible__artworkOverlayBottom{-webkit-filter:blur(2px)}.visualAudible__artworkOverlayTop{-webkit-filter:blur(8px);opacity:.9}.visualAudible__artworkOverlay{opacity:0}.visualAudible.background .visualAudible__artworkOverlay{opacity:1}.visualAudible__body{position:relative;margin:0 0 90px;padding:14px 11px 14px 10px}.visualAudible__footer{position:absolute;right:0;bottom:0;left:0;height:110px;padding:15px 10px;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.visualAudible.background .visualAudible__footer{-webkit-transform:translate(0,100%);-ms-transform:translate(0,100%);transform:translate(0,100%)}.visualAudible.adBackground .soundHeader__actions{opacity:0}.visualAudible__total{position:absolute;bottom:10px;left:10px;z-index:100}.visualAudible__waveform{position:absolute;height:74px;left:10px;right:10px;bottom:20px;-webkit-transition:opacity .2s ease-out,-webkit-transform .2s ease-out;transition:opacity .2s ease-out,transform .2s ease-out}.visualAudible__waveform>.artworkWaveform{position:absolute;top:0;left:0;opacity:1;z-index:101}.visualAudible__waveform>.artworkWaveform.hidden{opacity:0}.visualAudible__progressBar{position:fixed;bottom:0;left:0;right:0;opacity:0}.visualAudible.minimal .visualAudible__waveform{-webkit-transform:translate3d(0,100%,0);-ms-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.visualAudible.minimal .soundHeader__playButton,.visualAudible.minimal .soundHeader__title,.visualAudible.minimal .soundHeader__actions,.visualAudible.minimal .visualAudible__waveform{opacity:0}.visualAudible.onlyArtwork .soundHeader__logo,.visualAudible.onlyArtwork .soundHeader__title,.visualAudible.onlyArtwork .soundHeader__actions,.visualAudible.onlyArtwork .soundHeader__playButton,.visualAudible.onlyArtwork .visualAudible__waveform{opacity:0}.visualAudible.onlyArtwork .visualAudible__progressBar,.visualAudible.minimal .visualAudible__progressBar{opacity:1}@media (max-height:350px){.visualAudible .visualAudible__waveform{height:44px}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visual-audible.tmpl",["vendor/handlebars-runtime","views/sound/visuals","lib/views/image","views/sound/header","views/sound/sounds-total","views/sound/seekable-thin-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e="views/sound/visuals",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g="visuals",f.key=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function o(a,b){var d="",e,f,g;return d+=" ",e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.stretch=g,g=500,f.size=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+' <div class="visualAudible__artworkOverlay g-transition-opacity"> ',e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.stretch=g,g=500,f.size=g,g="visualAudible__artworkOverlayBottom",f["class"]=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",e="lib/views/image",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g=!0,f.stretch=g,g=500,f.size=g,g="visualAudible__artworkOverlayTop",f["class"]=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}function p(a,b){var d="",e,f,g;return d+=' <div class="visualAudible__total g-transition-opacity"> ',e="views/sound/sounds-total",f={},g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_id,f.resource_id=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.resource_type,f.resource_type=g,g="soundsTotal",f.key=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div> ",d}function q(a,b){var d="",e,f,g;return d+=' <div class="visualAudible__progressBar g-transition-opacity"> ',e="views/sound/seekable-thin-bar",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="visualAudible__artwork"> ',g=b.has_visuals,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.program(3,o,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n</div>\n<div class="visualAudible__body"> <div class="visualAudible__header"> ',g="views/sound/header",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_id,h.resource_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_type,h.resource_type=i,i=!0,h.visual=i,i=!0,h.show_button_overlay=i,i="header",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div>\n</div>\n<div class="visualAudible__footer g-transition-transform"> ',g=b.is_sound,h=c.unless,k=l.program(5,p,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' <div class="visualAudible__waveform g-transition-transform"></div> ',g=b.is_sound,h=c["if"],k=l.program(7,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n</div>\n",f})}),
define("views/ads/ad-container",["require","exports","module","_","lib/ad-manager","lib/views/mixins/has-ad-state","lib/views/mixins/responsive","lib/view","views/ads/ad-container.tmpl","views/ads/ad-container.css"],function(a,b,c){function k(){this.toggleState("visible",!0),this.rerender()}function l(){this.toggleState("visible",!1),this.addDeferred(d.delay(this.teardown,250))}var d=a("_"),e=a("lib/ad-manager"),f=a("lib/views/mixins/has-ad-state"),g=a("lib/views/mixins/responsive"),h=a("lib/view"),i=470,j=c.exports=h.extend(g,f,{template:a("views/ads/ad-container.tmpl"),css:a("views/ads/ad-container.css"),onWindowSizeChange:function(a,b){this.toggleState("tight",b.height<i)},className:"adContainer g-transition-transform",hasData:function(){return!!e.getCurrentSound()},getTemplateData:function(){var a=e.getCurrentAd();return a?a.toJSON():{}},renderDecorate:function(){e.metrics("audio_ad:impression")},onAdStart:k,onAdFinish:l})}),
define("models/audible",["require","exports","module","config/resources","models/playlist","models/sound"],function(a,b,c){var d=a("config/resources"),e=a("models/playlist"),f=a("models/sound"),g=c.exports=function(a,b){var c=a.resource_type,g;return delete a.resource_type,c===d.PLAYLIST?g=new e(a,b):g=new f(a,b),g};g.getClass=function(a){var b=a.resource_type;return b===d.PLAYLIST?e:f}}),
define("views/sound/teaser.tmpl",["vendor/handlebars-runtime","lib/views/image"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var d="",e,f;d+=' <div class="teaser__timer sc-font-light sc-truncate">',e="Back to track in <span class='teaser__countdown'></span>",f=c.$t,e=f.call(a,e,{hash:{}});if(e||e===0)d+=e;return d+=" &hellip; </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression,n="function",o=c.helperMissing,p=void 0;f+='<div class="teaser__text"> <h2 class="sc-font-light sc-truncate">',g="Explore more music & audio like",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'</h2> <h2 class="teaser__trackTitle sc-truncate sc-orange sc-font-light">',g=b.title,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"title",{hash:{}})),f+=m(g)+'</h2> <h2 class="sc-font-light sc-truncate">',g="On SoundCloud.",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'</h2>\n</div>\n<a class="teaser__button ',g=b.locale,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"locale",{hash:{}})),f+=m(g)+'" href="',g=b.link,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"link",{hash:{}})),f+=m(g)+'" title="',g="Download the app",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'"><span class="sc-visuallyhidden">',g="Download the app",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'</span></a>\n<div class="teaser__dismiss"></div>\n',g=b.hasCountDown,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f+='\n<div class="teaser__artwork"> <a href="',g=b.link,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"link",{hash:{}})),f+=m(g)+'">',g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.stretch=i,i=500,h.size=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"</a>\n</div> ",f})}),
define("views/sound/teaser.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".teaser{position:relative;width:100%;height:100%;background:rgba(255,255,255,.9)}.teaser>*{visibility:hidden}.teaser.visible>*{visibility:visible}.teaser__text,.teaser__button,.teaser__artwork,.teaser__timer{position:absolute}.teaser.artworkHidden .teaser__artwork{display:none}.teaser__text>h2{margin:3px 0 0;text-align:center}.teaser__trackTitle{font-size:24px}.teaser.state-small .teaser__text>h2,.teaser.state-medium .teaser__text>h2{font-size:14px}.teaser.state-small .teaser__trackTitle,.teaser.state-medium .teaser__trackTitle{font-size:18px}.teaser__button{display:block;height:57px;overflow:hidden;margin:0 auto}.teaser .teaser__button{background:url(/player/assets/images/badges/en/hearmore_204_57-7c6cf1a9.png) center no-repeat;background-size:204px 57px;width:204px}.teaser.android .teaser__button{background:url(/player/assets/images/badges/en/google_165x57-7c6cf1a9.png) center no-repeat;background-size:165px 57px;width:165px}.teaser.ios .teaser__button{background:url(/player/assets/images/badges/en/apple_193x57-7c6cf1a9.png) center no-repeat;background-size:193px 57px;width:193px}.teaser.ios .teaser__button.es{background:url(/player/assets/images/badges/es/apple_192x57-7c6cf1a9.png) center no-repeat;background-size:193px 57px;width:193px}.teaser.android .teaser__button.es{background:url(/player/assets/images/badges/es/google_165x57-7c6cf1a9.png) center no-repeat;background-size:165px 57px;width:165px}.teaser.ios .teaser__button.pt_BR{background:url(/player/assets/images/badges/pt_BR/apple_192x57-7c6cf1a9.png) center no-repeat;background-size:193px 57px;width:193px}.teaser.android .teaser__button.pt_BR{background:url(/player/assets/images/badges/pt_BR/google_165x57-7c6cf1a9.png) center no-repeat;background-size:165px 57px;width:165px}.teaser__dismiss{position:absolute;top:15px;right:15px;width:29px;height:29px;cursor:pointer;background:url(/player/assets/images/dismiss_button_29x29-b4c10349.png) center no-repeat;background-size:29px 29px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.teaser__dismiss{background-image:url(/player/assets/images/dismiss_button_58x58-63ff7a5d.png)}.teaser .teaser__button{background-image:url(/player/assets/images/badges/en/hearmore_408_114-7c6cf1a9.png)}.teaser.android .teaser__button{background-image:url(/player/assets/images/badges/en/google_330x114-7c6cf1a9.png)}.teaser.ios .teaser__button{background-image:url(/player/assets/images/badges/en/apple_385x114-7c6cf1a9.png)}.teaser.ios .teaser__button.es{background-image:url(/player/assets/images/badges/es/apple_385x114-7c6cf1a9.png)}.teaser.android .teaser__button.es{background-image:url(/player/assets/images/badges/es/google_330x114-7c6cf1a9.png)}.teaser.ios .teaser__button.pt_BR{background-image:url(/player/assets/images/badges/pt_BR/apple_385x114-7c6cf1a9.png)}.teaser.android .teaser__button.pt_BR{background-image:url(/player/assets/images/badges/pt_BR/google_330x114-7c6cf1a9.png)}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("collections/user-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d=a("collections/sounds"),e=c.exports=d.extend({defaults:{resource_type:"users",sounds_type:"tracks"}})}),
define("collections/related-sounds",["require","exports","module","config","collections/sounds","lib/url"],function(a,b,c){function i(){return Math.floor(Math.random()*1e8)}var d=a("config"),e=a("collections/sounds"),f=a("lib/url"),g=null,h=c.exports=e.extend({audioSourceVersion:null,baseUrl:function(){return d.get("api_embedded_host")+f.stringify({path:["tracks","soundcloud:tracks:"+this.options.resource_id,"related"],query:this.baseUrlQueryParams()})},baseUrlQueryParams:function(){var a=d.get("me").id||null;return!a&&!g&&(g=i()),{user_id:a,anon_user_id:a?null:g}},getInfo:function(){return{type:"recommender",version:this.audioSourceVersion}},parse:function(a){return this.audioSourceVersion=a.version||"no_version",e.prototype.parse.apply(this,arguments)}})}),
define("collections/spotlight-sounds",["require","exports","module","collections/sounds"],function(a,b,c){var d=a("collections/sounds"),e=c.exports=d.extend({isEdgeBaseUrl:!0,defaults:{sounds_type:"spotlight",resource_type:"users"}})}),
define("views/sound/offer-related-play-button",["require","exports","module","lib/view","views/sound/offer-related-play-button.tmpl"],function(a,b,c){var d=a("lib/view"),e=c.exports=d.extend({template:a("views/sound/offer-related-play-button.tmpl"),tagName:"button",className:"offerPlayButton sc-button-nostyle"})}),
define("views/sound/visual-sound-badge.tmpl",["vendor/handlebars-runtime","lib/views/image","views/sound/title"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.stretch=i,i=200,h.size=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+'\n<div class="visualSoundBadge__title"> ',g="views/sound/title",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=!0,h.visual=i,i=!1,h.show_link=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/visual-sound-badge.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visualSoundBadge{position:relative;overflow:hidden}.visualSoundBadge__title{position:absolute;top:5px;left:5px;right:5px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork-waveform.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".artworkWaveform{position:relative}.artworkWaveform__artwork{position:absolute;top:-3px;left:0;width:80px;height:80px}.artworkWaveform__waveform{position:absolute;top:0;left:90px;right:0;bottom:0;height:100%}.artworkWaveform.noArtwork .artworkWaveform__waveform{left:0}@media (max-height:350px){.artworkWaveform__waveform{left:60px}.artworkWaveform .artworkWaveform__artwork{width:50px;height:50px}}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork-waveform.tmpl",["vendor/handlebars-runtime","views/sound/artwork","views/waveform/waveform"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=' <div class="artworkWaveform__artwork"> ',e="views/sound/artwork",f={},g=a._resource_id,f.resource_id=g,g=a._resource_type,f.resource_type=g,g=80,f.size=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;g=b._options,g=g===null||g===undefined||g===!1?g:g.show_artwork,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+='\n<div class="artworkWaveform__waveform"> ',g="views/waveform/waveform",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.show_comments,h.show_comments=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.waveformStyle,h.waveformStyle=i,i="waveform",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("models/group",["require","exports","module","lib/mixins/has-image","lib/mixins/throws-not-found","lib/model"],function(a,b,c){var d=a("lib/mixins/has-image"),e=a("lib/mixins/throws-not-found"),f=a("lib/model"),g=c.exports=f.extend(d,e,{resource_type:"group",urnPrefix:"soundcloud:groups",baseUrl:function(){return["groups",this.id].join("/")}})}),
define("lib/futures",["require","exports","module","_"],function(a,b,c){var d,e=a("_");c.exports=d={defer:function(a){var b=$.Deferred(),c=b.promise();return e.isFunction(a)?(a.call(c,b.resolve,b.reject),c):(e.isObject(a)&&e.isFunction(a.then)&&a.then(b.resolve,b.reject),b)},settled:function(a){return $.whenAll(a)},all:function(a){return $.when.apply($,a)},resolve:function(a){return $.Deferred().resolve(a)},reject:function(a){return $.Deferred().reject(a)},promisify:function(a){return function(){var b=$.Deferred();return a.apply(null,e.toArray(arguments).concat(function(a,c){a?b.reject(a):b.resolve(c)})),b.promise()}},call:function(a){var b=$.Deferred(),c=e.tail(arguments,1);try{b.resolve(a.apply(null,c))}catch(d){b.reject(d)}return b.promise()},mapEither:function(a,b){return b.then(a,a)},sequential:function(a){return a.reduce(function(a,b){function c(){return b().then(d.reject)}return a.then(b,c)},$.Deferred().resolve())},delay:function(a){var b=d.defer();return window.setTimeout(b.resolve.bind(b),a),b}}}),
define("lib/scene/scene",["require","exports","module","lib/backbone"],function(a,b,c){function f(){g.call(this)}function g(){this._raf||(this._raf=window.requestAnimationFrame(this.update))}var d=a("lib/backbone"),e=c.exports=Class.extend([d.Events,{_layers:null,_raf:null,initialize:function(){this._layers=[],this.update=this.update.bind(this)},teardown:function(){window.cancelAnimationFrame(this._raf),this._raf=null;var a;while(a=this._layers.pop())a.off("dirty",f,this)},getLayers:function(){return this._layers},addLayer:function(a){this._layers.push(a),a.on("dirty",f,this),a.isDirty&&g.call(this)},update:function(){this._raf=null;var a,b;for(a=0;b=this._layers[a];++a)b.isDirty&&b.update()}}])}),
define("lib/scene/scene-layer",["require","exports","module","_","lib/views/canvas-view"],function(a,b,c){function g(){this.setDirty(!0)}var d=a("_"),e=a("lib/views/canvas-view"),f=c.exports=e.extend({className:"g-box-full sceneLayer",render:function(){return this},addNode:function(a){var b=a[0],c=d.extend({el:this.el,scale:this.scale},a[1]),e=new b(c);e.className&&this.$el.addClass(e.className),this.addSubview(e).on("dirty",g,this).render()},onCanvasResize:function(){d.invoke(this.subviews,"onResize")},setDirty:function(a){(this.isDirty=a)&&this.trigger("dirty")},update:function(){if(this.disposed||!this.isDirty)return;var a=!1,b,c;this.context.clearRect(0,0,this.el.width,this.el.height);for(b=0;c=this.subviews[b];++b)c.draw(),a=a||c.isDirty;this.setDirty(a)}})}),
define("lib/helpers/waveform-helper",["require","exports","module","_","lib/futures","lib/store","lib/support"],function(a,b,c){function r(a){return!a||a.indexOf(j)>-1?i:a.replace(/\/w1\./,"/wis.").replace(/\.png$/i,".json")}function s(a){return $.ajax({url:a,type:"GET",dataType:"json"})}function t(a){var b=a.model,c=r(b.get("waveform_url")),f=e.defer(),g=n.get(c);return f.done(function(){a.waveformData=d.pluck(arguments,"data")}),g?f.resolve({data:g,key:c}):(f.done(u),s(c).done(function(a){var b=a.samples.reduce(p(a.height),new h(a.samples.length));f.resolve({key:c,data:b})}).fail(function(){f.resolve({key:c,data:o()})}),f)}function u(a){n.set(a.key,a.data)}var d=a("_"),e=a("lib/futures"),f=a("lib/store"),g=a("lib/support"),h=g.typedArrays?Uint8Array:Array,i=(g.corsImg?"//w1.sndcdn.com/":"/_waveform/")+"90GaSwazbrh1_m.json",j="/images/player-waveform-medium.png",k=500,l=1800,m=1.5,n=new f({maxLength:k}),o,p,q=c.exports={loadWaveformDataForView:t};o=d.memoize(function(){var a=new h(l),b;for(b=0;b<l;++b)a[b]=Math.round(Math.sin(b/l*Math.PI*10)*15+105);return a}),p=d.memoize(function(a){return function(b,c,d){return b[d]=Math.round(Math.pow((a-c)/a,1/m)*a),b}})}),
define("views/comments/comment-popover",["require","exports","module","_","config","collections/comment-heads","lib/helpers/datetime-helper","lib/helpers/image-helper","lib/lingua","lib/play-manager","lib/timed-comments-states","lib/views/mixins/timed-comments","vendor/usertext/usertext","lib/view","lib/window-events","views/comments/comment-popover.tmpl","views/comments/comment-popover.css"],function(a,b,c){function r(a){var b=a?"on":"off";o[b]("resize:debounced",this.resetCachedDimensions,this),this.sound[b]("finish",s,this)}function s(){this.isInteracting()||this.goToState(k.INITIAL)}function t(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),p))}function u(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null),this.getCurrentState()!==k.ACTIVE_TIMESTAMP&&this.goToState(k.INITIAL)}function v(a){var b=this.getTimestampByMouseEvent(a),c=A.call(this,a),d=this.getCurrentState();if(d===k.ACTIVE_TIMESTAMP)return;if(d===k.CURRENT_COMMENT&&this.getCurrentComment()===c)return;this.setInteracting(!0),c&&this._hovered?this.goToState(k.CURRENT_COMMENT,c.get("timestamp"),c):this.goToState(k.CURRENT_TIMESTAMP,b)}function w(a){a.stopPropagation(),a.preventDefault();var b=Math.floor((B.call(this)||0)/1e3),c=this.sound;c.isPrivate()||(window.open(c.get("permalink_url")+"#c="+b+"&t="+c.timecode()),j.pause(c))}function x(a){var b=e.get("me"),c=g.timecode(a),d=b?h.urlFrom(b.attributes,10):h.getDefaultImage("user",10);this.toggleState("leaveCommentPlaceholder",!0),this.$$("body").text(""),this.$$("body").attr("title","").html(i.t("Leave a comment at [[timecode]]",{timecode:c})),this.$$("avatar").attr("title","").css({"background-image":"url("+d+")"}),this.setPosition(a/this.sound.duration()),this.toggleState("visible",!0)}function y(a){var b=this.getState("visible");a=a||this.getCurrentComment(),this.toggleState("leaveCommentPlaceholder",!1),a?(z.call(this,a),this.setPosition(a.get("timestamp")/this.sound.duration()),this.toggleState("visible",!0)):b&&!a&&this.toggleState("visible",!1)}function z(a){var b=a.get("user"),c=b.username,d=m(a.get("body"),{paragraphs:!1,className:"sc-truncate",links:!1}),e=i.t("Click to reply to [[username]]",{username:c}),f=h.urlFrom(b,10);this.$$("username").attr("href",b.permalink_url).attr("title",e).text(c),this.$$("body").attr("title",e).html(d),this.$$("avatar").attr("title",e).css({"background-image":f?"url("+f+")":""})}function A(a){var b=this.getTimestampByMouseEvent(a),c=Math.floor(this.options.avatarSize/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(b,c)}function B(){var a=this.stateMachine.currentComment;return a?a.get("timestamp"):this.stateMachine.currentTimestamp}var d=a("_"),e=a("config"),f=a("collections/comment-heads"),g=a("lib/helpers/datetime-helper"),h=a("lib/helpers/image-helper"),i=a("lib/lingua"),j=a("lib/play-manager"),k=a("lib/timed-comments-states"),l=a("lib/views/mixins/timed-comments"),m=a("vendor/usertext/usertext"),n=a("lib/view"),o=a("lib/window-events"),p=50,q=c.exports=n.extend(l,{className:"commentPopover",template:a("views/comments/comment-popover.tmpl"),css:a("views/comments/comment-popover.css"),defaults:{avatarSize:10,darkText:!1,flagSize:"small"},events:{click:w,mouseleave:u,mouseenter:t,"mousemove .commentPopover__scrub":v},_hovered:!1,_hoverTimeout:null,setup:function(a){this.collection=new f(null,{sound_id:a.sound_id,secret_token:this.sound.get("secret_token")}),d.bindAll(this,"onClickOutsideOfPointer"),r.call(this,!0),this.toggleState("darkText",a.darkText).toggleState("smallAvatar",a.avatarSize===10),this.$el.addClass(a.flagSize)},dispose:function(){r.call(this,!1),$("html").off("mousedown",this.onClickOutsideOfPointer)},renderDecorate:function(){var a=this.getCurrentComment();this.toggleState("visible",!!a),this.toggleState("commentLeft",!1),a&&this.setPosition(a.get("timestamp")/this.sound.duration())},setPosition:function(a){var b=this.cachedDimensions().width,c=Math.floor(a*b)-this.options.avatarSize/2,d=0,e=b-c,f=this.$$("wrapper");a>.5?(e=b-e,f.width(e),this.getState("leaveCommentPlaceholder")?d=-1*this.$$("body").outerWidth():d=-1*(this.$$("username").outerWidth()+this.$$("body").outerWidth()),this.toggleState("commentLeft",!0)):(f.width(e),this.toggleState("commentLeft",!1)),f.css({transform:"translateX("+c+"px)",marginLeft:d}),this.$$("avatar").css({left:-d})},onAdd:function(a){this.toggleState("visible",!0),y.call(this,a)},onRemove:function(){this.goToState(k.INITIAL)},onInitialState:function(){this.setInteracting(!1),y.call(this)},onCurrentCommentChange:function(){y.call(this)},onCurrentTimestamp:function(a){!this.sound.isPrivate()&&this.isInteracting()?x.call(this,a):y.call(this)},onActiveTimestamp:function(a,b){y.call(this,b),$("html").on("mousedown",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(a){!this.disposed&&this.getCurrentState()===k.ACTIVE_TIMESTAMP&&!$(a.target).closest(".commentPopover__wrapper").length&&(this.goToState(k.INITIAL),$("html").off("mousedown",this.onClickOutsideOfPointer))}})}),
define("views/waveform/nodes/background",["require","exports","module","_","lib/browser","views/waveform/nodes/has-gradient-fill","views/waveform/nodes/has-waveform-data","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-events","views/waveform/waveform-style"],function(a,b,c){function q(a){var b=a?"on":"off";this.model[b](k.SOUND_FOCUS,v,this)[b](k.SOUND_UNFOCUS,w,this)[b]("play",s,this)}function r(a){return a>0&&a<o}function s(){u.call(this),t.call(this),this.setDirty(!0)}function t(){var a=this.model.getSounds();a.forEach(function(a,b){this._playingSounds[b]=a.isPlaying()},this)}function u(){var a=this.model.getSounds();a.forEach(function(a,b){this._activeSounds[b]=!0},this)}function v(a){a&&(this._focusedSound=a,u.call(this),this.setDirty(!0))}function w(){this._focusedSound=null,u.call(this),this.setDirty(!0)}function x(a,b){var c=b?o:0;return c>a?a+1:c<a?a-1:a}function y(){if(this._pattern)return this._pattern;var a=document.createElement("canvas"),b=this.options,c=this.canvas,d=a.getContext("2d"),f=b.scale,g=c.width/f,h=c.height/f,i=b.waveformHeight,j=l.getConfig("gapWidth"),k=l.getConfig("barWidth"),m=k+j,n=b.upperPartHeight*h,o=h-n,p=this.getFillStyle(),q=j>0,r=q&&this.getFillStyle(1,"gapGradient"),s=null,t=null,u,v,w,x,y;a.width=c.width,a.height=c.height,e.isHiDPI&&f!==1&&d.scale(f,f),d.beginPath(),d.fillStyle=r;for(u=0;u<g;u+=m)x=this.getWaveformHeightAt(u),v=Math.floor(x/i*n),w=Math.floor((1-x/i)*o+n),d.rect(u,v,k,w-v),q&&u&&(y=Math.max(v,s),d.fillRect(u-j,y,j,Math.min(w,t)-y)),s=v,t=w;return d.fillStyle=p,d.fill(),this._pattern=this.context.createPattern(a,"no-repeat"),this._pattern}var d=a("_"),e=a("lib/browser"),f=a("views/waveform/nodes/has-gradient-fill"),g=a("views/waveform/nodes/has-waveform-data"),h=a("lib/scene/scene-node"),i=a("models/sound"),j=a("lib/view"),k=a("views/waveform/waveform-events"),l=a("views/waveform/waveform-style"),m,n=3,o=13,p=c.exports=j.extend(h,g,f,{ModelClass:i,defaults:{waveformStyle:"default"},gradientName:"backgroundGradient",_focusedSound:null,_pattern:null,_activeSounds:null,_playingSounds:null,_currentPlayingStep:0,_currentFocusStep:0,setup:function(){var a=this.model;this._activeSounds=[],this._playingSounds=[],u.call(this),t.call(this),a.isPlaying()&&(this._currentPlayingStep=o),q.call(this,!0)},dispose:function(){q.call(this,!1)},onResize:function(){this._pattern=null},draw:function(){var a=y.call(this),b=this.context,c=this.options.scale,d=this.canvas.width,e=this.canvas.height,f=this.model.duration(),g=d/f,h=x(this._currentPlayingStep,this.model.isPlaying()),i=x(this._currentFocusStep,!!this._focusedSound);this._currentPlayingStep=h,this._currentFocusStep=i,this.isAnimating=r(i)||r(h),b.save(),b.fillStyle=a,b.scale(1/c,1/c),this.model.getSounds().forEach(function(a,c){var d=a.duration()*g,f=this._playingSounds[c]?Math.max(h,i):this._activeSounds[c]?i:0;b.globalAlpha=m(f),b.fillRect(0,0,d,e)},this),i===0&&(this._activeSounds.length=0),h===0&&(this._playingSounds.length=0),b.restore()}});m=d.memoize(function(a){var b=Math.max(0,(a-n)/(o-n));return-Math.cos(b*Math.PI)/8+.875})}),
define("views/waveform/nodes/comments",["require","exports","module","_","collections/comment-heads","config","lib/futures","views/waveform/nodes/has-waveform-data","lib/helpers/image-helper","lib/helpers/mouse-helper","lib/scene/scene-node","lib/timed-comments-states","lib/views/mixins/timed-comments","lib/view","views/waveform/nodes/comments.css"],function(a,b,c){function u(a){this.options.$eventEl[a]("click",this.onClick)[a]("mousemove",this.onMouseMove)[a]("mouseenter",this.onMouseEnter)[a]("mouseleave",this.onMouseLeave),this.sound[a]("finish",this.onPlaybackFinish)}function v(){return!!this._avatarsDeferred&&this._avatarsDeferred.state()!=="pending"}function w(){var a=this.collection.map(x,this).filter(d.identity);return this._avatarsDeferred=this.addDeferred(g.settled(a).done(function(){this.setDirty(!0),this.toggleState("loadedAvatars",!0)}.bind(this))),this._avatarsDeferred}function x(a){var b,c,d,e,f,h,j,k,l;a.length?(c=a[0],d=a[1][0]):(c=a.get("timestamp"),d=a);if(!d||c==null||c<0)return;return b=g.defer(),f={timestamp:c,cid:d.cid},h=d.get("user"),j=!!h.avatar_t20x20,e=j?h.avatar_t20x20:h.avatar_url,k=e.indexOf("default_avatar")!==-1,this.sound.get("comment_count")<50||!k?(l={view:this,url:j||k?e:i.setFormat(e,10,!0),info:f,imgDefer:b},j?y(l):z(l)):(this._comments.unshift(f),b.resolve()),b}function y(a){var b=new Image;b.onload=C.bind(a.view,b,a.info,a.imgDefer),b.onerror=D.bind(a.view,a.info,a.imgDefer),b.src=a.url}function z(a){s.push(a),A()}function A(){var a,b,c=r.length;while(c<q&&(b=s.shift())){a=b.imgDefer;if(a.state()!=="pending")continue;c=r.push(b),y(b),a.always(B(b))}}function B(a){return function(){r.splice(r.indexOf(a),1),A()}}function C(a,b,c){this.disposed||(b.el=a,this._comments.unshift(b)),c.resolve()}function D(a,b){this._comments.unshift(a),b.resolve()}function E(a){var b=this.getTimestampByMouseEvent(a),c=Math.floor(this.options.avatarWidth/2/this.cachedDimensions().width*this.sound.duration());return this.collection.getCommentAtTimestamp(b,c)}function F(a){return a.offsetY>=this.options.upperPartHeight*this.cachedDimensions().height}var d=a("_"),e=a("collections/comment-heads"),f=a("config"),g=a("lib/futures"),h=a("views/waveform/nodes/has-waveform-data"),i=a("lib/helpers/image-helper"),j=a("lib/helpers/mouse-helper"),k=a("lib/scene/scene-node"),l=a("lib/timed-comments-states"),m=a("lib/views/mixins/timed-comments"),n=a("lib/view"),o=n.prototype,p=500,q=10,r=[],s=[],t=c.exports=n.extend(k,h,m,{css:a("views/waveform/nodes/comments.css"),className:"waveformCommentsNode",defaults:{sound_id:null,avatarWidth:10,avatarHeight:10,fullAvatarWidth:20,fullAvatarHeight:20,drawLines:!0,strokeStyle:"rgba(255,255,255,.1)",bulkFetch:f.get("maxComments")},_avatarsDeferred:null,_hovered:!1,_hoverTimeout:null,_comments:null,states:{loadedAvatars:"loaded"},setup:function(a){this.collection=new e(null,{sound_id:a.sound_id,secret_token:this.sound.get("secret_token")}),this._comments=[],d.bindAll(this,"onClick","onMouseMove","onMouseEnter","onMouseLeave","onClickOutsideOfPointer","onPlaybackFinish"),u.call(this,"on")},dispose:function(){this._comments.length=0,u.call(this,"off")},getAudible:function(){return this.sound},hasData:function(){if(o.hasData.call(this))return v.call(this)},fetchData:function(){return o.hasData.call(this,this.collection)?v.call(this)?(this.toggleState("loadedAvatars",!0),g.resolve()):w.call(this):o.fetchData.call(this,this.collection)},onResize:function(){this.resetCachedDimensions()},draw:function(){if(!this._comments.length||!v.call(this))return;var a=this.context,b=this.canvas,c=this.options,d=b.width/c.scale,e=b.height/c.scale*c.upperPartHeight,f=c.avatarHeight,g=c.avatarWidth,h=f/2,i=this.sound.get("duration");this._comments.forEach(function(b){var c=b.timestamp/i,j=Math.floor(d*c);b.el&&a.drawImage(b.el,j-h,e,f,g)},this)},onAdd:function(a){x.call(this,a).done(this.setDirty.bind(this,!0))},onRemove:function(a){var b=this._comments.some(function(b,c,d){if(b.cid===a.cid)return d.splice(c,1),!0});b&&this.setDirty(!0)},onInitialState:function(){this.setInteracting(!1)},onActiveTimestamp:function(){$("html").one("click",this.onClickOutsideOfPointer)},onClickOutsideOfPointer:function(){!this.disposed&&this.getCurrentState()===l.ACTIVE_TIMESTAMP&&this.goToState(l.INITIAL)},onClick:function(a){a=j.normalizeEvent(a);if(!F.call(this,a))return;a.stopPropagation();var b=E.call(this,a),c=b?b.get("timestamp"):this.getTimestampByMouseEvent(a);this.goToState(l.ACTIVE_TIMESTAMP,c,b)},onMouseMove:function(a){var b=this.getTimestampByMouseEvent(a),c=E.call(this,a),d=this.getCurrentState();a=j.normalizeEvent(a);if(!F.call(this,a)){d===l.CURRENT_COMMENT&&this.goToState(l.INITIAL);return}if(d===l.ACTIVE_TIMESTAMP)return;if(d===l.CURRENT_COMMENT&&this.getCurrentComment()===c)return;c&&this._hovered?(this.setInteracting(!0),this.goToState(l.CURRENT_COMMENT,c.get("timestamp"),c)):this.goToState(l.CURRENT_TIMESTAMP,b)},onMouseEnter:function(){this._hovered||(this._hoverTimeout=setTimeout(function(){this._hovered=!0,this._hoverTimeout=null}.bind(this),p))},onMouseLeave:function(){this._hoverTimeout&&(clearTimeout(this._hoverTimeout),this._hoverTimeout=null)},onPlaybackFinish:function(){this.isInteracting()||this.goToState(l.INITIAL)}})}),
define("views/waveform/nodes/interaction",["require","exports","module","_","config","lib/helpers/mouse-helper","lib/play-manager","lib/scene/scene-node","models/sound","lib/support","lib/view","views/waveform/waveform-events"],function(a,b,c){function v(a){this.options.$eventEl[a](p,this.onPointerLeave)[a](q,this.onPointerEnter)[a](s,this.onPointerMove)[a](t,this.onPointerUp)[a](r,this.onPointerDown)}function w(a){return a.offsetY<this.options.upperPartHeight*(this.canvas.height/this.options.scale)}var d=a("_"),e=a("config"),f=a("lib/helpers/mouse-helper"),g=a("lib/play-manager"),h=a("lib/scene/scene-node"),i=a("models/sound"),j=a("lib/support"),k=a("lib/view"),l=a("views/waveform/waveform-events"),m=$(window),n=e.get("appView").$el,o=function(){return!1},p="mouseleave",q="mouseenter",r=j.touch?"touchstart":"mousedown",s=j.touch?"touchmove":"mousemove",t=j.touch?"touchend":"mouseup",u=c.exports=k.extend(h,{ModelClass:i,requiredAttributes:["duration"],defaults:{upperPartHeight:.7},states:{scrubbing:function(a){document.onselectstart=a?o:null,n.toggleClass("sc-selection-disabled",a)},clickToPlay:function(a){this.$el.css({cursor:a?"pointer":""})}},_cachedOffset:null,_focusedSound:null,draw:$.noop,setup:function(){d.bindAll(this,"onPointerLeave","onPointerEnter","onPointerDown","onPointerMove","onPointerUp"),v.call(this,"on")},dispose:function(){v.call(this,"off")},seek:function(a){this.model.seek(a)},onResize:function(){this._cachedOffset=null},onPointerDown:function(a){a=f.normalizeEvent(a),this.toggleState("scrubbing",!0),m.on(t,this.onPointerUp),w.call(this,a)&&(this.model.isPlaying()?this.seek(this.getSeekPosition(a.originalEvent.pageX)):g.toggle(this.model,{userAction:!0}))},onPointerUp:function(a){a=f.normalizeEvent(a),m.off(t,this.onPointerUp),this.toggleState("scrubbing",!1)},onPointerMove:function(a){j.touch&&a.preventDefault(),a=f.normalizeEvent(a);var b=this.getSeekPosition(a.originalEvent.pageX),c;w.call(this,a)?(c=this.model.getSoundAt(b),this._focusedSound!==c?(this._focusedSound=c,this.model.trigger(l.SOUND_FOCUS,c)):c.isPlaying()&&this.getState("scrubbing")&&this.seek(b),this.model.isPlaying()&&this.toggleState("clickToPlay",this.model.getCurrentSound()!==c)):this._focusedSound&&(this._focusedSound=null,this.model.trigger(l.SOUND_UNFOCUS,this._focusedSound))},onPointerEnter:function(a){a=f.normalizeEvent(a);var b=this.model.getSoundAt(this.getSeekPosition(a.originalEvent.pageX));b&&b.isPaused()&&w.call(this,a)&&(this._focusedSound=b,this.model.trigger(l.SOUND_FOCUS,b))},onPointerLeave:function(){var a=this._focusedSound;a&&(this._focusedSound=null,this.model.trigger(l.SOUND_UNFOCUS,a))},getCachedOffset:function(){if(!this._cachedOffset){var a=this.$el,b=a.offset(),c=Math.floor;this._cachedOffset={left:c(b.left),top:c(b.top),right:c(b.left+a.width()),bottom:c(b.top+a.height())}}return this._cachedOffset},getSeekPosition:function(a){var b=(a-this.getCachedOffset().left)/this.canvas.width*this.options.scale,c=b*this.model.duration(),d=this.model.getSoundAt(c);return this.model.getCurrentSound()===d?c:d.timeOffset}})}),
define("views/waveform/nodes/progress",["require","exports","module","views/waveform/nodes/follows-progress","views/waveform/nodes/has-gradient-fill","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-style"],function(a,b,c){function k(a){var b=a?"on":"off";this.model[b]("play pause seeked",l,this)}function l(){this.setDirty(!0)}var d=a("views/waveform/nodes/follows-progress"),e=a("views/waveform/nodes/has-gradient-fill"),f=a("lib/scene/scene-node"),g=a("models/sound"),h=a("lib/view"),i=a("views/waveform/waveform-style"),j=c.exports=h.extend(f,d,e,{ModelClass:g,requiredAttributes:["duration"],defaults:{waveformStyle:"default"},gradientName:"progressGradient",setup:function(){k.call(this,!0)},dispose:function(){k.call(this,!1)},draw:function(){var a=this.context,b=this.canvas,c=this.options,d=i.getConfig("barWidth")+i.getConfig("gapWidth"),e=i.getConfig("fadeInSteps"),f=this.lastPosition=Math.ceil(this.model.progress()*(b.width/c.scale)*e)/e,g=Math.floor(f/d),h=f%d;a.save(),a.globalCompositeOperation="source-atop",a.fillStyle=this.getFillStyle(),a.fillRect(0,0,g*d,this.canvas.height),h&&(a.fillStyle=this.getFillStyle(h/d),a.fillRect(g*d,0,d,this.canvas.height)),a.restore()}})}),
define("views/waveform/nodes/scrubber",["require","exports","module","_","views/waveform/nodes/has-gradient-fill","lib/helpers/mouse-helper","lib/scene/scene-node","models/sound","lib/view","views/waveform/waveform-events","views/waveform/waveform-style"],function(a,b,c){function p(a){var b=this.context,c=this.canvas,d=this.options,e=d.scale,f=this._mouseX||0,g=this._focusedSound||this._lastFocusedSound,h,i,j;i=k.getConfig("barWidth")+k.getConfig("gapWidth"),h=this.model.progress()*(c.width/e),j=g===this.model.getCurrentSound()?f:g.timeOffset/this.model.duration()*(c.width/e),h=Math[h<j?"floor":"ceil"](h/i)*i,b.save(),b.globalCompositeOperation="source-atop",b.fillStyle=this.getFillStyle(a,h<j?"scrubberGradientForward":this.gradientName),b.fillRect(Math.min(h,j),0,Math.abs(h-j),c.height),b.restore()}function q(a){this.options.$eventEl[a]("mouseenter",this.onMouseEnter)[a]("mouseleave",this.onMouseLeave)[a]("mousemove",this.onMouseMove),this.model[a](j.SOUND_FOCUS,t,this)[a](j.SOUND_UNFOCUS,u,this)}function r(a){return a.offsetY<this.canvas.height/this.options.scale*this.options.upperPartHeight}function s(){var a=this._targetStep,b=this._currentStep;return a>b?b+1:a<b?b-1:b}function t(a){a&&(this._focusedSound=a,this.fadeIn())}function u(){this._lastFocusedSound=this._focusedSound,this._focusedSound=null,this.fadeOut()}var d=a("_"),e=a("views/waveform/nodes/has-gradient-fill"),f=a("lib/helpers/mouse-helper"),g=a("lib/scene/scene-node"),h=a("models/sound"),i=a("lib/view"),j=a("views/waveform/waveform-events"),k=a("views/waveform/waveform-style"),l,m=3,n=13,o=c.exports=i.extend(g,e,{ModelClass:h,gradientName:"scrubberGradientBackward",_lastMouseX:null,_mouseX:null,_currentStep:0,_focusedSound:null,_lastFocusedSound:null,_targetStep:0,_isHovering:!1,setup:function(){d.bindAll(this,"onMouseEnter","onMouseLeave","onMouseMove","fadeIn","fadeOut"),q.call(this,"on")},dispose:function(){q.call(this,"off"),clearTimeout(this._delayTimeout)},onResize:function(){this._mouseX=this._lastMouseX=null},onMouseEnter:function(){this._isHovering=!0},onMouseLeave:function(){this._isHovering=!1},onMouseMove:function(a){a=f.normalizeEvent(a),r.call(this,a)&&(this._lastMouseX=this._mouseX,this._mouseX=a.offsetX),this._lastMouseX!==this._mouseX&&this.setDirty(!0)},fadeIn:function(){this._targetStep=n,this.setDirty(!0)},fadeOut:function(){this._targetStep=0,this.setDirty(!0)},draw:function(){var a=s.call(this),b=l(a),c=this.model.isPlaying(),d=this.model.getCurrentSound();this.isAnimating=a!==this._currentStep,this._currentStep=a;if(!c&&this._focusedSound===d||c&&this._focusedSound===d&&!this._isHovering||!c&&!this._focusedSound&&this._lastFocusedSound===d||b===0)return;p.call(this,b)}});l=d.memoize(function(a){var b=Math.max(0,(a-m)/(n-m));return-Math.cos(b*Math.PI)/2+.5})}),
define("views/waveform/nodes/time-indicator",["require","exports","module","models/audible","lib/helpers/datetime-helper","views/waveform/nodes/follows-progress","lib/scene/scene-node","lib/view","views/waveform/waveform-style"],function(a,b,c){function l(a){var b=a?"on":"off";this.model[b]("play",n,this)[b]("change:duration",o,this)}function m(a,b,c,d){var e=this.context,f=e.lineTo.bind(e),g=e.quadraticCurveTo.bind(e),h=j.topRight,i=j.topLeft,k=a+c,l=b+d;e.beginPath(),e.moveTo(a+i,b),f(k-h,b),g(k,b,k,b+h),f(k,l),f(a,l),f(a,b+i),g(a,b,a+i,b),e.closePath()}function n(){this.setDirty(!0)}function o(){this._duration=null}var d=a("models/audible"),e=a("lib/helpers/datetime-helper"),f=a("views/waveform/nodes/follows-progress"),g=a("lib/scene/scene-node"),h=a("lib/view"),i=a("views/waveform/waveform-style"),j={topLeft:2,topRight:2},k=c.exports=h.extend(g,f,{ModelClass:d,_lastSecs:null,_duration:null,defaults:{upperPartHeight:.7,waveformStyle:"default"},requiredAttributes:["duration"],setup:function(){l.call(this,!0),this.setFont()},dispose:function(){l.call(this,!1)},onResize:function(){this.setFont()},setFont:function(){this.context.font='10px "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Garuda, Verdana, Tahoma, sans-serif',this.setDirty(!0)},shouldBeDirty:function(){return this.hasPositionChanged()||this._lastSecs!==Math.floor(this.model.currentTime()/1e3)},getDuration:function(a){if(!this._duration){var b=e.timecode(this.model.duration());this._duration={text:b,width:this.context.measureText(b).width}}return this._duration[a]},draw:function(){var a=this.el,b=this.context,c=this.options,d=this.model,f=c.waveformStyle,g=d.currentTime(),h=2,j=12,k=e.timecode(g),l=this.getDuration("text"),n=b.measureText(k).width,o=this.getDuration("width"),p=o+h*2,q=n+h*2,r=a.width/c.scale,s=this.lastPosition=0,t=c.upperPartHeight*(a.height/c.scale),u=t-j-h;m.call(this,r-p,u,p,j+h),b.fillStyle=i.getColor("durationIndicatorBg",f),b.fill();if(g>0||d.isPlaying())m.call(this,Math.min(s,r-p-q),u,n+h*2,j+h),b.fill(),b.fillStyle=i.getColor("progressIndicatorColor",f),b.fillText(k,Math.min(s+h,r-p-q+h),Math.floor(t-h*2)+.5);b.fillStyle=i.getColor("durationIndicatorColor",f),b.fillText(l,Math.floor(r-p+h)+.5,Math.floor(t-h*2)+.5),this._lastSecs=Math.floor(g/1e3)}})}),
define("views/waveform/waveform.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=' <div style="height:',e=a.upperPartHeightPercent,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"upperPartHeightPercent",{hash:{}})),d+=o(e)+';" class="waveform__emptyWaveform sc-font sc-type-light"> <span class="waveform__emptyMessage"> ',e=a.emptySet,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" ",e=a.isProcessing,f=c["if"],j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" </span> </div>\n",d}function q(a,b){return"This playlist has no tracks yet"}function r(a,b){var c="",d;return c+="This ",d=a.type,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"type",{hash:{}})),c+=o(d)+" is being processed",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="waveform__layer waveform__scene"></div>\n',g=b.emptyWaveform,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/waveform/waveform.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveform{position:relative;width:100%;height:100%;opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.waveform:not(.playing) .waveform__scene:hover{cursor:pointer}.waveform.loaded{opacity:1}.waveform__layer,.waveform__layer .sceneLayer{position:absolute;top:0;left:0;width:100%;height:100%}.waveform__empty .waveform__scene{opacity:.4}.waveform__emptyWaveform{position:relative}.waveform__emptyMessage{position:absolute;text-align:center;width:100%;bottom:5px;color:#000;font-size:11px;text-shadow:1px 1px 1px #fff}.waveform__emptyMessage{font-size:16px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("config/waveform-styles",["require","exports","module","vendor/color/color","config"],function(a,b,c){function p(a,b){return b===1?"rgb("+a+")":"rgba("+a+","+b+")"}var d=a("vendor/color/color"),e=a("config"),f="0,0,0",g="51,51,51",h="102,102,102",i="153,153,153",j="255,0,0",k="255,51,0",l="255,85,0",m="255,101,0",n="255,255,255",o="82,82,82";c.exports={_config:{barWidth:2,gapWidth:1,fadeInSteps:10,fixedTimeIndicator:!0,commentLines:!1,fullHighlight:!0},"default":{progressGradient:[[0,l],[.7,k],[.701,l],[1,l]],loaderGradient:[[0,f,.5],[1,f,.5]],backgroundGradient:[[0,g],[.7,g],[.701,g,.5],[1,g,.5]],gapGradient:[[0,h,0],[.28,o,.6],[.7,g],[.701,g,.25],[1,g,.25]],scrubberGradientBackward:[[0,g,.5],[.7,g,.5],[.701,g,0],[1,g,0]],scrubberGradientForward:[[0,l,.5],[.7,k,.5],[.701,l,0],[1,l,0]],highlightGradientPlayed:[[0,l],[.7,k],[.701,l],[1,l]],highlightGradientUnplayed:[[0,f,.5],[1,f,.5]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)},inverted:{progressGradient:[[0,l],[.7,k],[.701,l],[1,l]],loaderGradient:[[0,n],[1,n]],backgroundGradient:[[0,n],[.7,n],[.701,n,.4],[1,n,.4]],gapGradient:[[0,n,0],[.28,n,.3],[.7,n,.5],[.701,n,.125],[1,n,.125]],scrubberGradientBackward:[[0,n,.5],[.7,n,.5],[.701,n,0],[1,n,0]],scrubberGradientForward:[[0,l,.5],[.7,k,.5],[.701,l,0],[1,l,0]],highlightGradientPlayed:[[0,l],[.7,k],[.701,l],[1,l]],highlightGradientUnplayed:[[0,n],[1,n]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)},custom:function(){var a=d(e.get("widgetParams").color).toRgb(),b=[a.r,a.g,a.b].join(","),c=b==="255,85,0"?"255,51,0":b;return{progressGradient:[[0,b],[.7,c],[.701,b],[1,b]],loaderGradient:[[0,f,.5],[1,f,.5]],backgroundGradient:[[0,g],[.7,g],[.701,g,.5],[1,g,.5]],gapGradient:[[0,h,0],[.28,o,.6],[.7,g],[.701,g,.25],[1,g,.25]],scrubberGradientBackward:[[0,g,.5],[.7,g,.5],[.701,g,0],[1,g,0]],scrubberGradientForward:[[0,b,.5],[.7,c,.5],[.701,b,0],[1,b,0]],highlightGradientPlayed:[[0,b],[.7,c],[.701,b],[1,b]],highlightGradientUnplayed:[[0,f,.5],[1,f,.5]],progressIndicatorBg:p(f,.8),progressIndicatorColor:p(m,1),durationIndicatorBg:p(f,.8),durationIndicatorColor:p(i,1),dividerColorPrevious:p(j,1),dividerColorUpcoming:p(i,1)}}}}),
define("views/sound/visuals",["require","exports","module","_","lib/math","lib/views/mixins/multi-resource-type","lib/view","views/sound/visuals.css","views/sound/visuals.tmpl"],function(a,b,c){function i(a){this.model[a]("seeked",j,this)[a]("time",j,this)}function j(){if(this.disposed)return;var a=this.model.currentTime(),b=d.values(this.model.get("visuals")),c=e.clamp(d.sortedIndex(b,{entry_time:a},"entry_time")-1,0,b.length-1),f=b[c];if(c===this.__index)return;this.__index=c,this.$$("backgroundLayer").css("background-image","url("+f.visual_url+")"),this.$$("item").removeClass("visible").filter('[data-timestamp="'+f.entry_time+'"]').addClass("visible")}var d=a("_"),e=a("lib/math"),f=a("lib/views/mixins/multi-resource-type"),g=a("lib/view"),h=c.exports=g.extend(f,{className:"visuals",css:a("views/sound/visuals.css"),template:a("views/sound/visuals.tmpl"),requiredAttributes:["visuals"],__index:null,setup:function(){i.call(this,"on")},dispose:function(){i.call(this,"off")},getTemplateData:function(a){return a.visuals=d.map(a.visuals,function(a){return{id:a.id,background_url:a.visual_url.replace(/[()]/g,window.escape),timestamp:a.entry_time}}),a},renderDecorate:function(){j.call(this)}})}),
define("lib/views/image",["require","exports","module","_","lib/helpers/image-helper","lib/views/mixins/multi-resource-type","lib/view","lib/views/image.tmpl","lib/views/image.css"],function(a,b,c){function h(a){return e.urlFrom(a.model.attributes,a.options.size)}var d=a("_"),e=a("lib/helpers/image-helper"),f=a("lib/views/mixins/multi-resource-type"),g=a("lib/view");c.exports=g.extend(f,{template:a("lib/views/image.tmpl"),css:a("lib/views/image.css"),className:"image",defaults:{alt:"",size:50,stretch:!1},setup:function(){var a=this.model,b=this.model;!!b.imageAttribute,this.requiredAttributes=["kind",b.imageAttribute],this.toggleState("fadeIn",!0),this.$el.addClass(["sc-artwork",e.getPlaceholderClass(this.model.id),a.stretch?"image-full":""].join(" "))},renderDecorate:function(){var a=h(this);a&&!e.isDefaultImage(a)?this.addDeferred(e.load(a).done(function(){this.toggleState("fadeIn",!1),e.flagCachedImage(a)}.bind(this))):this.toggleState("fadeIn",!1)},getTemplateData:function(a){return d.extend(a,{size:this.options.size,placeholderUrl:e.getPlaceholderUrl(h(this),this.options.size)})}})}),
define("views/sound/header",["require","exports","module","_","lib/animation","config","lib/views/mixins/has-ad-state","lib/views/mixins/multi-resource-type","lib/play-manager","lib/views/mixins/responsive","views/ads/skip","lib/view","views/sound/header.css","views/sound/header.tmpl"],function(a,b,c){function o(a){var b=a?"on":"off",c=this.isPlaylist?i:this.model;c[b]("play",p,this)}function p(){var a=this.subviews.likeButton,b=this.getState("likeVisible");a&&!b&&(this.model.isPlaying()?(this.$$("buttons").prepend(a.$el),this.toggleState("likeVisible")):a.$el.detach())}var d=a("_"),e=a("lib/animation"),f=a("config"),g=a("lib/views/mixins/has-ad-state"),h=a("lib/views/mixins/multi-resource-type"),i=a("lib/play-manager"),j=a("lib/views/mixins/responsive"),k=a("views/ads/skip"),l=a("lib/view"),m=f.get("widgetParams"),n=c.exports=l.extend(j,h,g,{css:a("views/sound/header.css"),className:"soundHeader sc-media",template:a("views/sound/header.tmpl"),requiredAttributes:{sound:["sharing"],playlist:["sharing"]},defaults:{show_like_button:!0,show_share_button:!0,show_buy_button:!0,show_download_button:!0,show_button_overlay:!1,visual:!1},setup:function(){this.toggleState("visual",this.options.visual),o.call(this,!0)},dispose:function(){o.call(this,!1)},renderDecorate:function(){p.call(this)},getTemplateData:function(){var a=this.options;return a=d.defaults({show_share_button:a.show_share_button&&m.sharing&&this.isShareable(),show_like_button:a.show_like_button&&$.support.cors&&m.liking&&this.isLikeable(),show_buy_button:a.show_buy_button&&m.buying&&this.isBuyable(),show_download_button:a.show_download_button&&m.download&&this.isDownloadable()},a),a},onAdStart:function(a){var b=this.$$("skipAdContainer"),c=this.subviews.skipButton;c||(c=this.addSubview(new k({resource_id:a.id,resource_type:"sound",visual:this.options.visual,iconColor:this.options.visual?"#FFFFFF":"#000000"}),"skipButton")),c.render(),b.append(c.el),e.fadeIn(b)},onAdFinish:function(){var a=this.subviews.skipButton;a.$el.detach(),this.removeSubview("skipButton"),a.teardown()}})}),
define("views/sound/sounds-total",["require","exports","module","config","config/resources","lib/views/mixins/multi-resource-type","lib/view","views/sound/sounds-total.css","views/sound/sounds-total.tmpl"],function(a,b,c){function i(a){var b=null;switch(a){case e.USER_SOUNDS:b=d.get("widgetParams").show_reposts?null:"track_count";break;case e.GROUP_SOUNDS:case e.PLAYLIST:b="track_count";break;case e.USER_FAVORITES:b="public_favorites_count"}return b}var d=a("config"),e=a("config/resources"),f=a("lib/views/mixins/multi-resource-type"),g=a("lib/view"),h=c.exports=g.extend(f,{css:a("views/sound/sounds-total.css"),template:a("views/sound/sounds-total.tmpl"),className:"soundsTotal sc-font sc-pointer",trackCountProperty:null,setup:function(a){this.trackCountProperty=i(a.resource_type),this.trackCountProperty&&(this.requiredAttributes=[this.trackCountProperty])},renderDecorate:function(){this.toggleState("hidden",!(this.trackCountProperty&&this.model.get(this.trackCountProperty)>0))},getTemplateData:function(){return{track_count:this.model.get(this.trackCountProperty)}}})}),
define("views/sound/seekable-thin-bar",["require","exports","module","views/sound/thin-progress-bar","lib/views/mixins/seekable"],function(a,b,c){var d=a("views/sound/thin-progress-bar"),e=a("lib/views/mixins/seekable"),f=c.exports=d.extend(e)}),
define("views/ads/ad-container.tmpl",["vendor/handlebars-runtime","views/ads/ad","views/sound/thin-progress-bar"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="adContainer__banner"> <b class="adContainer__title">',g="Advertisement",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+"</b> ",g="views/ads/ad",h={},i=b.companion_display,h.companion_display=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' <a href="http://help.soundcloud.com/customer/portal/articles/1656210" class="adContainer__why right">',g="Why Ads?",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+"</a>\n</div>\n",g="views/sound/thin-progress-bar",h={},i=b.sound,i=i===null||i===undefined||i===!1?i:i.id,h.resource_id=i,i="sound",h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n",f})}),
define("views/ads/ad-container.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".adContainer__banner{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transition:margin .25s;transition:margin .25s;height:250px;width:300px}.adContainer.tight .adContainer__banner{margin-top:25px}.adContainer__title,a.adContainer__why{color:#fff;font-size:12px;margin:0 0 2px}.adContainer .thinProgressbar{position:fixed;bottom:0;left:0;right:0}.adContainer .thinProgressbar>.thinProgressbar__played{-webkit-transition:width 1s;transition:width 1s}.adContainer__skip{position:absolute;top:34px;right:11px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/offer-related-play-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<svg xmlns="http://www.w3.org/2000/svg"> <circle fill-opacity="0.2" fill="#000" stroke="#fff" stroke-width="1.5" cx="23" cy="23" r="22"/> <path class="playButton__play" fill="#fff" d="M18,33.6 L21.3,22.9 L18,12.1 L32.6,22.9 L18,33.59 z"/>\n</svg>\n'})}),
define("views/sound/title",["require","exports","module","_","config","config/resources","lib/event-bus","lib/lingua","lib/views/mixins/multi-resource-type","tracking-events","lib/view","lib/window-events","views/sound/title.tmpl","views/sound/title.css"],function(a,b,c){function n(){return this.options.visual&&this.isSound&&this.model.isExplicit()}function o(a){var b=a?"on":"off";l[b]("resize:x:debounced",p,this)}function p(){q.call(this)}function q(){if(!n.call(this))return;var a=15,b=this.$el.width()-this.$$("explicit").width()-a;this.$$("h2Text")[0].style.maxWidth=b+"px"}function r(a){return function(b){b.currentTarget.tagName.toLowerCase()==="span"?b.preventDefault():a.call(this,b)}}function s(){g.trigger(j.UI.TITLE_LINK_CLICKED,this.model)}function t(){g.trigger(j.UI.CREATOR_LINK_CLICKED,this.model),this.isSound&&g.trigger("sound:deeplink",this.$$("h2")[0],this.model)}function u(){var a,b,c,d,e=this.options.resource_type,g=this.model;switch(e){case f.SOUND:case f.PLAYLIST:a=g.get("user").username,c=g.get("user").permalink_url,b=g.get("title"),d=this.getShareURL();break;case f.USER_SOUNDS:case f.USER_FAVORITES:case f.USER_SPOTLIGHT:a=g.get("username"),c=g.get("permalink_url");switch(e){case f.USER_FAVORITES:b=h.t("Favorite tracks");break;case f.USER_SPOTLIGHT:b=h.t("Featured tracks");break;default:b=h.t("Latest tracks")}d=this.getShareURL();break;case f.GROUP_SOUNDS:a=g.get("name"),c=g.get("permalink_url"),b=g.get("short_description")}return{h1Text:a,h1Link:c,h2Text:b,h2Link:d}}var d=a("_"),e=a("config"),f=a("config/resources"),g=a("lib/event-bus"),h=a("lib/lingua"),i=a("lib/views/mixins/multi-resource-type"),j=a("tracking-events"),k=a("lib/view"),l=a("lib/window-events"),m=c.exports=k.extend(i,{template:a("views/sound/title.tmpl"),css:a("views/sound/title.css"),className:"title sc-truncate",defaults:{visual:!1,show_link:!0,inline:!1,inverse:!1},events:{"click .title__h1":r(s),"click .title__h2":r(t)},requiredAttributes:{user:["permalink_url","username"],track:["permalink_url","title","user"],playlist:["permalink_url","title","user"],group:["name","short_description"]},setup:function(){o.call(this,!0)},dispose:function(){o.call(this,!1)},renderDecorate:function(){this.whenInserted().done(q.bind(this))},getTemplateData:function(){var a=u.call(this),b=e.get("widgetParams"),c=this.isSound?b.show_user:!0,f=this.options,g=f.show_link&&!this.isPrivate()&&a.h2Link;return d.extend(a,{resource_id:this.model.resource_id,visual:f.visual,inline:f.inline,showH1:c,inverse:f.inverse,showExplicit:n.call(this),h1TagName:f.show_link?"a":"span",h2TagName:g?"a":"span",showH2Link:g,inlineTitle:(c?a.h1Text+" &ndash; ":"")+a.h2Text})}})}),
define("views/sound/artwork",["require","exports","module","_","models/audible","lib/event-bus","tracking-events","lib/view","views/sound/artwork.tmpl","views/sound/artwork.css"],function(a,b,c){function j(){var a=this.model;f.trigger(g.UI.ARTWORK_CLICKED,a),f.trigger("sound:deeplink",this.$$("link")[0],a)}var d=a("_"),e=a("models/audible"),f=a("lib/event-bus"),g=a("tracking-events"),h=a("lib/view"),i=c.exports=h.extend({template:a("views/sound/artwork.tmpl"),css:a("views/sound/artwork.css"),ModelClass:e,className:"artwork",events:{"click .artwork__link":j},defaults:{show_follow_button:!1,size:200,is_link:!0},getTemplateData:function(a){return d.extend(a,{isLink:this.options.is_link&&!this.model.isPrivate()})}})}),
define("lib/views/canvas-view",["require","exports","module","lib/browser","lib/view","lib/window-events"],function(a,b,c){function i(){var a=this.$el.width(),b=this.$el.height();this.initCanvasDimensions(a,b),this.onCanvasResize()}var d=a("lib/browser"),e=a("lib/view"),f=a("lib/window-events"),g=window.devicePixelRatio?(Math.floor(window.devicePixelRatio)||1)/d.backingStoreRatio:1,h=c.exports=e.extend({tagName:"canvas",className:"g-box-full waveform__layer",attributes:{"aria-hidden":"true"},context:null,scale:null,template:function(){return""},onCanvasResize:$.noop,_setup:function(){this.context=this.el.getContext("2d"),this.scale=g,f.on("resize:x:debounced",i,this),e.prototype._setup.apply(this,arguments)},_dispose:function(){if(this.disposed)return;f.off("resize:x:debounced",i,this),e.prototype._dispose.apply(this,arguments)},renderDecorate:function(){this.whenInserted().done(this.initCanvasDimensions.bind(this))},initCanvasDimensions:function(a,b){var c=this.context,e=c.canvas,f=this.scale;e.width=(a||this.el.offsetWidth)*f,e.height=(b||this.el.offsetHeight)*f,d.isHiDPI&&f!==1&&c.scale(f,f)}})}),
define("collections/comment-heads",["require","exports","module","models/comment","lib/collection","models/sound","lib/url","lib/mixins/throws-not-found"],function(a,b,c){var d=a("models/comment"),e=a("lib/collection"),f=a("models/sound"),g=a("lib/url"),h=a("lib/mixins/throws-not-found"),i=c.exports=e.extend(h.withOptions("__COMMENTS_ARE_DOWN__"),{model:d,soundDuration:null,defaults:{sound_id:null,secret_token:null,limit:100},baseUrl:function(){return g.stringify({path:["app","widget","tracks",this.options.sound_id,"comments"],query:{filter_replies:1,embed_avatars:0}})},setup:function(){var a=new f({id:this.options.sound_id});a.get("comment_count")===0&&(this.lastFetchTime=Date.now()),this.options.secret_token=a.get("secret_token"),this.soundDuration=a.duration(),a.release()},comparator:function(a,b){return new Date(a.attributes.timestamp)-new Date(b.attributes.timestamp)},getCommentAtTimestamp:function(a,b){return b=b||0,this.find(function(c){var e=c.get("timestamp");return b===0?e===a:Math.abs(a-e)<=b&&e!==d.EMPTY_TIMESTAMP})}},{hashFn:function(a,b){return b&&b.sound_id||null}})}),
define("lib/timed-comments-states",["require","exports","module"],function(a,b,c){c.exports={INITIAL:"timed-comment-sm:initial",CURRENT_COMMENT:"timed-comment-sm:current-comment",CURRENT_TIMESTAMP:"timed-comment-sm:current-timestamp",ACTIVE_TIMESTAMP:"timed-comment-sm:active-timestamp"}}),
define("lib/views/mixins/timed-comments",["require","exports","module","_","lib/mixin","models/sound","lib/timed-comments-state-machine","lib/timed-comments-states"],function(a,b,c){var d=a("_"),e=a("lib/mixin"),f=a("models/sound"),g=a("lib/timed-comments-state-machine"),h=a("lib/timed-comments-states"),i=$.noop,j=c.exports=new e({stateMachine:null,_stateHandlers:null,before:{setup:function(){this._stateHandlers={},this.sound=new f({id:this.options.sound_id,resource_id:this.options.resource_id})}},after:{setup:function(){var a=this.sound.get("secret_token");this.stateMachine=new g(this.options.sound_id,this.options.resource_id,a),this.onState(h.INITIAL,this.onInitialState).onState(h.CURRENT_COMMENT,this.onCurrentCommentChange).onState(h.ACTIVE_TIMESTAMP,this.onActiveTimestamp).onState(h.CURRENT_TIMESTAMP,this.onCurrentTimestamp)},dispose:function(){var a=this.stateMachine,b=this;this.sound.release(),this.sound=null,d.each(this._stateHandlers,function(c,d){c.forEach(function(c){a.off(d,c,b)})}),this._stateHandlers=null,a&&a.release()}},getCurrentComment:function(){return this.stateMachine.currentComment},getCurrentCommentTimestamp:function(){var a=this.getCurrentComment();return a&&a.get("timestamp")},cachedDimensions:function(){return this._cachedDimensions||(this._cachedDimensions=this.$el.offset(),this._cachedDimensions.width=this.$el.width(),this._cachedDimensions.height=this.$el.height()),this._cachedDimensions},resetCachedDimensions:function(){this._cachedDimensions=null},getTimestampByMouseEvent:function(a){return Math.floor((a.clientX-this.cachedDimensions().left)/this.cachedDimensions().width*this.sound.duration())},getCurrentState:function(){return this.stateMachine.currentState},goToState:function(){var a=this.stateMachine;a.goToState.apply(a,arguments)},setInteracting:function(a){this.stateMachine.interactingWithComments=a},isInteracting:function(){return this.stateMachine.interactingWithComments},onState:function(a,b){return this._stateHandlers[a]=this._stateHandlers[a]||[],this.stateMachine.on(a,b,this),this._stateHandlers[a].push(b),this},isActiveTimestampState:function(){return!!this.stateMachine.activeTimestamp&&this.getCurrentState()===h.ACTIVE_TIMESTAMP},defaults:{onInitialState:i,onActiveTimestamp:i,onCurrentTimestamp:i,onCurrentCommentChange:i}})}),
define("views/comments/comment-popover.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="commentPopover__scrub"></div>\n<div class="commentPopover__wrapper g-opacity-transition"> <div class="commentPopover__avatar" style="width: ',g=b._options,g=g===null||g===undefined||g===!1?g:g.avatarSize,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.avatarSize",{hash:{}})),f+=m(g)+"px; height: ",g=b._options,g=g===null||g===undefined||g===!1?g:g.avatarSize,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.avatarSize",{hash:{}})),f+=m(g)+'px;"></div> <a class="commentPopover__username sc-truncate" href=""></a> <p class="commentPopover__body sc-truncate sc-pointer"></p>\n</div>\n',f})}),
define("views/comments/comment-popover.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".commentPopover{position:absolute;width:100%;top:70%;height:20px;opacity:0;-webkit-transition:opacity 250ms;transition:opacity 250ms;z-index:9}.commentPopover.leaveCommentPlaceholder .commentPopover__avatar{pointer-events:none}.commentPopover.leaveCommentPlaceholder .commentPopover__username{display:none}.commentPopover.visible{opacity:1}.commentPopover__scrub{height:100%;cursor:pointer}.commentPopover__wrapper{width:50%;-webkit-transition:-webkit-transform 50ms;transition:transform 50ms}.commentPopover:hover .commentPopover__wrapper{-webkit-transition:-webkit-transform 0;transition:transform 0}.commentPopover__username,.commentPopover__body{-webkit-transition:padding-top 250ms;transition:padding-top 250ms;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block}.commentPopover__username{position:relative;float:left;max-width:30%;padding-left:10px}.commentPopover.commentLeft .commentPopover__username{float:none;padding-left:0;padding-right:10px}.commentPopover__username,a.commentPopover__username:hover,a.commentPopover__username:visited{color:#f50}.commentPopover__username:before{content:'';position:absolute;top:0;bottom:0;left:0;width:1px;display:block;background-image:-webkit-linear-gradient(rgba(255,85,0,.95),rgba(255,85,0,.1));background-image:linear-gradient(rgba(255,85,0,.95),rgba(255,85,0,.1))}.commentPopover.commentLeft .commentPopover__username:before{right:0;left:auto}.commentPopover__body{margin:0;padding-left:10px;color:#fff;max-width:70%}.commentPopover.leaveCommentPlaceholder.commentLeft .commentPopover__body{position:absolute;left:20px}.commentPopover.leaveCommentPlaceholder.commentLeft.smallAvatar .commentPopover__body{left:10px}.commentPopover.commentLeft .commentPopover__body{float:left;padding-left:0;padding-right:10px}.commentPopover__avatar{position:absolute;top:-20px;background-size:cover;display:none}.commentPopover.visible .commentPopover__avatar{display:block;cursor:pointer}.commentPopover.smallAvatar{height:10px}.commentPopover.smallAvatar .commentPopover__avatar{top:-10px}.commentPopover.darkText .commentPopover__body{color:#333}.commentPopover.small .commentPopover__username,.commentPopover.small .commentPopover__body{padding-top:1px}.commentPopover.small.visible .commentPopover__username,.commentPopover.small.visible .commentPopover__body{padding-top:2px}.commentPopover.medium .commentPopover__username,.commentPopover.medium .commentPopover__body{padding-top:10px}.commentPopover.medium.visible .commentPopover__username,.commentPopover.medium.visible .commentPopover__body{padding-top:13px}.commentPopover.large .commentPopover__username,.commentPopover.large .commentPopover__body{padding-top:20px}.commentPopover.large.visible .commentPopover__username,.commentPopover.large.visible .commentPopover__body{padding-top:23px}.visualSound.streamContext.playing .commentPopover__body{color:#e5e5e5}.visualSound.streamContext.playing .commentPopover__username,.visualSound.streamContext.playing .commentPopover__body{padding-top:6px}.visualSound.streamContext.playing .commentPopover.visible .commentPopover__username,.visualSound.streamContext.playing .commentPopover.visible .commentPopover__body{padding-top:9px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/waveform/nodes/has-gradient-fill",["require","exports","module","lib/mixin","views/waveform/waveform-style"],function(a,b,c){var d=a("lib/mixin"),e=a("views/waveform/waveform-style"),f=c.exports=new d({_fills:null,requires:["gradientName"],before:{onResize:function(){this._fills=null}},getFillStyle:function(a,b){return a==null&&(a=1),b=b||this.gradientName,this._fills=this._fills||{},this._fills[a+"_"+b]||(this._fills[a+"_"+b]=e.gradient(this.context,b,this.options.waveformStyle,this.options.scale,a))}})}),
define("views/waveform/nodes/has-waveform-data",["require","exports","module","_","lib/mixin","views/waveform/waveform-style"],function(a,b,c){var d=a("_"),e=a("lib/mixin"),f=a("views/waveform/waveform-style"),g={upperPartHeight:.7,waveformWidth:1800,waveformHeight:140,waveformData:null},h=c.exports=new e({_memo:null,applyTo:function(a){a.defaults=d.defaults(a.defaults||{},g)},before:{onResize:function(){this._memo=null}},defaults:{getAudible:function(){return this.model}},getWaveformHeightAt:function(a){var b=this.options,c=b.waveformData.length===1,d=this.canvas.width/b.scale,e=f.getConfig("gapWidth")+f.getConfig("barWidth"),g=Math.floor(a/e),h=a/d,i,j,k,l,m;return this._memo||(this._memo=new Array(Math.ceil(d/e))),this._memo[g]==null&&(c?l=0:(i=this.getAudible(),j=h*i.duration(),l=i.getSoundIndexAt(j),k=i.getSounds()[l],h=(j-k.timeOffset)/k.duration()),m=Math.floor(h*b.waveformWidth),this._memo[g]=b.waveformData[l][m]),this._memo[g]}})}),
define("lib/scene/scene-node",["require","exports","module","_","lib/css","lib/mixin"],function(a,b,c){var d=a("_"),e=a("lib/css"),f=a("lib/mixin"),g=c.exports=new f({canvas:null,context:null,isDirty:!1,isAnimating:!1,requires:["draw"],applyTo:function(a){a.defaults=d.extend({scale:1,$eventEl:null},a.defaults)},after:{draw:function(){this.setDirty(this.isAnimating)},onResize:function(){this.setDirty(!0)}},before:{setup:function(a){a.$eventEl||(a.$eventEl=this.$el),this.canvas=this.el,this.context=this.el.getContext("2d")}},override:{render:function(){this.css&&e.insert(this.css),this.hasData()?this.setDirty(!0):(this.setDirty(!1),this.fetchData())},destroyElement:$.noop},defaults:{onResize:$.noop},setDirty:function(a){(this.isDirty=a)&&this.trigger("dirty")}})}),
define("views/waveform/waveform-events",["require","exports","module"],function(a,b,c){c.exports={SOUND_FOCUS:"waveform:soundFocus",SOUND_UNFOCUS:"waveform:soundUnFocus"}}),
define("lib/helpers/mouse-helper",["require","exports","module"],function(a,b,c){var d,e=c.exports={normalizeEvent:function(a){if(a.offsetX===d||a.offsetY===d){var b=$(a.target).offset(),c=a.originalEvent;a.offsetX=c.pageX-b.left,a.offsetY=c.pageY-b.top}return a}}}),
define("views/waveform/nodes/comments.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".waveformCommentsNode{opacity:0;-webkit-transition:opacity .2s ease-in-out;transition:opacity .2s ease-in-out}.waveformCommentsNode.loaded{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/waveform/nodes/follows-progress",["require","exports","module","lib/mixin"],function(a,b,c){function f(){!this.isDirty&&this.shouldBeDirty()&&this.setDirty(!0)}function g(){this.setDirty(!0)}function h(a){var b=a?"on":"off";this.model[b]("time",f,this)[b]("seeked",g,this)}var d=a("lib/mixin"),e=c.exports=new d({lastPosition:0,after:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}},getPosition:function(){return Math.max(this.model.isPlaying()?1:0,Math.ceil(this.model.progress()*this.canvas.width/this.options.scale))},hasPositionChanged:function(){return this.lastPosition!==this.getPosition()},defaults:{shouldBeDirty:function(){return this.hasPositionChanged()}}})}),
define("views/sound/visuals.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".visuals{top:0;left:0;right:0;height:100%;width:100%;position:relative}.visuals__item,.visuals__background{position:absolute;top:0;left:0;bottom:0;right:0;background-size:cover;background-position:center;background-repeat:no-repeat;opacity:0}.visuals__background:after{position:absolute;top:0;left:0;display:block;content:'';background:#000;opacity:.6;width:100%;height:100%}.visuals__backgroundLayer{position:absolute;top:0;left:0;background-size:cover;background-position:center;background-repeat:no-repeat}.visuals__backgroundLayerBottom{-webkit-filter:blur(2px);filter:blur(2px)}.visuals__backgroundLayerTop{-webkit-filter:blur(8px);filter:blur(8px);opacity:.9}.visuals__item.visible,.visuals.background .visuals__background{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/visuals.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <div class="visuals__item g-transition-opacity" style="background-image: url(',d=a.background_url,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"background_url",{hash:{}})),c+=o(d)+');" data-timestamp="',d=a.timestamp,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"timestamp",{hash:{}})),c+=o(d)+'"></div>\n',c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.visuals,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n<div class="visuals__background g-transition-opacity"> <div class="visuals__backgroundLayer visuals__backgroundLayerBottom g-box-full"></div> <div class="visuals__backgroundLayer visuals__backgroundLayerTop g-box-full"></div>\n</div>\n',f})}),
define("lib/views/image.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e=a,f={},g=a.placeholderUrl,f.src=g,g=a.size,f.size=g,g="image__placeholder",f["class"]=g,g=a._options,g=g===null||g===undefined||g===!1?g:g.stretch,f.stretch=g,g=c.$image,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+"\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;g=b.placeholderUrl,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",g=b,h={},i=b.src,h.src=i,i=b.size,h.size=i,i="image__full g-transition-opacity",h["class"]=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.stretch,h.stretch=i,i=c.$image,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n",f})}),
define("lib/views/image.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".image{position:relative;width:100%;height:100%}.image__placeholder{position:absolute}.image__full{position:relative;opacity:1}.image__placeholder,.image__full{background-size:cover;background-position:50% 50%}.image.fadeIn>.image__full{opacity:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/skip",["require","exports","module","_","lib/ad-manager","lib/helpers/datetime-helper","models/sound","lib/view","views/ads/skip.tmpl","views/ads/skip.css"],function(a,b,c){function n(){var a=this.model,b=j-a.currentTime();b<1e3?(this.toggleState("disabled",!1),this.model.off("time",l,this),this.getElement("in").text("")):this.getElement("remaining").text(this.options.visual?f.timecode(b):f.timecode(b).slice(-2).replace(/^0/,""))}function o(){var a=this.model;this.getElement("remaining").text(f.timecode(a.duration()-a.currentTime()))}function p(){this.getState("disabled")||e.skip()}var d=a("_"),e=a("lib/ad-manager"),f=a("lib/helpers/datetime-helper"),g=a("models/sound"),h=a("lib/view"),i=150,j=15e3,k=2500,l,m=c.exports=h.extend({template:a("views/ads/skip.tmpl"),css:a("views/ads/skip.css"),tagName:"button",className:"skipAd sc-button sc-button-small",ModelClass:g,events:{click:p},defaults:{iconColor:"#FFFFFF"},contextName:"ad-skip",setup:function(){this.model.on("time",l,this),this.toggleState("disabled",!0),this.options.visual&&this.toggleState("sc-button-visual",!0),this.skippable=this.model.get("duration")-j>k},dispose:function(){this.model.off("time",l,this)},getTemplateData:function(a){return a.remaining=f.timecode(j),a.skippable=this.skippable,a.nonSkippableLong=!this.skippable&&this.options.visual,a.nonSkippableShort=!this.skippable&&!this.options.visual,a}});l=d.throttle(function(){if(this.disposed)return;this.skippable?n.call(this):o.call(this)},i)}),
define("views/sound/header.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".soundHeader__playButton{margin:2px 5px 1px 1px}.soundHeader__title{margin-top:6px}.soundHeader__rightRow{height:22px}.soundHeader__rightRow,.soundHeader__logo{position:relative}.soundHeader__logo{text-align:right}.soundHeader__actions{float:right}.soundHeader.visual .soundHeader__actions{top:-3px}.soundHeader .soundHeader__likeButton{display:none}.soundHeader.likeVisible .soundHeader__likeButton{display:inline-block}.soundHeader.state-small .soundTitle__title,.soundHeader.state-medium .soundTitle__title{position:absolute;left:49px;right:65px}.soundHeader.visual.state-small .soundTitle__title,.soundHeader.visual.state-medium .soundTitle__title{left:59px}.soundHeader.visual .soundHeader__logo{right:-1px}.soundHeader__skipAdContainer{position:absolute;top:22px;right:0;z-index:1}.soundHeader.visual .soundHeader__skipAdContainer{top:34px;right:11px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/header.tmpl",["vendor/handlebars-runtime","views/sound/play-button","views/sound/logo","views/buttons/like-button","views/buttons/buy-button","views/buttons/download-button","views/buttons/share-button","views/sound/title"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function n(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/like-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="likeButton",f.key=g,g="small",f.size=g,g=a.visual,f.visual=g,g="soundHeader__likeButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function o(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/buy-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function p(a,b){var d="",e,f;d+=" ",e=a.show_download_button,f=c["if"],k=l.program(6,q,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+=" ",d}function q(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/download-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g="small",f.size=g,g=a.visual,f.visual=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}function r(a,b){var d="",e,f,g;return d+=" ",e="views/buttons/share-button",f={},g=a.resource_id,f.resource_id=g,g=a.resource_type,f.resource_type=g,g=a.visual,f.visual=g,g=a.show_button_overlay,f.overlay=g,g="soundHeader__shareButton",f.className=g,g="small",f.size=g,g="soundHeader__shareButton",f.className=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=m(e)+" ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;f+='<div class="soundHeader__playButton sc-media-left g-transition-opacity"> ',g="views/sound/play-button",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+" ",f+=' <button class="sc-visuallyhidden" role="application">',g="Player controls",h=c.$t,g=h.call(b,g,{hash:{}}),f+=m(g)+'</button>\n</div> <div class="sc-media-right"> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__logo g-transition-opacity"> ',g="views/sound/logo",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.inverse=i,i="logo",h.key=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div> </div> <div class="soundHeader__rightRow sc-clearfix"> <div class="soundHeader__skipAdContainer"></div> <div class="soundHeader__actions g-transition-opacity"> <div class="sc-button-group sc-button-group-pill soundHeader__buttons"> ',g=b.show_like_button,h=c["if"],k=l.program(1,n,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_buy_button,h=c["if"],k=l.program(3,o,e),k.hash={},k.fn=k,k.inverse=l.program(5,p,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g=b.show_share_button,h=c["if"],k=l.program(8,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+=' </div> </div> </div>\n</div> <div class="soundHeader__title sc-media-body g-transition-opacity"> ',g="views/sound/title",h={},i=b.resource_id,h.resource_id=i,i=b.resource_type,h.resource_type=i,i=b.visual,h.visual=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+"\n</div>\n",f})}),
define("views/sound/sounds-total.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e='.soundsTotal{width:80px;height:80px;padding:12px;overflow:hidden;background:rgba(0,0,0,.8);border-radius:50%;color:#fff;text-align:center;text-transform:uppercase}.soundsTotal.hidden{display:none}.soundsTotal__number{font-size:26px;line-height:1.25}.soundsTotal__tracks{font-size:14px;line-height:1.25}@media (max-height:350px){.soundsTotal{width:50px;height:50px;padding:8px}.soundsTotal__number{font-size:16px}.soundsTotal__tracks{font-size:9px;font-family:"Lucida Grande","Lucida Sans Unicode","Lucida Sans",Garuda,Verdana,Tahoma,sans-serif}}';d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/sounds-total.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression;return f+='<div class="soundsTotal__number">',g=b.track_count,h=c.$shortnumber,g=h.call(b,g,{hash:{}}),f+=m(g)+'</div>\n<div class="soundsTotal__tracks">',g="tracks",h="track",i=b.track_count,j=c.$tp,g=j.call(b,i,h,g,{hash:{}}),f+=m(g)+"</div>\n",f})}),
define("views/sound/thin-progress-bar",["require","exports","module","lib/views/progress-bar","views/sound/thin-progress-bar.tmpl","views/sound/thin-progress-bar.css"],function(a,b,c){var d=a("lib/views/progress-bar"),e=c.exports=d.extend({template:a("views/sound/thin-progress-bar.tmpl"),css:a("views/sound/thin-progress-bar.css"),className:"thinProgressbar sc-pointer",colorCustomizable:!0,updatePlayed:function(){if(!this.playedProgress)return;this.$$("played")[0].style.width=100*this.playedProgress+"%"}})}),
define("lib/views/mixins/seekable",["require","exports","module","_","models/audible","lib/play-manager","config","lib/support","lib/mixin"],function(a,b,c){function s(a){this.model.seek(t.call(this,a)),this.onSeek()}function t(a){var b;return b=(a-x.call(this).left)/w.call(this),Math.floor(b*this.model.duration())}function u(a){var b=a.originalEvent.pageX,c=a.originalEvent.pageY,d=x.call(this);return b>=d.left&&b<=d.right&&c>=d.top&&c<=d.bottom}function v(a){var b=a?"on":"off";$(window)[b]("resize",this.onWindowResize),this.model[b]("play",this.onPlay,this)[b]("pause",this.onPause,this)}function w(){return this.width=this.width||this.$el.width(),this.width}function x(){var a=this.$el.offset();return a.right=a.left+this.$el.width(),a.bottom=a.top+this.$el.height(),a}function y(){return this.model.loadProgress()*w.call(this)}var d=a("_"),e=a("models/audible"),f=a("lib/play-manager"),g=a("config"),h=a("lib/support"),i=a("lib/mixin"),j=g.get("appView").$el,k=$(document),l=500,m=50,n={CLICK:"click:scrubber",MOUSE_MOVE:"mousemove:scrubber",MOUSE_ENTER:"mouseenter:scrubber",MOUSE_LEAVE:"mouseleave:scrubber"},o=h.touch?"touchend":"mouseup",p=h.touch?"touchstart":"mousedown",q=h.touch?"touchmove":"mousemove",r=c.exports=new i({applyTo:function(a){var b=a.constructor;d.extend(b,{Events:n}),a.events=a.events||{},a.events[p]="onPointerDown",a.events[q]="onPointerMove",a.states=d.extend({},a.states,{"selection-disabled":function(a){a?(document.onselectstart=function(){return!1},j.addClass("sc-selection-disabled")):(document.onselectstart=null,j.removeClass("sc-selection-disabled"))}})},before:{setup:function(){this.scrubbingEnabled=!0,this.scrub=d.throttle(this.scrub.bind(this),m),this.unscrub=this.unscrub.bind(this),this.onWindowResize=d.debounce(this.onWindowResize.bind(this),100),v.call(this,!0)},dispose:function(){v.call(this,!1)},renderDecorate:function(){this.width=this.coord=null}},defaults:{ModelClass:e,width:null,coord:null,onWindowResize:function(){this.rerender()},onPlay:function(){this.scrubbingEnabled=!1,d.delay(function(){this.scrubbingEnabled=!0}.bind(this),l)},onPause:function(){this.scrubbingEnabled=!1},onSeek:$.noop,onPointerDown:function(a){this.trigger(n.CLICK),this.scrubbingEnabled&&this.model.isPlaying()?(s.call(this,a.originalEvent.pageX),k.on(q,this.scrub).on(o,this.unscrub)):f.toggle(this.model,{userAction:!0})},onPointerMove:function(a){var b=this.model.isPlaying(),c=a.originalEvent.pageX-x.call(this).left;if(!this.scrubbingEnabled||!b||c>y.call(this)||c<=0)return;(!this.hasHoverIntent||this._isEntered)&&this.trigger(n.MOUSE_MOVE,c-1)},scrub:function(a){if(!u.call(this,a))return k.trigger(o);this.toggleState("selection-disabled",!0),s.call(this,a.originalEvent.pageX)},unscrub:function(){this.toggleState("selection-disabled",!1),k.off(q,this.scrub).off(o,this.unscrub),h.touch&&this.trigger(n.MOUSE_LEAVE)}}})}),
define("views/ads/ad",["require","exports","module","lib/ad-manager","lib/helpers/image-helper","lib/model","lib/view","views/ads/ad.css","views/ads/ad.tmpl"],function(a,b,c){function i(){this._impressionRecorded&&d.metrics("companion_display:clickthrough")}function j(a){this.$el.toggleClass("imageLoaded",a),a&&!this._impressionRecorded&&(this._impressionRecorded=!0,d.metrics("companion_display:impression"))}var d=a("lib/ad-manager"),e=a("lib/helpers/image-helper"),f=a("lib/model"),g=a("lib/view"),h=c.exports=g.extend({_impressionRecorded:!1,css:a("views/ads/ad.css"),template:a("views/ads/ad.tmpl"),events:{"click .displayAd__image":i},states:{imageLoaded:j},className:"displayAd",setup:function(){this.model=new f(this.options.companion_display)},renderDecorate:function(){this.addDeferred(e.load(this.model.get("ad_visual"))).then(this.toggleState.bind(this,"imageLoaded",!0))}})}),
define("views/sound/title.tmpl",["vendor/handlebars-runtime","views/sound/explicit-badge"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e=a.showH2Link,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=' <span title="',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+'" class="',e=a.inverse,f=c["if"],j=k.program(7,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='">',e=a.inlineTitle,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"inlineTitle",{hash:{}})),d+=o(e)+"</span> ",e=a.showH2Link,f=c["if"],j=k.program(9,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function q(a,b){var d="",e,f;d+=' <a href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="sc-link-',e=a.inverse,f=c["if"],j=k.program(3,r,b),j.hash={},j.fn=j,j.inverse=k.program(5,s,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',d}function r(a,b){return"white"}function s(a,b){return"dark"}function t(a,b){return"title__white"}function u(a,b){return" </a> "}function v(a,b){var d="",e,f;d+=" ",e=a.showH1,f=c["if"],j=k.program(12,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+=" <",e=a.h2TagName,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2TagName",{hash:{}})),d+=o(e)+' href="',e=a.h2Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Link",{hash:{}})),d+=o(e)+'" title="',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'" class="title__h2 sc-link-dark sc-truncate g-text-shadow ',e=a.visual,f=c["if"],j=k.program(15,y,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='"> ',e=a.showExplicit,f=c["if"],j=k.program(17,z,b),j.hash={},j.fn=j,j.inverse=k.program(19,A,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" </",e=a.h2TagName,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2TagName",{hash:{}})),d+=o(e)+">\n",d}function w(a,b){var d="",e,f;d+=" <",e=a.h1TagName,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1TagName",{hash:{}})),d+=o(e)+' href="',e=a.h1Link,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Link",{hash:{}})),d+=o(e)+'" title="',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+'" class="title__h1 sc-truncate sc-link-medium g-text-shadow ',e=a.visual,f=c["if"],j=k.program(13,x,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='"> ',e=a.h1Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1Text",{hash:{}})),d+=o(e)+" </",e=a.h1TagName,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h1TagName",{hash:{}})),d+=o(e)+"> <br> ",d}function x(a,b){return"g-text-visual"}function y(a,b){return"g-text-visual"}function z(a,b){var d="",e,f,g;return d+=' <span class="sc-media"> <span class="sc-media-left sc-truncate title__h2Text">',e=a.h2Text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"h2Text",{hash:{}})),d+=o(e)+'</span> <span class="sc-media-content title__explicit">',e="views/sound/explicit-badge",f={},g=a.resource_id,f.resource_id=g,g=c.$view,j={},j.hash=f,e=g.call(a,e,j),d+=o(e)+"</span> </span> ",d}function A(a,b){var c="",d;return c+=' <span class="title__h2Text">',d=a.h2Text,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"h2Text",{hash:{}})),c+=o(d)+"</span> ",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.inline,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.program(11,v,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/title.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".title{font-size:12px;line-height:16px}.title__h1,.title__h2{display:inline-block;max-width:100%;vertical-align:bottom;outline-offset:-1px}.title__h1{margin-bottom:1px;font-weight:100}.title__h1:hover{color:#999}.title__white{color:#fff}.title__h2{font-family:'Interstate','Lucida Grande','Lucida Sans Unicode','Lucida Sans',Garuda,Verdana,Tahoma,sans-serif;font-size:14px;line-height:18px;font-weight:400}.title__h2Text{max-width:80%}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/artwork.tmpl",["vendor/handlebars-runtime","lib/views/image","views/buttons/follow-button"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var d="",e,f;return d+=' <a href="',e=a.permalink_url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"permalink_url",{hash:{}})),d+=p(e)+'" title="',e="Open on SoundCloud.",f=c.$t,e=f.call(a,e,{hash:{}}),d+=p(e)+'" class="artwork__link">\n',d}function r(a,b){return" </a>\n"}function s(a,b){var d="",e,f,g;return d+=" ",d+=' <div class="artwork__follow g-opacity-transition"> ',e="views/buttons/follow-button",f={},g=a.user,g=g===null||g===undefined||g===!1?g:g.id,f.resource_id=g,g=c.$view,k={},k.hash=f,e=g.call(a,e,k),d+=p(e)+" </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;g=b.isLink,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" ",g="lib/views/image",h={},i=b._resource_id,h.resource_id=i,i=b._resource_type,h.resource_type=i,i="artwork__img",h.className=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.size,h.size=i,i=!0,h.stretch=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=p(g)+"\n",g=b.isLink,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n",g=b._options,g=g===null||g===undefined||g===!1?g:g.show_follow_button,h=c["if"],k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/artwork.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".artwork__link,.artwork__img,.artwork{display:block;position:relative;height:100%;width:100%}.artwork__userAvatar{width:100%}.artwork__follow{opacity:0;position:absolute;bottom:10px;left:10px}.artwork:hover .artwork__follow{opacity:1;display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("models/comment",["require","exports","module","lib/model","models/user","models/sound"],function(a,b,c){var d=a("lib/model"),e=a("models/user"),f=a("models/sound"),g=Infinity,h=c.exports=d.extend({resource_type:"comment",urnPrefix:"soundcloud:comments",parse:function(a){return a.timestamp===null&&(a.timestamp=g),a.user.avatar_url=a.user.avatar_url.replace("http:","https:"),a},submodelMap:{track:f,user:e},baseUrl:function(){return["comments",this.id].join("/")},saveUrl:function(){return["tracks",this.get("track_id"),"comments"].join("/")},destroyUrl:function(){return["tracks",this.get("track_id"),"comments",this.id].join("/")},getAttributesToBeSaved:function(){return{"comment[body]":this.get("body"),"comment[timestamp]":this.get("timestamp")}}},{EMPTY_TIMESTAMP:g})}),
define("lib/timed-comments-state-machine",["require","exports","module","_","lib/backbone","collections/comment-heads","lib/single","models/sound","lib/timed-comments-states"],function(a,b,c){function n(a){var b=a?"on":"off";this[b](j.INITIAL,this.onInitialState,this)[b](j.CURRENT_COMMENT,this.onCurrentComment,this)[b](j.CURRENT_TIMESTAMP,this.onCurrentTimestamp,this)[b](j.ACTIVE_TIMESTAMP,this.onActiveTimestamp,this),this.sound[b]("time",this.onAudioTime,this)}var d,e=a("_"),f=a("lib/backbone"),g=a("collections/comment-heads"),h=a("lib/single"),i=a("models/sound"),j=a("lib/timed-comments-states"),k=300,l=3e3,m=1e3;d=function(){this.setup.apply(this,arguments)},d.extend=f.Model.extend,e.extend(d.prototype,f.Events,{constructor:d,currentComment:null,activeTimestamp:null,currentTimestamp:null,commentQuotaTimeout:null,commentQuotaExceeded:!0,commentIntervalTimeout:null,commentIntervalExceeded:!0,currentState:j.INITIAL,interactingWithComments:!1,setup:function(a,b,c){this.collection=new g(null,{sound_id:a,secret_token:c}),this.sound=new i({id:a,resource_id:b}),n.call(this,!0)},dispose:function(){n.call(this,!1),this.sound.release(),this.collection.release()},onInitialState:function(){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=null},onCurrentComment:function(a,b){this.activeTimestamp=null,this.currentComment=b,this.currentTimestamp=null},onCurrentTimestamp:function(a){this.activeTimestamp=null,this.currentComment=null,this.currentTimestamp=a},onActiveTimestamp:function(a){this.activeTimestamp=a,this.currentComment=null,this.currentTimestamp=null},goToState:function(a){var b=this.canGoToState.apply(this,arguments);return b&&(this.currentState=a,this.trigger.apply(this,arguments)),b},canGoToState:function(a){var b=this.activeTimestamp&&this.currentState===j.ACTIVE_TIMESTAMP;switch(a){case j.CURRENT_TIMESTAMP:return!b;case j.CURRENT_COMMENT:return this.commentIntervalExceeded&&arguments[1]!==this.currentComment&&!b;case j.INITIAL:return!0;case j.ACTIVE_TIMESTAMP:return arguments[1]!==this.activeTimestamp;default:return!1}},onAudioTime:e.throttle(function(a){if(this.disposed)return;var b,c=a.sound.currentTime();!this.interactingWithComments&&this.sound.isPlaying()&&(b=this.collection.getCommentAtTimestamp(c,k),b?this.goToState(j.CURRENT_COMMENT,c,b)&&(clearTimeout(this.commentIntervalTimeout),this.commentIntervalExceeded=!1,setTimeout(function(){this.commentIntervalExceeded=!0}.bind(this),m),clearTimeout(this.commentQuotaTimeout),this.commentQuotaExceeded=!1,this.commentQuotaTimeout=setTimeout(function(){this.commentQuotaExceeded=!0,this.onAudioTime(a)}.bind(this),l)):this.commentQuotaExceeded&&this.goToState(j.CURRENT_TIMESTAMP,c))},k)}),c.exports=h.applyTo(d,{onCleanup:function(a){a.dispose()},cleanupInstantly:!0,hashFn:function(a){return a}})}),
define("views/ads/skip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+=" ",e={},f=a.remaining,e.remaining=f,f=c.$t,j=k.program(2,q,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+="\n",d}function q(a,b){return' Skip in <span class="skipAd__remaining">[[remaining]]</span> '}function r(a,b){var d="",e,f;d+=" ",e={},f=a.remaining,e.remaining=f,f=c.$t,j=k.program(5,s,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+="\n",d}function s(a,b){return' Your track will start in <span class="skipAd__remaining">[[remaining]]</span> '}function t(a,b){var d="",e,f;d+=" ",e={},f=a.remaining,e.remaining=f,f=c.$t,j=k.program(8,u,b),j.hash=e,j.fn=j,j.inverse=k.noop,e=f.call(a,j);if(e||e===0)d+=e;return d+="\n",d}function u(a,b){return' Track starts in <span class="skipAd__remaining">[[remaining]]</span> '}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<svg width="8px" height="9px" viewBox="0 0 8 9" xmlns="http://www.w3.org/2000/svg"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g transform="translate(-421.000000, -41.000000)" fill="',g=b._options,g=g===null||g===undefined||g===!1?g:g.iconColor,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"_options.iconColor",{hash:{}})),f+=o(g)+'"> <g transform="translate(316.000000, 34.000000)"> <path d="M111,7 L111,16 L113,16 L113,7 L111,7 Z M105,16 L105,7 L111,11.5 L105,16 Z" id="skip"></path> </g> </g> </g>\n</svg> ',g=b.skippable,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableLong,h=c["if"],j=k.program(4,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n",g=b.nonSkippableShort,h=c["if"],j=k.program(7,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+=" ",f})}),
define("views/ads/skip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".skipAd{font-size:12px}.skipAd>svg{margin-right:3px}.skipAd.disabled{opacity:1;cursor:default}.skipAd.disabled>svg{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button",["require","exports","module","_","lib/customization","lib/play-manager","lib/ad-manager","lib/lingua","lib/views/mixins/multi-resource-type","config/resources","lib/view","views/sound/play-button.css","views/sound/play-button.tmpl"],function(a,b,c){function m(a){var b=a?"on":"off";f[b]("finish",q,this)[b]("play pause",p,this),g.on("ad:play ad:skip ad:finish",p,this).on("ad:play ad:pause",s,this)}function n(){var a=f.getCurrentSound();a&&a.initAudio()}function o(){this.getState("ad")?g.toggle({userAction:!0}):f.toggle(f.getCurrentSound(),{userAction:!0,view:"play-button"})}function p(){r.call(this)}function q(){if(this.disposed)return;r.call(this)}function r(){var a=f.getCurrentSound(),b=a&&a.isPlaying(),c=g.getCurrentSound(),d=c&&c.isPlaying(),e=a&&(a.isProcessing()||!a.isPlayable()),i=b?h.t("Pause"):h.t("Play");this.toggleState("replay",!1).toggleState("playing",b).toggleState("disabled",e).toggleState("ad",d).$el.attr("title",i)}function s(){var a=g.getCurrentSound();this.toggleState("playing",!!a&&!!a.isPlaying())}var d=a("_"),e=a("lib/customization"),f=a("lib/play-manager"),g=a("lib/ad-manager"),h=a("lib/lingua"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/view"),l=c.exports=k.extend(i,{css:a("views/sound/play-button.css"),template:a("views/sound/play-button.tmpl"),tagName:"button",className:"playButton",colorCustomizable:!0,loadingTemplate:null,events:{click:o,mouseenter:n},defaults:{size:"medium"},setup:function(){m.call(this,!0),this.observedAttributes=this.observedAttributes||{},this.observedAttributes[j.SOUND]=["playable"],this.$el.toggleClass(this.options.size)},dispose:function(){m.call(this,!1)},renderDecorate:function(){r.call(this)},getTemplateData:function(){return{custom:e.getColorParams(),gradient_id:d.uniqueId("playButton__gradient")}}})}),
define("views/sound/logo",["require","exports","module","_","lib/event-bus","lib/lingua","lib/views/mixins/multi-resource-type","lib/views/mixins/responsive","tracking-events","lib/view","views/sound/logo.css","views/sound/logo.tmpl"],function(a,b,c){function l(){this.isSound&&e.trigger("sound:deeplink",this.el,this.model),e.trigger(i.UI.LOGO_LINK_CLICKED,this.model)}function m(){var a=this.model,b=this.isAudible&&a.isPrivate(),c,d;return c=b?a.get("user").permalink_url:a.get("permalink_url"),d=b?f.t("SoundCloud"):f.t("Play on SoundCloud"),{href:c,title:d}}var d=a("_"),e=a("lib/event-bus"),f=a("lib/lingua"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/views/mixins/responsive"),i=a("tracking-events"),j=a("lib/view"),k=c.exports=j.extend(h,g,{tagName:"a",css:a("views/sound/logo.css"),template:a("views/sound/logo.tmpl"),className:"logo",requiredAttributes:["permalink_url"],defaults:{inverse:!1},events:{click:l},setup:function(){this.$el.toggleClass("inverse",this.options.inverse)},renderDecorate:function(){this.$el.attr(m.call(this))},getColor:function(){return this.getState("alt")?"#FF5500":"#FFFFFF"},toggleAltColor:function(){this.toggleState("alt")},getTemplateData:function(){return{gradient_id:d.uniqueId("logo_hover_")}}})}),
define("views/buttons/like-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","models/sound-likes","lib/lingua","models/playlist-likes","tracking-events","lib/view","config/resources"],function(a,b,c){var d=a("lib/action-controller"),e=a("lib/views/mixins/button"),f=a("lib/event-bus"),g=a("lib/views/mixins/has-tooltip"),h=a("models/sound-likes"),i=a("lib/lingua"),j=a("models/playlist-likes"),k=a("tracking-events"),l=a("lib/view"),m=a("config/resources"),n=c.exports=l.extend(e,g,{className:"sc-button-like likeButton",template:function(){return i.t("Like")},defaults:{resource_id:null},attributes:{title:i.t("Like")},setup:function(){this.options.resource_type===m.PLAYLIST?this.model=new j:this.model=new h,this.observedAttributes=[this.options.resource_id]},renderDecorate:function(){var a=!!this.model.get(this.options.resource_id),b=a?i.t("Liked"):i.t("Like");this.toggleState("selected",a),this.$el.attr("title",b).html(b)},onClick:function(a){var b=this.options;f.trigger(k.UI.LIKE_BUTTON_CLICKED,this.model),d.like(b.resource_id,b.resource_type,!this.model.get(b.resource_id)),a.preventDefault()}})}),
define("views/buttons/buy-button",["require","exports","module","models/audible","lib/views/mixins/button","lib/event-bus","lib/views/mixins/has-tooltip","lib/lingua","vendor/js-online-stores/online-stores","tracking-events","lib/view"],function(a,b,c){var d=a("models/audible"),e=a("lib/views/mixins/button"),f=a("lib/event-bus"),g=a("lib/views/mixins/has-tooltip"),h=a("lib/lingua"),i=a("vendor/js-online-stores/online-stores"),j=a("tracking-events"),k=a("lib/view"),l=c.exports=k.extend(e,g,{tagName:"a",className:"sc-button-buy",ModelClass:d,requiredAttributes:["purchase_url"],template:function(){return""},renderDecorate:function(){var a=this.options.resource_type==="sound",b=this.model,c=i.getPurchaseTitle(b.toJSON(),a?h.t("Buy"):h.t("Buy all"));this.$el.attr({href:b.get("purchase_url"),title:c}).html(c)},onClick:function(){f.trigger(j.UI.BUY_LINK_CLICKED,this.model)}})}),
define("views/buttons/download-button",["require","exports","module","models/audible","lib/views/mixins/button","config","lib/event-bus","lib/views/mixins/has-tooltip","lib/lingua","tracking-events","lib/url","lib/view"],function(a,b,c){var d=a("models/audible"),e=a("lib/views/mixins/button"),f=a("config"),g=a("lib/event-bus"),h=a("lib/views/mixins/has-tooltip"),i=a("lib/lingua"),j=a("tracking-events"),k=a("lib/url"),l=a("lib/view"),m=c.exports=l.extend(e,h,{tagName:"a",className:"sc-button-download",ModelClass:d,requiredAttributes:["download_url"],template:function(){return i.t("Download")},renderDecorate:function(){var a=k.modify(this.model.get("download_url"),{query:{client_id:f.get("client_id")}});this.$el.attr({href:a,title:i.t("Download")})},onClick:function(){g.trigger(j.UI.DOWNLOAD_LINK_CLICKED,this.model)}})}),
define("views/buttons/share-button",["require","exports","module","lib/views/mixins/button","lib/views/mixins/has-overlay","lib/views/mixins/has-tooltip","lib/event-bus","views/share/share-panel","tracking-events","lib/lingua","lib/views/mixins/multi-resource-type","lib/view"],function(a,b,c){function n(){return this.getState("selected")?j.t("Hide share options"):j.t("Share")}var d=a("lib/views/mixins/button"),e=a("lib/views/mixins/has-overlay"),f=a("lib/views/mixins/has-tooltip"),g=a("lib/event-bus"),h=a("views/share/share-panel"),i=a("tracking-events"),j=a("lib/lingua"),k=a("lib/views/mixins/multi-resource-type"),l=a("lib/view"),m=c.exports=l.extend(d,e,f,k,{className:"sc-button-share",defaults:{icon_only:!1,responsive:!0,overlay:!0,ContentViewClass:h,contentViewOptions:{show_embed_options:!1}},states:{"overlay-opened":function(a){this.toggleState("selected",a)}},template:function(){return""},renderDecorate:function(){var a=n.call(this);this.$el.attr("title",a).html(a)},onClick:function(){this.toggleState("selected"),g.trigger(i.UI.SHARE_BUTTON_CLICKED,this.model),this.options.overlay?this.toggleOverlay():this.rerender()}})}),
define("lib/views/progress-bar",["require","exports","module","_","models/audible","lib/view","lib/window-events"],function(a,b,c){var d=a("_"),e=a("models/audible"),f=a("lib/view"),g=a("lib/window-events"),h=40,i=c.exports=f.extend({ModelClass:e,_lastContainerSize:-1,_throttleTime:0,_throttleTimeout:0,setup:function(){this.loadedProgress=this._getLoadedProgress(),this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded=!1,d.bindAll(this,"onAudioFinish","updateProgressBar","rethrottle","onInitialPlay","onAudioPlay","onAudioPause","timedUpdate"),g.on("resize:debounced",this.rethrottle,this),this.model.on("finish",this.onAudioFinish).on("time",this.onInitialPlay).on("seeked",this.updateProgressBar)},dispose:function(){this.model.off("finish",this.onAudioFinish).off("time",this.onInitialPlay).off("seeked",this.updateProgressBar),g.off("resize:debounced",this.rethrottle,this)},renderDecorate:function(){this.updateProgressBar(),this.model.on("play",this.onAudioPlay).on("pause",this.onAudioPause),this.model.isPlaying()&&(this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate())},teardown:function(){this.stopTimedUpdates(),this.model.off("play",this.onAudioPlay).off("pause",this.onAudioPause)},onInitialPlay:function(){this.model.off("time",this.onInitialPlay),this.updateProgressBar()},onAudioPause:function(){this.stopTimedUpdates()},onAudioPlay:function(){this._throttleTime||this.rethrottle(),this._throttleTimeout||this.timedUpdate()},rethrottle:function(){if(this.disposed)return;var a=this.el.clientWidth,b,c;a!==this._lastContainerSize&&(this._lastContainerSize=a,b=this.model.duration(),a===0?(this._throttleTime=0,c=this.whenInserted(),c.state()==="pending"&&c.done(this.rethrottle)):this._throttleTime=Math.max(h,Math.floor(b/a)))},updateLoaded:$.noop,updatePlayed:$.noop,onAudioFinish:function(){this.updateProgressBar()},updateProgressBar:function(){this.disposed||(this.playedProgress=this._getPlayedProgress(),this.isFullyLoaded||(this.loadedProgress=this._getLoadedProgress(),this.isFullyLoaded=this.loadedProgress===1,this.updateLoaded()),this.updatePlayed())},_getLoadedProgress:function(){return this.model.loadProgress()},_getPlayedProgress:function(){return this.model.progress()},timedUpdate:function(){var a=this._throttleTime,b;this.updateProgressBar(),b=Math.max(h,a&&a-this.model.currentTime()%a),this._throttleTimeout=setTimeout(this.timedUpdate,b)},stopTimedUpdates:function(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}})}),
define("views/sound/thin-progress-bar.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="thinProgressbar__layer sc-background-dark"></div>\n<div class="thinProgressbar__layer thinProgressbar__played"></div>\n'})}),
define("views/sound/thin-progress-bar.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e='.thinProgressbar{height:3px;width:100%;position:relative}.thinProgressbar:after{content:"";display:block;position:absolute;height:11px;width:100%;top:-4px;left:0}.thinProgressbar__layer{position:absolute;height:100%;width:100%}.thinProgressbar__played{width:0;background-color: $mainColor}';d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".displayAd{height:100%}.displayAd__visualLink{display:block;height:100%}.displayAd__image{opacity:0;width:100%}.displayAd.imageLoaded .displayAd__image{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/ads/ad.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <a href="',d=a.landing_page,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"landing_page",{hash:{}})),c+=o(d)+'" class="displayAd__visualLink" >\n',c}function q(a,b){return" </a>\n"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.landing_page,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+=' <img class="displayAd__image g-opacity-transition" src="',g=b.ad_visual,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"ad_visual",{hash:{}})),f+=o(g)+'" />\n',g=b.landing_page,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/sound/explicit-badge",["require","exports","module","models/sound","lib/view","views/sound/explicit-badge.css"],function(a,b,c){var d=a("models/sound"),e=a("lib/view"),f=c.exports=e.extend({css:a("views/sound/explicit-badge.css"),tagName:"span",ModelClass:d,className:"explicitBadge sc-border-dark sc-text-light sc-font-light",requiredAttributes:["publisher_info"],template:function(){return"EXPLICIT"}})}),
define("views/buttons/follow-button",["require","exports","module","lib/action-controller","lib/views/mixins/button","lib/event-bus","models/user","models/followers","models/followings","tracking-events","lib/view","views/buttons/follow-button.tmpl"],function(a,b,c){function m(){return!!this.model.get(this.options.resource_id)}function n(){return!!this.myFollowers.get(this.options.resource_id)}var d=a("lib/action-controller"),e=a("lib/views/mixins/button"),f=a("lib/event-bus"),g=a("models/user"),h=a("models/followers"),i=a("models/followings"),j=a("tracking-events"),k=a("lib/view"),l=c.exports=k.extend(e,{ModelClass:i,className:"sc-button-follow sc-button-cta",template:a("views/buttons/follow-button.tmpl"),defaults:{icon_only:!1},setup:function(){this.observedAttributes=[this.options.resource_id],this.myFollowers=new h,this.setupModelListeners(this.myFollowers)},dispose:function(){this.teardownModelListeners(this.myFollowers),this.myFollowers.release(),delete this.myFollowers},renderDecorate:function(){var a=m.call(this);this.myFollowers.lastFetchTime||this.myFollowers.fetch(),this.toggleState("selected",a),this.$el.toggleClass("sc-button-cta",!a)},onClick:function(a){var b=new g({id:this.options.resource_id});f.trigger(j.UI.FOLLOW_BUTTON_CLICKED,b),d.follow(this.options.resource_id,!m.call(this)),a.preventDefault()},getTemplateData:function(){var a=m.call(this),b=n.call(this);return{selected:a,followBack:!a&&b}}})}),
define("views/sound/play-button.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".playButton{position:relative;display:inline-block;width:43px;height:43px;margin:0;padding:0;vertical-align:middle;border:0;background:transparent}.playButton.small{width:20px;height:20px}.playButton:disabled,.playButton.disabled{opacity:.4}.playButton__play{display:block}.playButton__pause{display:none}.playButton.playing .playButton__play{display:none}.playButton.playing .playButton__pause{display:block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/play-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<style type="text/css"> .playButton .playButton__overlay { visibility: hidden; } .playButton:hover .playButton__overlay, .playButton:focus .playButton__overlay { visibility: visible; } .playButton:focus { outline: 1px dotted ',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorDarker,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorDarker",{hash:{}})),f+=m(g)+'; }\n</style>\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43 43"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColor,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColor",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> <stop offset="100%" stop-color="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorShade,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorShade",{hash:{}})),f+=m(g)+'" stop-opacity="1"/> </linearGradient> </defs> <circle fill="url(#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+')" stroke="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorDarker,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorDarker",{hash:{}})),f+=m(g)+'" cx="21.5" cy="21.5" r="21"/> <circle class="playButton__overlay" fill="#000" fill-opacity="0.08" stroke="',g=b.custom,g=g===null||g===undefined||g===!1?g:g.mainColorDarker,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"custom.mainColorDarker",{hash:{}})),f+=m(g)+'" cx="21.5" cy="21.5" r="21"/> <path class="playButton__play" fill="#fff" d="M31,21.5L17,33l2.5-11.5L17,10L31,21.5z"/> <g fill="#fff" class="playButton__pause"> <rect x="15" y="12" width="5" height="19"/> <rect x="23" y="12" width="5" height="19"/> </g>\n</svg>\n',f})}),
define("views/sound/logo.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".logo,.logo:hover,.logo:focus{outline:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/sound/logo.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<style type="text/css"> .logo { display: inline-block; height: 22px; padding: 5px 0; } .logo__path { fill: #999; } .logo.inverse .logo__path { fill: #fff; } .logo.alt .logo__path { fill: #333; } .logo:hover .logo__path, .logo:focus .logo__path { fill: url("#',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'"); } .logo.state-small { width: 25px; overflow: hidden; }\n</style>\n<svg xmlns="http://www.w3.org/2000/svg" width="100" height="14"> <defs> <linearGradient id="',g=b.gradient_id,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"gradient_id",{hash:{}})),f+=m(g)+'" x1="0%" y1="0%" x2="0%" y2="100%" spreadMethod="pad"> <stop offset="0%" stop-color="#ff7700" stop-opacity="1"/> <stop offset="100%" stop-color="#ff3300" stop-opacity="1"/> </linearGradient> </defs> <path class="logo__path" d="M10.517 3.742c-.323 0-.49.363-.49.582 0 0-.244 3.591-.244 4.641 0 1.602.15 2.621.15 2.621 0 .222.261.401.584.401.321 0 .519-.179.519-.401 0 0 .398-1.038.398-2.639 0-1.837-.153-4.127-.284-4.592-.112-.395-.313-.613-.633-.613zm-1.996.268c-.323 0-.49.363-.49.582 0 0-.244 3.322-.244 4.372 0 1.602.119 2.621.119 2.621 0 .222.26.401.584.401.321 0 .581-.179.581-.401 0 0 .081-1.007.081-2.608 0-1.837-.206-4.386-.206-4.386 0-.218-.104-.581-.425-.581zm-2.021 1.729c-.324 0-.49.362-.49.582 0 0-.272 1.594-.272 2.644 0 1.602.179 2.559.179 2.559 0 .222.229.463.552.463.321 0 .519-.241.519-.463 0 0 .19-.944.19-2.546 0-1.837-.253-2.657-.253-2.657 0-.22-.104-.582-.425-.582zm-2.046-.358c-.323 0-.49.363-.49.582 0 0-.162 1.92-.162 2.97 0 1.602.069 2.496.069 2.496 0 .222.26.557.584.557.321 0 .581-.304.581-.526 0 0 .143-.936.143-2.538 0-1.837-.206-2.96-.206-2.96 0-.218-.198-.581-.519-.581zm-2.169 1.482c-.272 0-.232.218-.232.218v3.982s-.04.335.232.335c.351 0 .716-.832.716-2.348 0-1.245-.436-2.187-.716-2.187zm18.715-.976c-.289 0-.567.042-.832.116-.417-2.266-2.806-3.989-5.263-3.989-1.127 0-2.095.705-2.931 1.316v8.16s0 .484.5.484h8.526c1.655 0 3-1.55 3-3.155 0-1.607-1.346-2.932-3-2.932zm10.17.857c-1.077-.253-1.368-.389-1.368-.815 0-.3.242-.611.97-.611.621 0 1.106.253 1.542.699l.981-.951c-.641-.669-1.417-1.067-2.474-1.067-1.339 0-2.425.757-2.425 1.99 0 1.338.873 1.736 2.124 2.026 1.281.291 1.513.486 1.513.923 0 .514-.379.738-1.184.738-.65 0-1.26-.223-1.736-.777l-.98.873c.514.757 1.504 1.232 2.639 1.232 1.853 0 2.668-.873 2.668-2.163 0-1.477-1.193-1.845-2.27-2.097zm6.803-2.745c-1.853 0-2.949 1.435-2.949 3.502s1.096 3.501 2.949 3.501c1.852 0 2.949-1.434 2.949-3.501s-1.096-3.502-2.949-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.096 0 1.551.94 1.551 2.153.001 1.213-.454 2.153-1.551 2.153zm8.939-1.736c0 1.086-.533 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.897h-1.358v3.916c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.754-1.136 2.754-3.103v-3.897h-1.358v3.916zm8.142-.89l.019 1.485c-.087-.174-.31-.515-.475-.768l-2.703-3.692h-1.362v6.894h1.401v-2.988l-.02-1.484c.088.175.311.514.475.767l2.79 3.705h1.213v-6.894h-1.339v2.975zm5.895-2.923h-2.124v6.791h2.027c1.746 0 3.474-1.01 3.474-3.395 0-2.484-1.437-3.396-3.377-3.396zm-.097 5.472h-.67v-4.152h.719c1.436 0 2.028.688 2.028 2.076 0 1.242-.651 2.076-2.077 2.076zm7.909-4.229c.611 0 1 .271 1.242.737l1.26-.582c-.426-.883-1.202-1.503-2.483-1.503-1.775 0-3.016 1.435-3.016 3.502 0 2.143 1.191 3.501 2.968 3.501 1.232 0 2.047-.572 2.513-1.533l-1.145-.68c-.358.602-.718.864-1.329.864-1.019 0-1.611-.932-1.611-2.153-.001-1.261.583-2.153 1.601-2.153zm5.17-1.192h-1.359v6.791h4.083v-1.338h-2.724v-5.453zm6.396-.157c-1.854 0-2.949 1.435-2.949 3.502s1.095 3.501 2.949 3.501c1.853 0 2.95-1.434 2.95-3.501s-1.097-3.502-2.95-3.502zm0 5.655c-1.097 0-1.553-.941-1.553-2.153 0-1.213.456-2.153 1.553-2.153 1.095 0 1.55.94 1.55 2.153.001 1.213-.454 2.153-1.55 2.153zm8.557-1.736c0 1.086-.532 1.756-1.396 1.756-.864 0-1.388-.689-1.388-1.775v-3.794h-1.358v3.813c0 1.978 1.106 3.084 2.746 3.084 1.726 0 2.755-1.136 2.755-3.103v-3.794h-1.36v3.813zm5.449-3.907h-2.318v6.978h2.211c1.908 0 3.789-1.037 3.789-3.489 0-2.552-1.565-3.489-3.682-3.489zm-.108 5.623h-.729v-4.266h.783c1.565 0 2.21.706 2.21 2.133.001 1.276-.707 2.133-2.264 2.133z"/> </svg>\n',f})}),
define("lib/action-controller",["require","exports","module","_","lib/backbone","lib/connect","models/followers","models/followings","models/groups","models/playlist-likes","models/sound-likes"],function(a,b,c){function n(a){var b=!1,c=a.list,e=a.state,g=a.target,h=a.origin,i=a.requestType,j=h===f.currentUserId(),k,l,o;return l=$.Deferred(),j&&!f.isLoggedIn()?f.login().done(function(){a.origin=f.currentUserId(),n(a).done(l.resolve).fail(l.reject)}).fail(l.reject):(c&&j?(k=function(){c.get(g)!==e?(c.toggle(g,e),e=c.get(g),a.persist&&(o=c.setRemote(g,e,i),o&&o.fail(function(b,c){c!=="abort"&&m.trigger("error",d.extend({xhr:b},a)),n(d.defaults({persist:!1,state:!e},a))}))):b=!0},c.fetch().done(k).done(l.resolve).fail(l.reject)):l.resolve(),l.done(function(){if(!b){var c=a.action;m.trigger([c,c+":origin:"+a.originType+":"+h,c+":target:"+a.targetType+":"+g].join(" "),{state:e,origin:h,originType:a.originType,target:g,targetType:a.targetType,context:a.context})}})),l}var d=a("_"),e=a("lib/backbone"),f=a("lib/connect"),g=a("models/followers"),h=a("models/followings"),i=a("models/groups"),j=a("models/playlist-likes"),k=a("models/sound-likes"),l={followings:new h,followers:new g,playlistLikes:new j,soundLikes:new k,groups:new i},m=c.exports=d.extend({},e.Events,{follow:function(a,b,c){var e=f.currentUserId(),g,h;c=d.defaults(c||{},{action:"follow",origin:e,originType:"user",target:a,targetType:"user",state:b,persist:!0}),h=c.origin;if(h===c.target)return;c.target===e?(g=l.followers,g.fetch().done(function(){g.get(h)!==c.state&&(g.toggle(h,c.state),c.state=g.get(h),n(c))})):(c.list=h===e?l.followings:null,n(c))},like:function(a,b,c,e){e=d.defaults(e||{},{action:"like",origin:f.currentUserId(),originType:"user",target:a,targetType:b,state:c,persist:!0,list:b==="playlist"?l.playlistLikes:l.soundLikes}),n(e)},join:function(a,b,c){return c=d.defaults(c||{},{action:"join",origin:f.currentUserId(),originType:"user",target:a,targetType:"group",state:b,persist:!0,list:l.groups}),n(c)}})}),
define("lib/views/mixins/button",["require","exports","module","_","config/sizes","lib/views/mixins/responsive","lib/mixin"],function(a,b,c){function i(a){this.options.responsive&&this.toggleState("icon",a!==e.DEFAULT)}var d=a("_"),e=a("config/sizes"),f=a("lib/views/mixins/responsive"),g=a("lib/mixin"),h=c.exports=new g({applyTo:function(a){f.applyTo(a),a.defaults=d.extend({size:"small",text_only:!1,icon_only:!0,responsive:!1,visual:!1},a.defaults),a.states=d.extend({active:"sc-button-active",selected:"sc-button-selected",icon:"sc-button-icon",visual:"sc-button-visual"},a.states),a.className=["sc-button",a.className].join(" ").trim(),a.events=d.extend({},a.events,{"click.button":"onClick"})},defaults:{tagName:"button",onClick:$.noop,template:function(){return""},loadingTemplate:null,onWindowSizeChange:i},before:{setup:function(a){this.$el.attr("tabIndex",0).addClass("sc-button-"+a.size),this.toggleState("icon",a.icon_only).toggleState("visual",a.visual),i.call(this,this.getWindowSize())}}})}),
define("lib/views/mixins/has-tooltip",["require","exports","module","_","lib/views/tooltip","lib/mixin"],function(a,b,c){function h(a){var b=i.call(this),c=this.el.getAttribute("aria-haspopup"),d=this.el.getAttribute("aria-owns");a.type==="mouseenter"&&(!c||d&&!document.getElementById(d))?(this.toggleState("mouseover",!0),b.open()):a.type==="mouseleave"&&(this.toggleState("mouseover",!1),b.close())}function i(){var a=this.subviews.tooltip;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=j.call(this),this.addSubview(a,"tooltip")),this.subviews.tooltip}function j(){var a=new e({togglerEl:this.el,relativeElement:this.el,domId:this.domId,priorityLevel:e.PriorityLevels.LOW});return a}var d=a("_"),e=a("lib/views/tooltip"),f=a("lib/mixin"),g=c.exports=new f({applyTo:function(a){a.events=d.extend({mouseenter:h,mouseleave:h},a.events)},before:{setup:function(){this.domId=d.uniqueId("tooltip-"),this.$el.attr({"aria-describedby":this.domId})}},after:{renderDecorate:function(){if(this.getState("mouseover")){var a=i.call(this);a.open()}}}})}),
define("models/sound-likes",["require","exports","module","lib/api-wrapper","config","models/sound","models/id-list"],function(a,b,c){var d=a("lib/api-wrapper"),e=a("config"),f=a("models/sound"),g=a("models/id-list"),h=c.exports=g.extend({baseUrl:function(){return d.EDGE+"me/track_likes/"},onToggle:function(a,b){var c=f.instances.get(a),d=e.get("me");c&&c.likesChanged(b),d&&d.likesChanged(b)}})}),
define("models/playlist-likes",["require","exports","module","lib/api-wrapper","models/id-list"],function(a,b,c){var d=a("lib/api-wrapper"),e=a("models/id-list"),f=c.exports=e.extend({baseUrl:function(){return d.EDGE+"me/playlist_likes/"}})}),
define("vendor/js-online-stores/online-stores",["require","exports","module"],function(a,b,c){(function(){var a={getPurchaseTitle:function(a,b){var c=a.purchase_url,d=this._shops,e;if(c&&!a.purchase_title)if(d.Flattr.test(c))a.purchase_title="Flattr";else if(d["Getty Images"].test(c))a.purchase_title="License";else{a.purchase_title=b||"Buy";for(e in d)if(d.hasOwnProperty(e)&&d[e].test(c)){a.purchase_title+=" on "+e;break}}return a.purchase_title},getStoreName:function(a){var b=a.purchase_url,c=this._shops,d;if(b)for(var e in c)if(c[e].test(b)){d=e;break}return d},_shops:{Amazon:/ama?zo?n\.(co\.(jp|uk)|com|de|to)/,Beatport:/beatport\.(com|it)/,iTunes:/apple\.com/,Juno:/juno(\.co\.uk|download\.com)/,"Digital Tunes":/digital-tunes\.net/,'zero"':/zero-inch\.com/,trackitdown:/trackitdown\.net/,whatpeopleplay:/whatpeopleplay\.com/,DJdownload:/djdownload\.com/,Minno:/soundra\.in/,Flattr:/flattr\.com/,Ganxy:/ganxy\.com/,"Getty Images":/soundcloud\.(.*-)?gettyimages\.com/}};typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.OnlineStores=a)})()}),
define("lib/views/mixins/has-overlay",["require","exports","module","_","lib/views/dialog","lib/mixin"],function(a,b,c){function h(){var a,b,c,f=this.options;return b=i.call(this,f.ContentViewClass),c=d.extend({resource_id:f.resource_id,resource_type:f.resource_type},f.contentViewOptions),a=new e({togglerEl:this.el,relativeElement:this.el,Subview:b,subviewArgs:c,domId:this.domId,priorityLevel:e.PriorityLevels.HIGH}),a}function i(a){return a?d.isFunction(a.extend)?a:a.call(this):undefined}function j(){var a=this.subviews.overlay;a&&this.toggleState("overlay-opened",a.isOpened)}var d=a("_"),e=a("lib/views/dialog"),f=a("lib/mixin"),g=c.exports=new f({applyTo:function(a){a.defaults=d.extend({el:null,ContentViewClass:null,contentViewOptions:null},a.defaults)},defaults:{contentView:null,domId:null,toggleOverlay:function(){var a=this.getOverlay();a.isOpened?a.close():a.open()},getOverlay:function(){var a=this.subviews.overlay;return a&&a.disposed&&(this.removeSubview(a),a=null),a||(a=h.call(this),a.on([e.Events.CLOSED,e.Events.OPENED].join(" "),j,this),this.addSubview(a,"overlay")),this.subviews.overlay}},before:{setup:function(){d.bindAll(this,"toggleOverlay"),this.domId=d.uniqueId("overlay-"),this.$el.attr({"aria-haspopup":"true","aria-owns":this.domId})}}})}),
define("views/share/share-panel",["require","exports","module","lib/views/mixins/multi-resource-type","lib/event-bus","tracking-events","lib/view","views/share/share-panel.css","views/share/share-panel.tmpl"],function(a,b,c){function i(a){a.isTrigger||e.trigger(f.UI.LINK_INPUT_CLICKED,this.model),n(a.target)}function j(a){n(a.target)}function k(a){var b={},c;a.target.checked&&(b.format="wordpress"),c=this.model.getEmbedCode(b),this.$$("embedCodeInput").val(c).click()}function l(){this.toggleState("embed",!1).$$("linkCodeInput").click(),e.trigger(f.UI.LINK_BUTTON_CLICKED,this.model)}function m(){this.toggleState("embed",!0).$$("embedCodeInput").click(),e.trigger(f.UI.EMBED_BUTTON_CLICKED,this.model)}function n(a){a.select()}var d=a("lib/views/mixins/multi-resource-type"),e=a("lib/event-bus"),f=a("tracking-events"),g=a("lib/view"),h=c.exports=g.extend(d,{css:a("views/share/share-panel.css"),template:a("views/share/share-panel.tmpl"),className:"sharePanel",requiredAttributes:["permalink_url"],events:{"change .sharePanel__wordpress":k,"click  .sharePanel__embedButton":m,"click  .sharePanel__embedCodeInput":j,"click  .sharePanel__linkButton":l,"click  .sharePanel__linkCodeInput":i},defaults:{show_embed_options:!0},states:{embed:"embedCodeVisible"},setup:function(){this.options.show_embed_options=this.isAudible?this.options.show_embed_options:!1,e.trigger(f.UI.SHARE_VIEW_OPENED,this.model)},getTemplateData:function(a){return this.options.show_embed_options&&this.isAudible&&this.model.get("embeddable_by")==="all"&&(a.embed_code=this.model.getEmbedCode()),a.share_url=this.getShareURL(),a}})}),
define("views/sound/explicit-badge.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".explicitBadge{display:inline-block;padding:0 1px;font-size:10px;line-height:12px;height:12px;text-transform:uppercase}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("models/followers",["require","exports","module","models/id-list"],function(a,b,c){var d=a("models/id-list"),e=c.exports=d.extend({baseUrl:function(){return"me/followers/"},setRemote:$.noop})}),
define("models/followings",["require","exports","module","models/id-list"],function(a,b,c){var d=a("models/id-list"),e=c.exports=d.extend({baseUrl:function(){return"me/followings/"}})}),
define("views/buttons/follow-button.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function m(a,b){var d="",e,f;return d+=" ",e="Follow back",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+"\n",d}function n(a,b){var d="",e,f;d+=" ",e=a.selected,f=c["if"],j=k.program(4,o,b),j.hash={},j.fn=j,j.inverse=k.program(6,p,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n",d}function o(a,b){var d="",e,f;return d+=" ",e="Following",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+" ",d}function p(a,b){var d="",e,f;return d+=" ",e="Follow",f=c.$t,e=f.call(a,e,{hash:{}}),d+=l(e)+" ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;g=b.followBack,h=c["if"],j=k.program(1,m,e),j.hash={},j.fn=j,j.inverse=k.program(3,n,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("models/groups",["require","exports","module","_","lib/connect","models/id-list","lib/url"],function(a,b,c){var d=a("_"),e=a("lib/connect"),f=a("models/id-list"),g=a("lib/url"),h=c.exports=f.extend({baseUrl:"me/groups",CREATE:"POST",url:function(a,b){var c=d.result(this,"baseUrl");return a&&b==="CREATE"?this.saveUrl(a):a&&b==="DELETE"?this.destroyUrl(a):this.next_href===null?g.modify(c,{query:{representation:"mini",linked_partitioning:1,limit:5e3}}):this.next_href},parse:function(a){var b=a.collection,c={};return this.next_href=a.next_href||!1,b&&b.length&&b.forEach(function(a){c[a.id]=!0}),c},destroyUrl:function(a){return g.joinPath(["groups",a,"members",e.currentUserId()])},saveUrl:function(a){return g.joinPath(["groups",a,"members"])}})}),
define("lib/views/tooltip",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/tooltip.tmpl","lib/views/tooltip.css"],function(a,b,c){var d=a("lib/views/mixins/overlay"),e=a("lib/view"),f=c.exports=e.extend(d,{template:a("lib/views/tooltip.tmpl"),css:a("lib/views/tooltip.css"),className:"tooltip g-overlay sc-selection-disabled",defaults:{margin:11,collision:"fit",text:null},attributes:{role:"tooltip"},setup:function(){var a=this.options;!a.text&&a.relativeElement&&(a.text=a.relativeElement.title,a.relativeElement.removeAttribute("title"))},closeDecorate:function(){this.toggleState("visible",!1)},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("visible",this.isOpened)}.bind(this))}})}),
define("models/id-list",["require","exports","module","_","lib/connect","lib/event-bus","lib/model","lib/store","lib/url"],function(a,b,c){function k(){var a=this.url();a&&e.isLoggedIn()?g.prototype.fetch.apply(this,arguments).done(k.bind(this)).fail(this._fetchDefer.reject):this._fetchDefer.resolve()}var d=a("_"),e=a("lib/connect"),f=a("lib/event-bus"),g=a("lib/model"),h=a("lib/store"),i=a("lib/url"),j=c.exports=g.extend({CREATE:"PUT",READ:"GET",DELETE:"DELETE",_currentRequests:null,next_href:null,_fetchDefer:null,readPathSuffix:"ids",setup:function(){this._currentRequests=new h},url:function(a){var b=i.parse(d.result(this,"baseUrl"));b.path=b.path.replace(/\/?$/,"/");if(a)b.path+=a;else if(this.next_href===null)b.path+=this.readPathSuffix,b.query.linked_partitioning=1,b.query.limit=5e3;else return this.next_href;return i.stringify(b)},get:function(){return g.prototype.get.apply(this,arguments)||!1},fetch:function(){return this._fetchDefer||(this._fetchDefer=$.Deferred(),e.isLoggedIn()?k.call(this):f.one("connect:hasUserData",k.bind(this))),this._fetchDefer},parse:function(a){return this.next_href=a.next_href||!1,d.reduce(a.collection,function(a,b){return a[b]=!0,a},{})},toggle:function(a,b){var c=this.get(a),d=typeof b=="boolean"?b:!c;d!==c&&(d?this.set(a,!0):this.unset(a))},setRemote:function(a,b,c){var d,e,f=this._currentRequests.get(a),g;if(!f)return e=c?c:b?"CREATE":"DELETE",d=this.url(a,e),f=$.ajax({url:d,type:this[e],dataType:"json"}),this._currentRequests.set(a,f),g=this,f.always(function(){this._currentRequests.unset(a)}.bind(this)).done(function(){var b=g.get(a);(this.type===g.DELETE&&b||this.type===g.CREATE&&!b)&&g.setRemote(a,b)}),f},hasDataForView:function(){return!!this.lastFetchTime}},{neverRelease:!0,hashFn:function(){return 1}})}),
define("lib/views/dialog",["require","exports","module","lib/views/mixins/overlay","lib/view","lib/views/dialog.css","lib/views/dialog.tmpl"],function(a,b,c){var d=a("lib/views/mixins/overlay"),e=a("lib/view"),f=c.exports=e.extend(d,{css:a("lib/views/dialog.css"),template:a("lib/views/dialog.tmpl"),className:"dialog g-overlay",defaults:{margin:11},getOverlayContentEl:function(){return this.$$("content")}})}),
define("views/share/share-panel.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".sharePanel__header{height:32px;margin-bottom:14px}.sharePanel__header,.sharePanel__linkCode,.sharePanel__embedCode{overflow:hidden}.sharePanel__linkCode,.sharePanel.embedCodeVisible .sharePanel__embedCode{display:block}.sharePanel.embedCodeVisible .sharePanel__linkCode,.sharePanel__embedCode{display:none}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-panel.tmpl",["vendor/handlebars-runtime","views/share/icons-list"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function q(a,b){var d="",e,f;return d+=' <div class="sc-media-right"> <button class="sharePanel__embedButton sc-button">',e="Embed",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+"</button> </div> ",d}function r(a,b){var d="",e,f;d+='\n<div class="sharePanel__embedCode sc-media"> <div class="sc-media-right"> <input type="checkbox" id="embed-code-wordpress" class="sharePanel__wordpress"/> <label for="embed-code-wordpress" class="g-label">',e="WordPress",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+'</label> <button class="sharePanel__linkActionButton sharePanel__linkButton sc-button">',e="Link",f=c.$t,e=f.call(a,e,{hash:{}}),d+=m(e)+"</button> </div> ",e=a.embed_code,f=c["if"],k=l.program(4,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n</div>\n",d}function s(a,b){var c="",d;return c+=' <div class="sc-media-body"> <input class="sharePanel__embedCodeInput g-input g-selection" type="text" readonly="readonly" value="',d=a.embed_code,typeof d===n?d=d.call(a,{hash:{}}):d===p&&(d=o.call(a,"embed_code",{hash:{}})),c+=m(d)+'"/> </div> ',c}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m=this.escapeExpression,n="function",o=c.helperMissing,p=void 0;f+='<div class="sharePanel__header"> <div class="sharePanel__icons sc-left"> ',g="views/share/icons-list",h={},i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_id,h.resource_id=i,i=b._options,i=i===null||i===undefined||i===!1?i:i.resource_type,h.resource_type=i,i=c.$view,k={},k.hash=h,g=i.call(b,g,k),f+=m(g)+' </div>\n</div> <div class="sharePanel__linkCode sc-media"> ',g=b.embed_code,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' <div class="sc-media-body"> <input id="link-code-input" class="sharePanel__linkCodeInput g-input g-selection" type="text" readonly="readonly" value="',g=b.share_url,typeof g===n?g=g.call(b,{hash:{}}):g===p&&(g=o.call(b,"share_url",{hash:{}})),f+=m(g)+'"/> </div>\n</div> ',g=b._options,g=g===null||g===undefined||g===!1?g:g.show_embed_options,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/views/mixins/overlay",["require","exports","module","_","lib/keys","lib/event-bus","lib/math","lib/mixin"],function(a,b,c){function m(a){var b=a?"on":"off";f[b](i.OPENED,this.onOverlayOpen,this),$(document)[b]("keydown",this.onDocumentKeydown),document[a?"addEventListener":"removeEventListener"]("click",this.onDocumentClick,!0),$(window)[b]("resize",this.onWindowResize)}function n(a,b){var c=b.element.element,d=b.target.element,e=$(window),f=this.$$("arrow"),h=a.top,i=a.left,j="fixed",k=e.width(),l=e.height(),m=c.outerWidth(),n=c.outerHeight(),o=this.options.margin,p=k-m-this.options.margin,q=this.options.margin,r=l-n-this.options.margin;h=g.clamp(h,q,r),i=g.clamp(i,o,p),this.options.relativeElement&&f.length&&this.options.anchor==="center top"&&(f.css({left:d.offset().left-i+d.outerWidth()/2-f.outerWidth()/2,top:-f.outerHeight()}),h+=f.outerHeight()+3),c.css({position:j,top:h,left:i})}function o(a){var b=p(this),c=p(a);return b<c}function p(a){return a.options.priorityLevel||j.MEDIUM}function q(){return!0}var d=a("_"),e=a("lib/keys"),f=a("lib/event-bus"),g=a("lib/math"),h=a("lib/mixin"),i={OPENED:"overlay:opened",CLOSED:"overlay:closed"},j={HIGH:1,MEDIUM:2,LOW:3},k=300,l=c.exports=new h({applyTo:function(a){var b=a.constructor;d.extend(b,{Events:i,PriorityLevels:j}),a.defaults=d.defaults(a.defaults||{},{Subview:null,subviewArgs:null,togglerEl:null,relativeElement:null,relativeElementAnchor:"center bottom",anchor:"center top",offset:"0 0",collision:"flip",width:"auto",minHeight:"auto",domId:null,focusable:!0,margin:0,priorityLevel:null}),a.element2selector=d.extend({},a.element2selector,{"last-tabbable":":tabbable:last","first-tabbable":":tabbable:first"})},before:{setup:function(){d.bindAll(this,"onDocumentClick","onDocumentKeydown","onWindowResize"),m.call(this,!0),this.$el.css({outline:"none"}),this.onPositionComplete=n.bind(this)},dispose:function(){m.call(this,!1),this.close()}},defaults:{template:function(){return""},isOpened:!1,open:function(){!this.disposed&&!this.isOpened&&this.canBeOpened()&&(this.isOpened=!0,this.rerender(),this.$el.appendTo(document.body),this.createContentView(),this.position(),this.options.focusable&&this.$el.focus(),this.trigger(i.OPENED),f.trigger(i.OPENED,this))},close:function(a){!this.disposed&&this.isOpened&&(a||this.canBeClosed())&&(this.isOpened=!1,this.$el.detach(),this.closeDecorate(),this.trigger(i.CLOSED))},closeDecorate:$.noop,canBeClosed:q,canBeOpened:q,getContentView:function(){return this.subviews.contentView},createContentView:function(){if(this.getContentView()||!this.options.Subview)return;var a=this.options,b=a.Subview,c=d.result(a,"subviewArgs"),e;e=this.addSubview(new b(d.extend({resource_id:a.resource_id,resource_type:a.resource_type},c)),"contentView"),this.$el.attr({tabindex:"-1",id:this.options.domId||d.uniqueId("overlay_")}),this.getOverlayContentEl().append(e.render().el)},getOverlayContentEl:function(){return this.$el},position:function(){var a=this.options;this.$el.css({width:a.width,minHeight:a.minHeight,position:"fixed"}).position({my:a.anchor,at:a.relativeElementAnchor,of:a.relativeElement,offset:a.offset,collision:a.collision,using:this.onPositionComplete}),this.positionDecorate()},positionDecorate:$.noop,onOverlayOpen:function(a){a.isOpened&&a!==this&&!o.call(this,a)&&this.close(!0)},onDocumentClick:function(a){if(!this.isOpened||$(a.target).closest(this.options.togglerEl).length)return;$(a.target).closest(this.$el).length||this.close()},onDocumentKeydown:function(a){if(!this.isOpened)return;if(a.which===e.ESC){this.close();var b=this._parentView&&this._parentView.$el;b&&b.focus()}else if(a.which===e.TAB){if(!a.shiftKey&&a.target===this.getElement("last-tabbable")[0])return this.getElement("first-tabbable").focus(),!1;if(a.shiftKey&&a.target===this.getElement("first-tabbable")[0])return this.getElement("last-tabbable").focus(),!1}},onWindowResize:d.throttle(function(){!this.disposed&&this.isOpened&&this.position()},k)}})}),
define("lib/views/tooltip.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<div class="tooltip__arrow g-arrow g-arrow-top"></div>\n<div class="tooltip__content">',g=b._options,g=g===null||g===undefined||g===!1?g:g.text,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"_options.text",{hash:{}})),f+=m(g)+"</div>\n",f})}),
define("lib/views/tooltip.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".tooltip{padding:3px 7px;opacity:0;-webkit-transition:opacity .1s linear;transition:opacity .1s linear;font-size:12px;line-height:15px}.tooltip.visible{opacity:1}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".dialog{padding:10px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/views/dialog.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="dialog__arrow g-arrow g-arrow-top"></div>\n<div class="dialog__content"></div>\n'})}),
define("views/share/icons-list",["require","exports","module","_","lib/browser","lib/helpers/L10n-helper","lib/views/mixins/multi-resource-type","lib/view","views/share/icons/email","views/share/icons/fb","views/share/icons/google","views/share/icons/line","views/share/icons/mixi","views/share/icons/orkut","views/share/icons/pinterest","views/share/icons/tuenti","views/share/icons/tumblr","views/share/icons/twitter","views/share/icons/vkontakte","views/share/icons/weibo","views/share/icons-list.tmpl","views/share/icons-list.css"],function(a,b,c){var d=a("_"),e=a("lib/browser"),f=a("lib/helpers/L10n-helper"),g=a("lib/views/mixins/multi-resource-type"),h=a("lib/view"),i=a("views/share/icons/email"),j=a("views/share/icons/fb"),k=a("views/share/icons/google"),l=a("views/share/icons/line"),m=a("views/share/icons/mixi"),n=a("views/share/icons/orkut"),o=a("views/share/icons/pinterest"),p=a("views/share/icons/tuenti"),q=a("views/share/icons/tumblr"),r=a("views/share/icons/twitter"),s=a("views/share/icons/vkontakte"),t=a("views/share/icons/weibo"),u=[j,r,q,k],v={global:[o],china:[t],brazil:[n],russia:[s],japan:[m],spain:[p]},w=f.isUsedLanguage("zh")?"china":f.isUsedLanguageAndCountry("pt-BR")?"brazil":f.isUsedLanguage("ru")||f.isUsedLanguage("uk")?"russia":f.isUsedLanguage("jp")?"japan":f.isUsedLanguageAndCountry("es-ES")?"spain":"global",x=e.isiOS||e.isAndroid?[i,l]:[i],y=c.exports=h.extend(g,{tagName:"ul",template:a("views/share/icons-list.tmpl"),css:a("views/share/icons-list.css"),className:"shareIcons sc-list-nostyle",getTemplateData:function(a){return d.extend(a,{icons:u.concat(v[w]).concat(x)})}})}),
define("lib/keys",["require","exports","module"],function(a,b,c){c.exports={ALT:18,BACKSPACE:8,CTRL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,INSERT:45,LEFT:37,META:97,PGDOWN:34,PGUP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,COMMA:188}}),
define("lib/helpers/L10n-helper",["require","exports","module"],function(a,b,c){var d=(navigator.userLanguage||navigator.language||"").toLowerCase(),e=d.split("-")[0],f=c.exports={isUsedLanguage:function(a){return e===a.toLowerCase()},isUsedLanguageAndCountry:function(a){return d===a.toLowerCase()}}}),
define("views/share/icons/email",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[550,300],serviceKey:"email",serviceName:"Email",opensPopup:!1,hrefTemplate:"mailto:?subject={share_title}%20-%20SoundCloud&body={share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url"),share_title:encodeURIComponent(a.get("title"))}}})}),
define("views/share/icons/fb",["require","exports","module","_","config","views/share/share-icon"],function(a,b,c){var d=a("_"),e=a("config"),f=a("views/share/share-icon"),g=c.exports=f.extend({defaults:{popupSize:[550,300],serviceKey:"facebook",serviceName:"Facebook",hrefTemplate:"//www.facebook.com/v2.2/dialog/share?app_id={fb_app_id}&amp;display=popup&amp;redirect_uri={fb_popup_page_url}&amp;href={share_url}"},getHrefData:function(a){return d.extend(a,{fb_app_id:e.get("fb_app_id"),fb_popup_page_url:encodeURI(location.protocol+"//soundcloud.com/fb_popup_callback.html")})}})}),
define("views/share/icons/google",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[600,600],serviceKey:"googleplus",serviceName:"Google+",hrefTemplate:"//plus.google.com/share?url={share_url}"}})}),
define("views/share/icons/line",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[550,300],serviceKey:"line",serviceName:"Line",hrefTemplate:"http://line.me/R/msg/text/?{share_url}"},getHrefData:function(){var a=this.model;return{share_url:a.get("permalink_url")}}})}),
define("views/share/icons/mixi",["require","exports","module","config","views/share/share-icon"],function(a,b,c){var d=a("config"),e=a("views/share/share-icon"),f=c.exports=e.extend({defaults:{popupSize:[650,450],serviceKey:"mixi",serviceName:"mixi",hrefTemplate:"http://mixi.jp/share.pl?u={share_url}&amp;k={mixi_api_key}"},getHrefData:function(a){return a.mixi_api_key=d.get("mixi_api_key"),a}})}),
define("views/share/icons/orkut",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[645,450],serviceKey:"orkut",serviceName:"Orkut",hrefTemplate:"http://promote.orkut.com/preview?nt=orkut.com&amp;tt={share_title}&amp;du={share_url}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/pinterest",["require","exports","module","lib/helpers/image-helper","lib/lingua","views/share/share-icon","lib/url"],function(a,b,c){var d=a("lib/helpers/image-helper"),e=a("lib/lingua"),f=a("views/share/share-icon"),g=a("lib/url"),h=c.exports=f.extend({defaults:{popupSize:[665,300],serviceKey:"pinterest",serviceName:"Pinterest"},getHref:function(){var a=this.model.toJSON(),b=this.getShareURL(),c=d.urlFrom(a,200),f=e.t("[[title]] on SoundCloud",{title:this.getShareTitle()});return g.stringify({query:{url:b,media:c,description:f,is_video:"true",utm_source:"soundcloud",utm_campaign:"share",utm_medium:"pinterest",utm_content:b}},"http://pinterest.com/pin/create/button/")},getTemplateData:function(){var a=f.prototype.getTemplateData.apply(this,arguments);return a.title=e.t("Pin it"),a}})}),
define("views/share/icons/tuenti",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[1e3,600],serviceKey:"tuenti",serviceName:"Tuenti",hrefTemplate:"http://www.tuenti.com/share?url={share_url}&amp;suggested-text={share_title}"},getHrefData:function(a){return a.share_title=encodeURIComponent(this.model.get("title")),a}})}),
define("views/share/icons/tumblr",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[450,450],serviceKey:"tumblr",serviceName:"Tumblr",hrefTemplate:"http://www.tumblr.com/share/audio?externally_hosted_url={share_url}&tags={tags}"}})}),
define("views/share/icons/twitter",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[700,251],serviceKey:"twitter",serviceName:"Twitter",hrefTemplate:"http://twitter.com/share?text={share_title}%20via%20%23soundcloud&amp;url={share_url}"}})}),
define("views/share/icons/vkontakte",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[645,450],serviceKey:"vkontakte",serviceName:"VK",hrefTemplate:"http://vkontakte.ru/share.php?url={share_url}"}})}),
define("views/share/icons/weibo",["require","exports","module","views/share/share-icon"],function(a,b,c){var d=a("views/share/share-icon"),e=c.exports=d.extend({defaults:{popupSize:[450,450],serviceKey:"weibo",serviceName:"Weibo",hrefTemplate:"http://service.weibo.com/share/share.php?url={share_url}"}})}),
define("views/share/icons-list.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function m(a,b,d){var e="",f,g,h;return e+=' <li class="shareIcons__icon"> ',f=a,g={},h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_id,g.resource_id=h,h=d._options,h=h===null||h===undefined||h===!1?h:h.resource_type,g.resource_type=h,h=c.$view,j={},j.hash=g,f=h.call(a,f,j),e+=l(f)+" </li>\n",e}c=c||a.helpers;var f="",g,h,i,j,k=this,l=this.escapeExpression;g=b.icons,h=c.each,j=k.programWithDepth(m,e,b),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),
define("views/share/icons-list.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcons__icon{float:left;margin:0 4px 0 0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-icon",["require","exports","module","lib/event-bus","lib/helpers/popup-helper","lib/helpers/tag-helper","tracking-events","lib/lingua","lib/views/mixins/multi-resource-type","config/resources","lib/utils","lib/view","views/share/share-icon.css","views/share/share-icon.tmpl"],function(a,b,c){function n(){var a=this.getShareURL(),b=this.options;return encodeURIComponent(a+"?utm_source=soundcloud&utm_campaign="+b.campaignName+"&utm_medium="+b.serviceName+"&utm_content="+a)}function o(){var a="",b;return this.isAudible&&(b=this.model.toJSON(),encodeURIComponent(["SoundCloud",b.user.username].concat(f.extract(b).slice(0,4)).join(","))),a}var d=a("lib/event-bus"),e=a("lib/helpers/popup-helper"),f=a("lib/helpers/tag-helper"),g=a("tracking-events"),h=a("lib/lingua"),i=a("lib/views/mixins/multi-resource-type"),j=a("config/resources"),k=a("lib/utils"),l=a("lib/view"),m=c.exports=l.extend(i,{className:"shareIcon",css:a("views/share/share-icon.css"),template:a("views/share/share-icon.tmpl"),defaults:{popupSize:null,serviceKey:null,serviceName:null,campaignName:"wtshare",hrefTemplate:null,opensPopup:!0},events:{"click .sc-social-icon":"onIconClick"},onIconClick:function(a){var b=this.options,c=b.popupSize;b.opensPopup&&(a.preventDefault(),e.centered(a.target.getAttribute("href"),c[0],c[1])),d.trigger(g.UI.SHARE_ICON_CLICKED,{model:this.model,shareIconType:this.options.serviceKey})},getHrefData:$.noop,getHref:function(){var a={tags:o.call(this),share_url:n.call(this),share_title:this.getShareTitle()};return k.supplant(this.options.hrefTemplate,this.getHrefData(a)||a)},getShareTitle:function(){var a=[],b=this.model.toJSON();switch(this.options.resource_type){case j.SOUND:case j.PLAYLIST:a=h.t("[[title]] by [[username]]",{title:b.title,username:b.user.username});break;case j.USER_FAVORITES:a=h.t("Favorite tracks of [[username]]",{username:b.username});break;case j.USER_SOUNDS:a=h.t("Latest tracks by [[username]]",{username:b.username});break;case j.GROUP_SOUNDS:a=h.t("Tracks from the [[username]]",{username:b.username})}return a},getTemplateData:function(){var a=this.options;return{href:this.getHref(),key:a.serviceKey,title:h.t("Share to [[socialnetwork]]",{socialnetwork:a.serviceName})}}})}),
define("lib/helpers/popup-helper",["require","exports","module"],function(a,b,c){c.exports={centered:function(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}}}),
define("lib/helpers/tag-helper",["require","exports","module"],function(a,b,c){var d=c.exports={extract:function(a){var b=a.tag_list||"",c=a.genre||"",d=[],e="",f=!1,g=!0,h=/(\w+)\:(\w+)=(.+)/,i,j,k;c&&d.push(c);for(i=0,j=b.length;i<j;++i)k=b.charAt(i),k==='"'?f=!f:k===" "?f?e+=k:g===!1&&(g=!0,d.push(e),e=""):(g=!1,e+=k);return g||d.push(e),d.filter(function(a){return!h.test(a)}).map(function(a){return a.replace(/"/g,"").replace(/\s\s+/," ").trim()}).filter(Boolean)}}}),
define("views/share/share-icon.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".shareIcon{display:inline-block}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/share/share-icon.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<a class="sc-social-icon sc-social-icon-32x32 sc-social-icon-',g=b.key,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"key",{hash:{}})),f+=m(g)+'-32x32 sc-ir" href="',g=b.href,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"href",{hash:{}})),f+=m(g)+'" title="',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+'">',g=b.title,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"title",{hash:{}})),f+=m(g)+"</a>\n",f})})